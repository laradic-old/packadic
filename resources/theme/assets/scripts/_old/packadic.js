define(["jquery","lodash","packadic/autoloader","bootstrap","packadic/side-nav"],function(e,t,n){function r(e){return typeof e!="undefined"}var i=window.Packadic=function(e){this.options=t.merge({data:{},debug:!0,selectors:{site:"#site-wrapper",top:"#top-wrapper",page:"#page-wrapper",side:"#sidebar-wrapper",content:"#content-wrapper",topnav:"nav.navbar-topmenu",sideNav:".side-nav ul",topmenu:"#topmenu"},sideNav:{},topMenu:{},site:{}},e),this.init()};return i.init=function(e){return window.packadic=new i(e)},i.getTemplate=function(e,t){return window.tpls[e](t)},i.getRandomId=function(e){var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var r=0;r<15;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},i.toastr=function(e){var n=t.toArray(arguments);console.log(n),require(["toastr"],e)},i.CodeMirror=function(t,n){var i=["codemirror/lib/codemirror","codemirror/mode/javascript/javascript","codemirror/mode/css/css","codemirror/mode/xml/xml","codemirror/mode/htmlmixed/htmlmixed"];r(t)?(r(t.modes)&&e.each(t.modes,function(e,t){t="codemirror/mode/"+t+"/"+t,i.indexOf(t)===-1&&i.push(t)}),r(t.addons)&&e.each(t.addons,function(e,t){t="codemirror/addon/"+t,i.indexOf(t)===-1&&i.push(t)})):n=t,require(i,function(e){n(e)})},i.showCode=function(n){n.title=n.title||"Viewing code",n.load=n.load||{},n.editor=n.editor||{},i.CodeMirror(n.load,function(r){require(["bootbox"],function(s){var o=i.getRandomId(),u=e(document.createElement("div")),a=e(document.createElement("textarea"));a.attr("id",o).html(n.code),u.append(a),s.dialog({title:n.title,className:"bootbox-full-width",message:u.html(),buttons:{success:{label:"Close",className:"btn-primary"}}});var f=r.fromTextArea(document.getElementById(o),t.merge({mode:"htmlmixed",lineNumbers:!0,lineWrapping:!0,theme:"zenburn"},n.editor));f.setSize("100%",200),r.commands.selectAll(f),r.commands.indentAuto(f),r.commands.goDocStart(f),f.refresh(),setTimeout(function(){f.refresh()},400)})})},i.prototype={handleResize:function(){},getNavigation:function(e){return this.site.data.navigation[e]},_trigger:function(e,n){this.$el.trigger(t.merge({type:e},n))},_on:function(e,t){this.$el.on(e,t)},initSideNav:function(){this.$sideNav.sideNav(this.options.sideNav),this.$sideNav.sideNav("createFromJSON",this.getNavigation("sidenav"))},initDebug:function(){this.options.debug===!0?(e(".site-debug").show(),e("*[data-debug]").each(function(){var t=e(this);debug[t.data("debug")](t)})):e(".site-debug").hide()},initShowHtml:function(){e(".show-html").on("click",function(t){t.preventDefault();var n=e(this),r=n[0].outerHTML;i.showCode({title:"Showing code",code:r,editor:{mode:"htmlmixed"}})}).tooltip({title:"Click to view HTML code"})},init:function(){var t=this;this.$element=e(document.createElement("div")),this.$window=e(window),this.$document=e(window.document),e.each(this.options.selectors,function(t,n){this["$"+t]=e(n)}.bind(this)),this.$sideNav=this.$sideNav.first(),this.site=this.options.site,n.init(),this.initShowHtml(),this.initSideNav(),this.initDebug(),console.log(this)}},i});