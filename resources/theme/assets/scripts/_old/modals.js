define(["jquery","lodash","bootstrap"],function(e,t){function n(e){return!t.isUndefined(e)}function r(e){return window.tpls.modal(e)}function i(e){n(e)||(e=15);var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;i<e;i++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function s(e){this.options=t.merge(s.defaults.options,e)}s.defaults={options:{id:null,appendTo:"body",closeOnEsc:!0,closeOnClick:!1,header:null,title:null,closeButton:!0,content:null,footer:null,buttons:{}},data:{}},s.prototype={_listeners:{},options:{},$modal:null,_trigger:function(){var e=t.toArray(arguments),n=e.splice(0,1),r=this;t.isArray(this._listeners[n])&&t.forEach(this._listeners[n],function(t){t.apply(r,e)})},_getTemplateData:function(){var e=this.options,n=t.merge(s.defaults.data,{displayTitle:e.displayTitle})},show:function(){this._trigger("show"),this.$modal.show()},hide:function(){this._trigger("hide"),this.$modal.remove()},on:function(e,t){n(this._listeners[e])||(this._listeners[e]=[]),this._listeners[e].push(t)},config:function(e,t){if(!n(e))return this.options;if(!n(t))return this.options[e];n(e)&&n(t)&&(this.options[e]=t)},refresh:function(){this._trigger("refresh"),n(this.$modal)&&this.$modal.remove();var t=r(this._data);this.$modal=e(t),e(this.options.appendTo).append(this.$modal),this._trigger("refreshed")}};var o={};return o.Modal=s,o.create=function(e){return n(window.packadicModals)||(window.packadicModals={}),n(e)||(e={}),n(e.id)||(e.id=i()),window.packadicModals[e.id]=new o.Modal(e),window.packadicModals[e.id]},o.alert=function(e,n){var r={content:"<p>"};t.isString(e)?r.content="<p>"+e+"</p>":t.isObject(e)&&(r=t.merge(r,e));var i=o.create(r);i.on("close",function(){n.apply(this)})},o.prompt=function(e,t){},o.confirm=function(e,t){},o.form=function(e){},o});