define(["jquery","../fn/defined","../fn/cre"],function(e,t,n){function o(e){r.find("li.header").after(e)}function u(e){r.append(e)}function a(e){return e.$a=e.find("> a").first(),e.$task=e.$a.find("> .task"),e.$title=e.$task.find("> span").not(".percent").first(),e.$percent=e.$task.find("> span.percent").first(),e.$progress=e.$a.find("> .progress").first(),e.$bar=e.$progress.find("> .progress-bar").first(),e}function f(){return i.hasClass("open")}function l(){f()||(i.addClass("open"),s.attr("aria-expanded","true"))}function c(){f()&&(i.removeClass("open"),s.attr("aria-expanded","false"))}function h(e,r,i,s,a,f){t(s)||(s="#"),t(a)||(a="info"),t(f)||(f="prepend");var l=n("li").attr("id","task_"+e);return l.$a=n("a").attr("href",s),l.$task=n().addClass("task"),l.$title=n("span").text(r),l.$percent=n("span").addClass("percent").text(i+"%"),l.$progress=n().addClass("progress"),l.$bar=n().attr("role","progressbar").attr("aria-valuenow",i).attr("aria-valuemin",0).attr("aria-valuemax",100).css("width",i+"%").addClass("progress-bar progress-bar-"+a),f==="prepend"?o(l):u(l),l.append(l.$a.append(l.$task.append(l.$title,l.$percent),l.$progress.append(l.$bar)))}function p(e){return a(r.find("#task_"+e))}function d(e){return typeof e=="string"?e=p(e):t(e.$a)||(e=a(e)),e}function v(e,t){return e=d(e),e.$percent.text(t+"%"),e.$bar.attr("aria-valuenow",t).css("width",t+"%"),e}function m(e,t){return e=d(e),e.$title.text(t),e}function g(e,t){return e=d(e),e.$bar.removeAttr("class").addClass("progress-bar progress-bar-"+t),e}var r=e("ul.dropdown-task-list"),i=r.parent("li"),s=r.parent().find(" > a.dropdown-toggle").first();return{add:h,show:l,hide:c,isOpen:f,setProgress:v,setType:g,setTitle:m,get:p}});