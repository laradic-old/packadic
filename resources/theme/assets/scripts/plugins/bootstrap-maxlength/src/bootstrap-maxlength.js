(function(e){e.event.special.destroyed||(e.event.special.destroyed={remove:function(e){e.handler&&e.handler()}}),e.fn.extend({maxlength:function(t,n){function s(e){var n=e.val();t.twoCharLinebreak?n=n.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"):n=n.replace(new RegExp("\r?\n","g"),"\n");var r=0;return t.utf8?r=u(n):r=n.length,r}function o(e,n){var r=e.val(),i=0;t.twoCharLinebreak&&(r=r.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"),r.substr(r.length-1)==="\n"&&r.length%2===1&&(i=1)),e.val(r.substr(0,n-i))}function u(e){var t=0;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r>127&&r<2048?t+=2:t+=3}return t}function a(e,n,r){var i=!0;return!t.alwaysShow&&r-s(e)>n&&(i=!1),i}function f(e,t){var n=t-s(e);return n}function l(e){e.css({display:"block"})}function c(e){e.css({display:"none"})}function h(e,n){var r="";return t.message?r=t.message.replace("%charsTyped%",n).replace("%charsRemaining%",e-n).replace("%charsTotal%",e):(t.preText&&(r+=t.preText),t.showCharsTyped?r+=n:r+=e-n,t.showMaxLength&&(r+=t.separator+e),t.postText&&(r+=t.postText)),r}function p(e,n,r,i){i.html(h(r,r-e)),e>0?a(n,t.threshold,r)?l(i.removeClass(t.limitReachedClass).addClass(t.warningClass)):c(i):l(i.removeClass(t.warningClass).addClass(t.limitReachedClass)),t.allowOverMax&&(e<0?n.addClass("overmax"):n.removeClass("overmax"))}function d(t){var n=t[0];return e.extend({},typeof n.getBoundingClientRect=="function"?n.getBoundingClientRect():{width:n.offsetWidth,height:n.offsetHeight},t.offset())}function v(e,n){var r=d(e),i=e.outerWidth(),s=n.outerWidth(),o=n.width(),u=n.height();t.appendToParent&&(r.top-=e.parent().offset().top,r.left-=e.parent().offset().left);switch(t.placement){case"bottom":n.css({top:r.top+r.height,left:r.left+r.width/2-o/2});break;case"top":n.css({top:r.top-u,left:r.left+r.width/2-o/2});break;case"left":n.css({top:r.top+r.height/2-u/2,left:r.left-o});break;case"right":n.css({top:r.top+r.height/2-u/2,left:r.left+r.width});break;case"bottom-right":n.css({top:r.top+r.height,left:r.left+r.width});break;case"top-right":n.css({top:r.top-u,left:r.left+i});break;case"top-left":n.css({top:r.top-u,left:r.left-s});break;case"bottom-left":n.css({top:r.top+e.outerHeight(),left:r.left-s});break;case"centered-right":n.css({top:r.top+u/2,left:r.left+i-s-3});break;case"bottom-right-inside":n.css({top:r.top+r.height,left:r.left+r.width-s});break;case"top-right-inside":n.css({top:r.top-u,left:r.left+i-s});break;case"top-left-inside":n.css({top:r.top-u,left:r.left});break;case"bottom-left-inside":n.css({top:r.top+e.outerHeight(),left:r.left})}}function m(e){var n="maxlength";return t.allowOverMax&&(n="data-bs-mxl"),e.attr(n)||e.attr("size")}var r=e("body"),i={showOnReady:!1,alwaysShow:!1,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important label-danger",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1,twoCharLinebreak:!0,allowOverMax:!1};return e.isFunction(t)&&!n&&(n=t,t={}),t=e.extend(i,t),this.each(function(){function u(){var o=h(i,"0");i=m(n),s||(s=e('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(o)),n.is("textarea")&&(n.data("maxlenghtsizex",n.outerWidth()),n.data("maxlenghtsizey",n.outerHeight()),n.mouseup(function(){(n.outerWidth()!==n.data("maxlenghtsizex")||n.outerHeight()!==n.data("maxlenghtsizey"))&&v(n,s),n.data("maxlenghtsizex",n.outerWidth()),n.data("maxlenghtsizey",n.outerHeight())})),t.appendToParent?(n.parent().append(s),n.parent().css("position","relative")):r.append(s);var u=f(n,m(n));p(u,n,i,s),v(n,s)}var n=e(this),i,s;e(window).resize(function(){s&&v(n,s)}),t.allowOverMax&&(e(this).attr("data-bs-mxl",e(this).attr("maxlength")),e(this).removeAttr("maxlength")),t.showOnReady?n.ready(function(){u()}):n.focus(function(){u()}),n.on("destroyed",function(){s&&s.remove()}),n.on("blur",function(){s&&!t.showOnReady&&s.remove()}),n.on("input",function(){var e=m(n),r=f(n,e),u=!0;return t.validate&&r<0?(o(n,e),u=!1):p(r,n,i,s),(t.placement==="bottom-right-inside"||t.placement==="top-right-inside")&&v(n,s),u})})}})})(jQuery);