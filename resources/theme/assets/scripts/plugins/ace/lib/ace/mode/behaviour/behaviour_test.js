typeof process!="undefined"&&(require("amd-loader"),require("../../test/mockdom")),define(["require","exports","module","../../multi_select","../../test/assertions","../../range","../../editor","../../edit_session","../../test/mockrenderer","../javascript","../xml"],function(e,t,n){e("../../multi_select");var r=e("../../test/assertions"),i=e("../../range").Range,s=e("../../editor").Editor,o=e("../../edit_session").EditSession,u=e("../../test/mockrenderer").MockRenderer,a=e("../javascript").Mode,f=e("../xml").Mode,l,c=function(e,t,n){do l.commands.exec(e,l,n);while(t-->1)},h=function(e){r.equal(l.selection.getAllRanges()+"",e+"")};n.exports={"test: cstyle":function(){function e(e){r.equal(l.getValue(),Array(4).join(e+"\n"))}function t(e,t,n){l.selection.rangeList.ranges.forEach(function(i){r.range(i,e,t,e,t),e+=n||1})}var n=new o(["","","",""],new a);l=new s(new u,n),l.setOption("behavioursEnabled",!0),l.navigateFileStart(),c("addCursorBelow",2),c("insertstring",1,"if "),c("insertstring",1,"("),e("if ()"),t(0,4),c("insertstring",1,")"),e("if ()"),t(0,5),c("gotoleft",1),c("insertstring",1,"["),e("if ([])"),t(0,5),c("insertstring",1,"]"),e("if ([])"),t(0,6),c("gotoleft",1),c("backspace",1),e("if ()"),t(0,4),c("gotolineend",1),c("insertstring",1,"{"),e("if (){}"),t(0,6),c("insertstring",1,"}"),e("if (){}"),t(0,7),c("gotolinestart",1),c("insertstring",1,"("),e("(if (){}"),c("backspace",1),l.setValue(""),c("insertstring",1,"{"),r.equal(l.getValue(),"{"),c("insertstring",1,"\n"),r.equal(l.getValue(),"{\n    \n}"),l.setValue(""),c("insertstring",1,"("),c("insertstring",1,'"'),c("insertstring",1,'"'),r.equal(l.getValue(),'("")'),c("backspace",1),c("insertstring",1,'"'),r.equal(l.getValue(),'("")'),l.setValue("('foo')",1),c("gotoleft",1),c("selectleft",1),c("selectMoreBefore",1),c("insertstring",1,"'"),r.equal(l.getValue(),"('foo')"),c("selectleft",1),c("insertstring",1,'"'),r.equal(l.getValue(),'("foo")'),c("selectleft",1),c("insertstring",1,'"'),r.equal(l.getValue(),'("foo")')},"test: xml":function(){l=new s(new u),l.setValue(["<OuterTag>","    <SelfClosingTag />"].join("\n")),l.session.setMode(new f),c("gotolinedown",1),c("gotolineend",1),c("insertstring",1,"\n"),r.equal(l.session.getLine(2),"    "),c("gotolineup",1),c("gotolineend",1),c("insertstring",1,"\n"),r.equal(l.session.getLine(2),"    ")}}}),typeof module!="undefined"&&module===require.main&&require("asyncjs").test.testcase(module.exports).exec();