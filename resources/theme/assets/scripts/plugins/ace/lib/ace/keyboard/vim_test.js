typeof process!="undefined"&&require("amd-loader"),define(["require","exports","module","./../edit_session","./../editor","./../undomanager","./../test/mockrenderer","./../mode/javascript","./../virtual_renderer","./../test/assertions","./../lib/keys","./vim"],function(e,t,n){function d(e,t){t.value!=null&&m.session.setValue(t.value),m.setOption("wrap",t.lineWrapping),m.setOption("useSoftTabs",!t.indentWithTabs),m.setKeyboardHandler(null),m.setKeyboardHandler(c.handler);var n=m.state.cm;return n.setOption("tabSize",t.tabSize||4),n.setOption("indentUnit",t.indentUnit||2),n.setSize=function(e,t){var n=!1;e&&m.w!=e&&(n=!0,h.style.width=(m.w=e)+"px"),t&&m.h!=t&&(n=!0,h.style.height=(m.h=t)+"px"),n&&m.resize(!0)},n.setSize(500,300),n}function y(e,n){g++<0||/-    /.test(e)?t["test "+e]=function(){}:t["test "+e]=n}function Q(e){return{ch:e.ch,line:e.line}}function G(e,t){for(var n=0;n<e.length;n++)t(e[n],n,e)}function Y(e,t,n,r){var i={lineNumbers:!0,vimMode:!0,showCursorWhenSelecting:!0,value:k};for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return y("vim_"+e,function(){function s(e){return function(t){t instanceof Array&&(arguments=t);for(var n=0;n<arguments.length;n++)d.Vim.handleKey(e,arguments[n])}}function o(e){return function(t){function n(t){return typeof t=="string"?d.commands[t](e):t(e),!0}t instanceof Array&&(arguments=t);for(var r=0;r<arguments.length;r++){var i=arguments[r],s=d.lookupKey(i,"vim-insert",n);if(s=="handled"&&e.state.vim.insertMode&&arguments[r]!="Esc"){var o=d.Vim.getVimGlobalState_().macroModeState.lastInsertModeChanges;o&&o.changes.push(new d.Vim.InsertModeKey(i))}}}}function u(e){return function(t){e.openDialog=c.fakeOpenDialog(t),c.doKeys(":")}}function a(e){return function(t,n){var r;n==null&&typeof t.line=="number"?r=t:r=nt(t,n),T(r,e.getCursor())}}function f(e){return function(t,n){return n(e)}}function l(e){return function(t){e(t)}}var e=document.getElementById("testground"),n=d(e,i),r=d.Vim.maybeInitVimState_(n),c={doKeys:s(n),doInsertModeKeys:o(n),doEx:u(n),assertCursorAt:a(n),fakeOpenDialog:f,fakeOpenNotification:l,getRegisterController:function(){return d.Vim.getRegisterController()}};d.Vim.resetVimGlobalState_();var h=!1,p=n.openNotification;try{t(n,r,c),h=!0}finally{n.openNotification=p}},r)}function et(e,t,n,r,i){n=nt(n[0],n[1]),r=nt(r[0],r[1]),Y(e,function(e,s,o){d.Vim.resetVimGlobalState_(),i&&(e.openDialog=o.fakeOpenDialog("word")),e.setCursor(r),o.doKeys.apply(null,t),o.assertCursorAt(n)},{value:Z})}function tt(e,t,n,r){Y(e,function(e,i,s){r||(r={line:0,ch:0}),e.setCursor(r),s.doKeys(t),s.assertCursorAt(n)})}function nt(e,t){return{line:e,ch:t}}function rt(e,t,n){return{line:e.line+t,ch:e.ch+n}}function it(e,t){var n=[];for(var r=0;r<t;r++)n.push(e);return n}function st(e,t,n,r,i){return Y(e,function(e,s,o){var u=t.search(n),a=t.substring(0,u).split("\n").length-1;a&&(u=t.substring(0,u).split("\n").pop().length),e.setCursor(a,u),o.doKeys.apply(this,r.split("")),N(i,e.getValue())},{value:t})}function ot(e,t,n,r,i){return Y(e,function(e,s,o){var u=t.search(n),a=t.substring(0,u).split("\n").length-1;a&&(u=t.substring(0,u).split("\n").pop().length),e.setCursor(a,u),o.doKeys.apply(this,r.split("")),N(i,e.getSelection())},{value:t})}function ct(e,t){Y(e+"_pcre",function(e,n,r){e.setCursor(1,0),d.Vim.setOption("pcre",!0),r.doEx(t.expr),N(t.expectedValue,e.getValue())},t);var n=t.noPcreExpr?t.noPcreExpr:t.expr;Y(e+"_nopcre",function(e,r,i){e.setCursor(1,0),d.Vim.setOption("pcre",!1),i.doEx(n),N(t.expectedValue,e.getValue())},t)}function ht(e,t,n,r,i,s){Y(e,function(e,n,o){function h(){c=!0}var u=e.openDialog,a=d.keyName,f,l,c=!0;e.openDialog=function(e,t,n){l=t},o.doKeys(":"),e.openDialog=function(e,t,n){f=n.onKeyDown,c=!1},l(t),d.keyName=function(e){return e.key},i=i.toUpperCase();for(var p=0;p<i.length;p++)C(!c),f({key:i.charAt(p)},"",h);try{N(r,e.getValue()),o.assertCursorAt(s),C(c)}catch(v){throw v}finally{d.keyName=a,e.openDialog=u}},{value:n})}var r=e("./../edit_session").EditSession,i=e("./../editor").Editor,s=e("./../undomanager").UndoManager,o=e("./../test/mockrenderer").MockRenderer,u=e("./../mode/javascript").Mode,a=e("./../virtual_renderer").VirtualRenderer,f=e("./../test/assertions"),l=e("./../lib/keys"),c=e("./vim"),h=document.createElement("div");h.style.position="fixed",h.style.left="20px",h.style.top="30px",h.style.width="500px",h.style.height="300px",document.body.appendChild(h);if(!h.getBoundingClientRect)return console.log("Skipping test: This test only runs in the browser");var p=new a(h);m=new i(p),m.session.setUndoManager(new s),m.session.setUseWorker(!1),m.session.setMode(new u);for(var v in c.CodeMirror)d[v]=c.CodeMirror[v];var m,g=0;c.CodeMirror.Vim.unmap("Y"),c.CodeMirror.Vim.defineEx("write","w",function(e){d.commands.save(e)});var b,w,E,S=d.Pos,x=document.createElement("div"),T=f.deepEqual,N=f.equal,C=f.ok,k=" wOrd1 (#%\n word3] \naopop pop 0 1 2 3 4\n (a) [b] {c} \nint getchar(void) {\n  static char buf[BUFSIZ];\n  static char *bufp = buf;\n  if (n == 0) {  /* buffer is empty */\n    n = read(0, buf, sizeof buf);\n    bufp = buf;\n  }\n\n  return (--n >= 0) ? (unsigned char) *bufp++ : EOF;\n \n}\n",L=function(){b=k.split("\n");var e=[];for(var t=0;t<b.length;t++)e[t]={line:t,length:b[t].length,lineText:b[t],textStart:/^\s*/.exec(b[t])[0].length};return e}(),A=nt(L.length-1,L[L.length-1].length),O=L[0],M=L[1],_=L[2],D=L[3],P=L[4],H={start:{line:O.line,ch:1},end:{line:O.line,ch:5}},B={start:{line:O.line,ch:H.end.ch+2},end:{line:O.line,ch:H.end.ch+4}},j={start:{line:M.line,ch:1},end:{line:M.line,ch:5}},F=H,I=B,q={start:{line:M.line,ch:1},end:{line:M.line,ch:7}},R={start:{line:M.line,ch:F.end.ch+3},end:{line:M.line,ch:F.end.ch+7}},U=[{line:_.line,ch:1},{line:_.line,ch:3},{line:_.line,ch:7}],z=[{line:_.line,ch:2},{line:_.line,ch:4},{line:_.line,ch:6},{line:_.line,ch:8}],W=[{line:_.line,ch:10},{line:_.line,ch:12},{line:_.line,ch:14},{line:_.line,ch:16},{line:_.line,ch:18}],X={start:{line:D.line,ch:1},end:{line:D.line,ch:3}},V={start:{line:D.line,ch:5},end:{line:D.line,ch:7}},$={start:{line:D.line,ch:9},end:{line:D.line,ch:11}},J={start:{line:P.line,ch:1},end:{line:P.line,ch:16}},K={start:{line:P.line,ch:14},end:{line:P.line,ch:11}};Y("qq@q",function(e,t,n){e.setCursor(0,0),n.doKeys("q","q","l","l","q"),n.assertCursorAt(0,2),n.doKeys("@","q"),n.assertCursorAt(0,4)},{value:"            "}),Y("@@",function(e,t,n){e.setCursor(0,0),n.doKeys("q","q","l","l","q"),n.assertCursorAt(0,2),n.doKeys("@","q"),n.assertCursorAt(0,4),n.doKeys("@","@"),n.assertCursorAt(0,6)},{value:"            "});var Z="word\n(word)\n{word\nword.\n\nword search\n}word\nword\nword\n";et("jumplist_H",["H","<C-o>"],[5,2],[5,2]),et("jumplist_M",["M","<C-o>"],[2,2],[2,2]),et("jumplist_L",["L","<C-o>"],[2,2],[2,2]),et("jumplist_[[",["[","[","<C-o>"],[5,2],[5,2]),et("jumplist_]]",["]","]","<C-o>"],[2,2],[2,2]),et("jumplist_G",["G","<C-o>"],[5,2],[5,2]),et("jumplist_gg",["g","g","<C-o>"],[5,2],[5,2]),et("jumplist_%",["%","<C-o>"],[1,5],[1,5]),et("jumplist_{",["{","<C-o>"],[1,5],[1,5]),et("jumplist_}",["}","<C-o>"],[1,5],[1,5]),et("jumplist_'",["m","a","h","'","a","h","<C-i>"],[1,0],[1,5]),et("jumplist_`",["m","a","h","`","a","h","<C-i>"],[1,5],[1,5]),et("jumplist_*_cachedCursor",["*","<C-o>"],[1,3],[1,3]),et("jumplist_#_cachedCursor",["#","<C-o>"],[1,3],[1,3]),et("jumplist_n",["#","n","<C-o>"],[1,1],[2,3]),et("jumplist_N",["#","N","<C-o>"],[1,1],[2,3]),et("jumplist_repeat_<c-o>",["*","*","*","3","<C-o>"],[2,3],[2,3]),et("jumplist_repeat_<c-i>",["*","*","*","3","<C-o>","2","<C-i>"],[5,0],[2,3]),et("jumplist_repeated_motion",["3","*","<C-o>"],[2,3],[2,3]),et("jumplist_/",["/","<C-o>"],[2,3],[2,3],"dialog"),et("jumplist_?",["?","<C-o>"],[2,3],[2,3],"dialog"),et("jumplist_skip_delted_mark<c-o>",["*","n","n","k","d","k","<C-o>","<C-o>","<C-o>"],[0,2],[0,2]),et("jumplist_skip_delted_mark<c-i>",["*","n","n","k","d","k","<C-o>","<C-i>","<C-i>"],[1,0],[0,2]),tt("|","|",nt(0,0),nt(0,4)),tt("|_repeat",["3","|"],nt(0,2),nt(0,4)),tt("h","h",nt(0,0),H.start),tt("h_repeat",["3","h"],rt(H.end,0,-3),H.end),tt("l","l",nt(0,1)),tt("l_repeat",["2","l"],nt(0,2)),tt("j","j",rt(H.end,1,0),H.end),tt("j_repeat",["2","j"],rt(H.end,2,0),H.end),tt("j_repeat_clip",["1000","j"],A),tt("k","k",rt(j.end,-1,0),j.end),tt("k_repeat",["2","k"],nt(0,4),nt(2,4)),tt("k_repeat_clip",["1000","k"],nt(0,4),nt(2,4)),tt("w","w",H.start),tt("w_multiple_newlines_no_space","w",nt(12,2),nt(11,2)),tt("w_multiple_newlines_with_space","w",nt(14,0),nt(12,51)),tt("w_repeat",["2","w"],B.start),tt("w_wrap",["w"],j.start,B.start),tt("w_endOfDocument","w",A,A),tt("w_start_to_end",["1000","w"],A,nt(0,0)),tt("W","W",F.start),tt("W_repeat",["2","W"],q.start,F.start),tt("e","e",H.end),tt("e_repeat",["2","e"],B.end),tt("e_wrap","e",j.end,B.end),tt("e_endOfDocument","e",A,A),tt("e_start_to_end",["1000","e"],A,nt(0,0)),tt("b","b",j.start,j.end),tt("b_repeat",["2","b"],B.start,j.end),tt("b_wrap","b",B.start,j.start),tt("b_startOfDocument","b",nt(0,0),nt(0,0)),tt("b_end_to_start",["1000","b"],nt(0,0),A),tt("ge",["g","e"],B.end,j.end),tt("ge_repeat",["2","g","e"],H.end,j.start),tt("ge_wrap",["g","e"],B.end,j.start),tt("ge_startOfDocument",["g","e"],nt(0,0),nt(0,0)),tt("ge_end_to_start",["1000","g","e"],nt(0,0),A),tt("gg",["g","g"],nt(L[0].line,L[0].textStart),nt(3,1)),tt("gg_repeat",["3","g","g"],nt(L[2].line,L[2].textStart)),tt("G","G",nt(L[L.length-1].line,L[L.length-1].textStart),nt(3,1)),tt("G_repeat",["3","G"],nt(L[2].line,L[2].textStart)),tt("0","0",nt(0,0),nt(0,8)),tt("^","^",nt(0,L[0].textStart),nt(0,8)),tt("+","+",nt(1,L[1].textStart),nt(0,8)),tt("-","-",nt(0,L[0].textStart),nt(1,4)),tt("_",["6","_"],nt(5,L[5].textStart),nt(0,8)),tt("$","$",nt(0,L[0].length-1),nt(0,1)),tt("$_repeat",["2","$"],nt(1,L[1].length-1),nt(0,3)),tt("f",["f","p"],z[0],nt(_.line,0)),tt("f_repeat",["2","f","p"],z[2],z[0]),tt("f_num",["f","2"],W[2],nt(_.line,0)),tt("t",["t","p"],rt(z[0],0,-1),nt(_.line,0)),tt("t_repeat",["2","t","p"],rt(z[2],0,-1),z[0]),tt("F",["F","p"],z[0],z[1]),tt("F_repeat",["2","F","p"],z[0],z[2]),tt("T",["T","p"],rt(z[0],0,1),z[1]),tt("T_repeat",["2","T","p"],rt(z[0],0,1),z[2]),tt("%_parens",["%"],X.end,X.start),tt("%_squares",["%"],V.end,V.start),tt("%_braces",["%"],$.end,$.start),tt("%_seek_outside",["%"],J.end,J.start),tt("%_seek_inside",["%"],K.end,K.start),Y("%_seek_skip",function(e,t,n){e.setCursor(0,0),n.doKeys(["%"]),n.assertCursorAt(0,9)},{value:'01234"("()'}),Y("%_skip_string",function(e,t,n){e.setCursor(0,0),n.doKeys(["%"]),n.assertCursorAt(0,4),e.setCursor(0,2),n.doKeys(["%"]),n.assertCursorAt(0,0)},{value:'(")")'}),")",Y("%_skip_comment",function(e,t,n){e.setCursor(0,0),n.doKeys(["%"]),n.assertCursorAt(0,6),e.setCursor(0,3),n.doKeys(["%"]),n.assertCursorAt(0,0)},{value:"(/*)*/)"}),Y("Changing lines after Eol operation",function(e,t,n){e.setCursor(0,0),n.doKeys(["$"]),n.doKeys(["j"]),n.assertCursorAt({line:1,ch:L[1].length-1}),n.doKeys(["j"]),n.assertCursorAt({line:2,ch:L[2].length-1}),n.doKeys(["h"]),n.doKeys(["j"]),n.assertCursorAt({line:3,ch:L[3].length-1}),n.doKeys(["j"]),n.doKeys(["j"]),n.assertCursorAt({line:5,ch:L[2].length-2})}),Y("gj_gk_clipping",function(e,t,n){e.setCursor(0,1),n.doKeys("g","j","g","j"),n.assertCursorAt(2,1),n.doKeys("g","k","g","k"),n.assertCursorAt(0,1)},{value:"line 1\n\nline 2"}),Y("j_k_and_gj_gk",function(e,t,n){e.setSize(120),e.setCursor(0,0),n.doKeys("$"),n.doKeys("g","k");var r=e.getCursor();N(r.line,0),C(r.ch<176,"gk didn't move cursor back (1)"),n.doKeys("g","j"),n.assertCursorAt(0,176),n.doKeys("j"),n.doKeys("3","g","k"),r=e.getCursor(),N(r.line,1),C(r.ch<176,"gk didn't move cursor back (2)"),n.doKeys("g","j","2","g","j"),n.doKeys("k"),n.assertCursorAt(0,176)},{lineWrapping:!0,value:"This line is intentially long to test movement of gj and gk over wrapped lines. I will start on the end of this line, then make a step up and back to set the origin for j and k.\nThis line is supposed to be even longer than the previous. I will jump here and make another wiggle with gj and gk, before I jump back to the line above. Both wiggles should not change my cursor's target character but both j/k and gj/gk change each other's reference position."}),Y("gj_gk",function(e,t,n){if(E)return;e.setSize(120),e.setCursor(0,4),n.doKeys("g","j"),n.doKeys("10","g","k"),n.assertCursorAt(0,4),n.doKeys("g","j");var r=e.getCursor(),i={line:0,ch:(r.ch-4)*2+4};n.doKeys("g","j"),n.assertCursorAt(i),e.setCursor(0,0),n.doKeys("h"),n.doKeys("100","g","j");var s=e.getCursor();C(s!=0,"gj should not be on wrapped line 0");var o=e.charCoords(nt(0,0)),u=e.charCoords(s);C(o.left==u.left,"gj should end up on column 0")},{lineNumbers:!1,lineWrapping:!0,value:"Thislineisintentiallylongtotestmovementofgjandgkoverwrappedlines."}),Y("}",function(e,t,n){e.setCursor(0,0),n.doKeys("}"),n.assertCursorAt(1,0),e.setCursor(0,0),n.doKeys("2","}"),n.assertCursorAt(4,0),e.setCursor(0,0),n.doKeys("6","}"),n.assertCursorAt(5,0)},{value:"a\n\nb\nc\n\nd"}),Y("{",function(e,t,n){e.setCursor(5,0),n.doKeys("{"),n.assertCursorAt(4,0),e.setCursor(5,0),n.doKeys("2","{"),n.assertCursorAt(1,0),e.setCursor(5,0),n.doKeys("6","{"),n.assertCursorAt(0,0)},{value:"a\n\nb\nc\n\nd"}),Y("paragraph motions",function(e,t,n){e.setCursor(10,0),n.doKeys("{"),n.assertCursorAt(4,0),n.doKeys("{"),n.assertCursorAt(0,0),n.doKeys("2","}"),n.assertCursorAt(7,0),n.doKeys("2","}"),n.assertCursorAt(16,0),e.setCursor(9,0),n.doKeys("}"),n.assertCursorAt(14,0),e.setCursor(6,0),n.doKeys("}"),n.assertCursorAt(7,0),e.setCursor(10,0),n.doKeys("v","i","p"),T(S(7,0),e.getCursor("anchor")),T(S(12,0),e.getCursor("head")),n.doKeys("i","p"),T(S(7,0),e.getCursor("anchor")),T(S(13,1),e.getCursor("head")),n.doKeys("2","i","p"),T(S(7,0),e.getCursor("anchor")),T(S(16,1),e.getCursor("head")),e.setCursor(14,0),n.doKeys("<Esc>","v","i","p"),n.assertCursorAt(14,0),e.setCursor(14,0),n.doKeys("<Esc>","V","i","p"),T(S(16,1),e.getCursor("head")),e.setCursor(10,0),n.doKeys("<Esc>","v","a","p"),T(S(7,0),e.getCursor("anchor")),T(S(13,1),e.getCursor("head")),n.doKeys("a","p"),T(S(7,0),e.getCursor("anchor")),T(S(16,1),e.getCursor("head")),e.setCursor(13,0),n.doKeys("v","a","p"),T(S(13,0),e.getCursor("anchor")),T(S(14,0),e.getCursor("head")),e.setCursor(16,0),n.doKeys("v","a","p"),T(S(14,0),e.getCursor("anchor")),T(S(16,1),e.getCursor("head")),e.setCursor(0,0),n.doKeys("v","a","p"),T(S(0,0),e.getCursor("anchor")),T(S(4,0),e.getCursor("head")),e.setCursor(0,0),n.doKeys("d","i","p");var r=n.getRegisterController().getRegister();N("a\na\n",r.toString()),C(r.linewise),n.doKeys("3","j","p"),n.doKeys("y","i","p"),C(r.linewise),N("b\na\na\nc\n",r.toString())},{value:"a\na\n\n\n\nb\nc\n\n\n\n\n\n\nd\n\ne\nf"}),Y("dl",function(e,t,n){var r=nt(0,0);e.setCursor(r),n.doKeys("d","l"),N("word1 ",e.getValue());var i=n.getRegisterController().getRegister();N(" ",i.toString()),C(!i.linewise),T(r,e.getCursor())},{value:" word1 "}),Y("dl_eol",function(e,t,n){e.setCursor(0,6),n.doKeys("d","l"),N(" word1",e.getValue());var r=n.getRegisterController().getRegister();N(" ",r.toString()),C(!r.linewise),n.assertCursorAt(0,5)},{value:" word1 "}),Y("dl_repeat",function(e,t,n){var r=nt(0,0);e.setCursor(r),n.doKeys("2","d","l"),N("ord1 ",e.getValue());var i=n.getRegisterController().getRegister();N(" w",i.toString()),C(!i.linewise),T(r,e.getCursor())},{value:" word1 "}),Y("dh",function(e,t,n){var r=nt(0,3);e.setCursor(r),n.doKeys("d","h"),N(" wrd1 ",e.getValue());var i=n.getRegisterController().getRegister();N("o",i.toString()),C(!i.linewise),T(rt(r,0,-1),e.getCursor())},{value:" word1 "}),Y("dj",function(e,t,n){var r=nt(0,3);e.setCursor(r),n.doKeys("d","j"),N(" word3",e.getValue());var i=n.getRegisterController().getRegister();N(" word1\nword2\n",i.toString()),C(i.linewise),n.assertCursorAt(0,1)},{value:" word1\nword2\n word3"}),Y("dj_end_of_document",function(e,t,n){var r=nt(0,3);e.setCursor(r),n.doKeys("d","j"),N(" word1 ",e.getValue());var i=n.getRegisterController().getRegister();N("",i.toString()),C(!i.linewise),n.assertCursorAt(0,3)},{value:" word1 "}),Y("dk",function(e,t,n){var r=nt(1,3);e.setCursor(r),n.doKeys("d","k"),N(" word3",e.getValue());var i=n.getRegisterController().getRegister();N(" word1\nword2\n",i.toString()),C(i.linewise),n.assertCursorAt(0,1)},{value:" word1\nword2\n word3"}),Y("dk_start_of_document",function(e,t,n){var r=nt(0,3);e.setCursor(r),n.doKeys("d","k"),N(" word1 ",e.getValue());var i=n.getRegisterController().getRegister();N("",i.toString()),C(!i.linewise),n.assertCursorAt(0,3)},{value:" word1 "}),Y("dw_space",function(e,t,n){var r=nt(0,0);e.setCursor(r),n.doKeys("d","w"),N("word1 ",e.getValue());var i=n.getRegisterController().getRegister();N(" ",i.toString()),C(!i.linewise),T(r,e.getCursor())},{value:" word1 "}),Y("dw_word",function(e,t,n){var r=nt(0,1);e.setCursor(r),n.doKeys("d","w"),N(" word2",e.getValue());var i=n.getRegisterController().getRegister();N("word1 ",i.toString()),C(!i.linewise),T(r,e.getCursor())},{value:" word1 word2"}),Y("dw_unicode_word",function(e,t,n){n.doKeys("d","w"),N(e.getValue().length,10),n.doKeys("d","w"),N(e.getValue().length,6),n.doKeys("d","w"),N(e.getValue().length,5),n.doKeys("d","e"),N(e.getValue().length,2)},{value:"  բարև»eµg  "}),Y("dw_only_word",function(e,t,n){e.setCursor(0,1),n.doKeys("d","w"),N(" ",e.getValue());var r=n.getRegisterController().getRegister();N("word1 ",r.toString()),C(!r.linewise),n.assertCursorAt(0,0)},{value:" word1 "}),Y("dw_eol",function(e,t,n){e.setCursor(0,1),n.doKeys("d","w"),N(" \nword2",e.getValue());var r=n.getRegisterController().getRegister();N("word1",r.toString()),C(!r.linewise),n.assertCursorAt(0,0)},{value:" word1\nword2"}),Y("dw_eol_with_multiple_newlines",function(e,t,n){e.setCursor(0,1),n.doKeys("d","w"),N(" \n\nword2",e.getValue());var r=n.getRegisterController().getRegister();N("word1",r.toString()),C(!r.linewise),n.assertCursorAt(0,0)},{value:" word1\n\nword2"}),Y("dw_empty_line_followed_by_whitespace",function(e,t,n){e.setCursor(0,0),n.doKeys("d","w"),N("  \nword",e.getValue())},{value:"\n  \nword"}),Y("dw_empty_line_followed_by_word",function(e,t,n){e.setCursor(0,0),n.doKeys("d","w"),N("word",e.getValue())},{value:"\nword"}),Y("dw_empty_line_followed_by_empty_line",function(e,t,n){e.setCursor(0,0),n.doKeys("d","w"),N("\n",e.getValue())},{value:"\n\n"}),Y("dw_whitespace_followed_by_whitespace",function(e,t,n){e.setCursor(0,0),n.doKeys("d","w"),N("\n   \n",e.getValue())},{value:"  \n   \n"}),Y("dw_whitespace_followed_by_empty_line",function(e,t,n){e.setCursor(0,0),n.doKeys("d","w"),N("\n\n",e.getValue())},{value:"  \n\n"}),Y("dw_word_whitespace_word",function(e,t,n){e.setCursor(0,0),n.doKeys("d","w"),N("\n   \nword2",e.getValue())},{value:"word1\n   \nword2"}),Y("dw_end_of_document",function(e,t,n){e.setCursor(1,2),n.doKeys("d","w"),N("\nab",e.getValue())},{value:"\nabc"}),Y("dw_repeat",function(e,t,n){e.setCursor(0,1),n.doKeys("d","2","w"),N(" ",e.getValue());var r=n.getRegisterController().getRegister();N("word1\nword2",r.toString()),C(!r.linewise),n.assertCursorAt(0,0)},{value:" word1\nword2"}),Y("de_word_start_and_empty_lines",function(e,t,n){e.setCursor(0,0),n.doKeys("d","e"),N("\n\n",e.getValue())},{value:"word\n\n"}),Y("de_word_end_and_empty_lines",function(e,t,n){e.setCursor(0,3),n.doKeys("d","e"),N("wor",e.getValue())},{value:"word\n\n\n"}),Y("de_whitespace_and_empty_lines",function(e,t,n){e.setCursor(0,0),n.doKeys("d","e"),N("",e.getValue())},{value:"   \n\n\n"}),Y("de_end_of_document",function(e,t,n){e.setCursor(1,2),n.doKeys("d","e"),N("\nab",e.getValue())},{value:"\nabc"}),Y("db_empty_lines",function(e,t,n){e.setCursor(2,0),n.doKeys("d","b"),N("\n\n",e.getValue())},{value:"\n\n\n"}),Y("db_word_start_and_empty_lines",function(e,t,n){e.setCursor(2,0),n.doKeys("d","b"),N("\nword",e.getValue())},{value:"\n\nword"}),Y("db_word_end_and_empty_lines",function(e,t,n){e.setCursor(2,3),n.doKeys("d","b"),N("\n\nd",e.getValue())},{value:"\n\nword"}),Y("db_whitespace_and_empty_lines",function(e,t,n){e.setCursor(2,0),n.doKeys("d","b"),N("",e.getValue())},{value:"\n   \n"}),Y("db_start_of_document",function(e,t,n){e.setCursor(0,0),n.doKeys("d","b"),N("abc\n",e.getValue())},{value:"abc\n"}),Y("dge_empty_lines",function(e,t,n){e.setCursor(1,0),n.doKeys("d","g","e"),N("\n",e.getValue())},{value:"\n\n"}),Y("dge_word_and_empty_lines",function(e,t,n){e.setCursor(1,0),n.doKeys("d","g","e"),N("wor\n",e.getValue())},{value:"word\n\n"}),Y("dge_whitespace_and_empty_lines",function(e,t,n){e.setCursor(2,0),n.doKeys("d","g","e"),N("",e.getValue())},{value:"\n  \n"}),Y("dge_start_of_document",function(e,t,n){e.setCursor(0,0),n.doKeys("d","g","e"),N("bc\n",e.getValue())},{value:"abc\n"}),Y("d_inclusive",function(e,t,n){var r=nt(0,1);e.setCursor(r),n.doKeys("d","e"),N("  ",e.getValue());var i=n.getRegisterController().getRegister();N("word1",i.toString()),C(!i.linewise),T(r,e.getCursor())},{value:" word1 "}),Y("d_reverse",function(e,t,n){e.setCursor(1,0),n.doKeys("d","b"),N(" word2 ",e.getValue());var r=n.getRegisterController().getRegister();N("word1\n",r.toString()),C(!r.linewise),n.assertCursorAt(0,1)},{value:" word1\nword2 "}),Y("dd",function(e,t,n){e.setCursor(0,3);var r=e.getRange({line:0,ch:0},{line:1,ch:0}),i=e.lineCount()-1;n.doKeys("d","d"),N(i,e.lineCount());var s=n.getRegisterController().getRegister();N(r,s.toString()),C(s.linewise),n.assertCursorAt(0,L[1].textStart)}),Y("dd_prefix_repeat",function(e,t,n){e.setCursor(0,3);var r=e.getRange({line:0,ch:0},{line:2,ch:0}),i=e.lineCount()-2;n.doKeys("2","d","d"),N(i,e.lineCount());var s=n.getRegisterController().getRegister();N(r,s.toString()),C(s.linewise),n.assertCursorAt(0,L[2].textStart)}),Y("dd_motion_repeat",function(e,t,n){e.setCursor(0,3);var r=e.getRange({line:0,ch:0},{line:2,ch:0}),i=e.lineCount()-2;n.doKeys("d","2","d"),N(i,e.lineCount());var s=n.getRegisterController().getRegister();N(r,s.toString()),C(s.linewise),n.assertCursorAt(0,L[2].textStart)}),Y("dd_multiply_repeat",function(e,t,n){e.setCursor(0,3);var r=e.getRange({line:0,ch:0},{line:6,ch:0}),i=e.lineCount()-6;n.doKeys("2","d","3","d"),N(i,e.lineCount());var s=n.getRegisterController().getRegister();N(r,s.toString()),C(s.linewise),n.assertCursorAt(0,L[6].textStart)}),Y("dd_lastline",function(e,t,n){e.setCursor(e.lineCount(),0);var r=e.lineCount()-1;n.doKeys("d","d"),N(r,e.lineCount()),n.assertCursorAt(e.lineCount()-1,0)}),Y("dd_only_line",function(e,t,n){e.setCursor(0,0);var r=e.getValue()+"\n";n.doKeys("d","d"),N(1,e.lineCount()),N("",e.getValue());var i=n.getRegisterController().getRegister();N(r,i.toString())},{value:"thisistheonlyline"}),Y("yw_repeat",function(e,t,n){var r=nt(0,1);e.setCursor(r),n.doKeys("y","2","w"),N(" word1\nword2",e.getValue());var i=n.getRegisterController().getRegister();N("word1\nword2",i.toString()),C(!i.linewise),T(r,e.getCursor())},{value:" word1\nword2"}),Y("yy_multiply_repeat",function(e,t,n){var r=nt(0,3);e.setCursor(r);var i=e.getRange({line:0,ch:0},{line:6,ch:0}),s=e.lineCount();n.doKeys("2","y","3","y"),N(s,e.lineCount());var o=n.getRegisterController().getRegister();N(i,o.toString()),C(o.linewise),T(r,e.getCursor())}),Y("cw",function(e,t,n){e.setCursor(0,0),n.doKeys("c","2","w"),N(" word3",e.getValue()),n.assertCursorAt(0,0)},{value:"word1 word2 word3"}),Y("cw_repeat",function(e,t,n){var r=nt(0,1);e.setCursor(r),n.doKeys("c","2","w"),N(" ",e.getValue());var i=n.getRegisterController().getRegister();N("word1\nword2",i.toString()),C(!i.linewise),T(r,e.getCursor()),N("vim-insert",e.getOption("keyMap"))},{value:" word1\nword2"}),Y("cc_multiply_repeat",function(e,t,n){e.setCursor(0,3);var r=e.getRange({line:0,ch:0},{line:6,ch:0}),i=e.lineCount()-5;n.doKeys("2","c","3","c"),N(i,e.lineCount());var s=n.getRegisterController().getRegister();N(r,s.toString()),C(s.linewise),N("vim-insert",e.getOption("keyMap"))}),Y("cc_should_not_append_to_document",function(e,t,n){var r=e.lineCount();e.setCursor(e.lastLine(),0),n.doKeys("c","c"),N(r,e.lineCount())}),Y("c_visual_block",function(e,t,n){e.setCursor(0,1),n.doKeys("<C-v>","2","j","l","l","l","c");var r=it("hello",3);e.replaceSelections(r),N("1hello\n5hello\nahellofg",e.getValue()),n.doKeys("<Esc>"),e.setCursor(2,3),n.doKeys("<C-v>","2","k","h","C"),r=it("world",3),e.replaceSelections(r),N("1hworld\n5hworld\nahworld",e.getValue())},{value:"1234\n5678\nabcdefg"}),Y("c_visual_block_replay",function(e,t,n){e.setCursor(0,1),n.doKeys("<C-v>","2","j","l","c");var r=it("fo",3);e.replaceSelections(r),N("1fo4\n5fo8\nafodefg",e.getValue()),n.doKeys("<Esc>"),e.setCursor(0,0),n.doKeys("."),N("foo4\nfoo8\nfoodefg",e.getValue())},{value:"1234\n5678\nabcdefg"}),Y("d_visual_block",function(e,t,n){e.setCursor(0,1),n.doKeys("<C-v>","2","j","l","l","l","d"),N("1\n5\nafg",e.getValue())},{value:"1234\n5678\nabcdefg"}),Y("D_visual_block",function(e,t,n){e.setCursor(0,1),n.doKeys("<C-v>","2","j","l","D"),N("1\n5\na",e.getValue())},{value:"1234\n5678\nabcdefg"}),Y("g~w_repeat",function(e,t,n){var r=nt(0,1);e.setCursor(r),n.doKeys("g","~","2","w"),N(" WORD1\nWORD2",e.getValue());var i=n.getRegisterController().getRegister();N("",i.toString()),C(!i.linewise),T(r,e.getCursor())},{value:" word1\nword2"}),Y("g~g~",function(e,t,n){var r=nt(0,3);e.setCursor(r);var i=e.lineCount(),s=e.getValue().toUpperCase();n.doKeys("2","g","~","3","g","~"),N(s,e.getValue());var o=n.getRegisterController().getRegister();N("",o.toString()),C(!o.linewise),T(r,e.getCursor())},{value:" word1\nword2\nword3\nword4\nword5\nword6"}),Y("gu_and_gU",function(e,t,n){var r=nt(0,7),i=e.getValue();e.setCursor(r),n.doKeys("2","g","U","w"),N(e.getValue(),"wa wb xX WC wd"),T(r,e.getCursor()),n.doKeys("2","g","u","w"),N(e.getValue(),i),n.doKeys("2","g","U","B"),N(e.getValue(),"wa WB Xx wc wd"),T(nt(0,3),e.getCursor()),e.setCursor(nt(0,4)),n.doKeys("g","u","i","w"),N(e.getValue(),"wa wb Xx wc wd"),T(nt(0,3),e.getCursor());var s=n.getRegisterController().getRegister();N("",s.toString()),C(!s.linewise)},{value:"wa wb xx wc wd"}),Y("visual_block_~",function(e,t,n){e.setCursor(1,1),n.doKeys("<C-v>","l","l","j","~"),n.assertCursorAt(1,1),N("hello\nwoRLd\naBCDe",e.getValue()),e.setCursor(2,0),n.doKeys("v","l","l","~"),n.assertCursorAt(2,0),N("hello\nwoRLd\nAbcDe",e.getValue())},{value:"hello\nwOrld\nabcde"}),Y("._swapCase_visualBlock",function(e,t,n){n.doKeys("<C-v>","j","j","l","~"),e.setCursor(0,3),n.doKeys("."),N("HelLO\nWorLd\nAbcdE",e.getValue())},{value:"hEllo\nwOrlD\naBcDe"}),Y("._delete_visualBlock",function(e,t,n){n.doKeys("<C-v>","j","x"),N("ive\ne\nsome\nsugar",e.getValue()),n.doKeys("."),N("ve\n\nsome\nsugar",e.getValue()),n.doKeys("j","j","."),N("ve\n\nome\nugar",e.getValue()),n.doKeys("u","<C-r>","."),N("ve\n\nme\ngar",e.getValue())},{value:"give\nme\nsome\nsugar"}),Y(">{motion}",function(e,t,n){e.setCursor(1,3);var r=e.lineCount(),i="   word1\n  word2\nword3 ";n.doKeys(">","k"),N(i,e.getValue());var s=n.getRegisterController().getRegister();N("",s.toString()),C(!s.linewise),n.assertCursorAt(0,3)},{value:" word1\nword2\nword3 ",indentUnit:2}),Y(">>",function(e,t,n){e.setCursor(0,3);var r=e.lineCount(),i="   word1\n  word2\nword3 ";n.doKeys("2",">",">"),N(i,e.getValue());var s=n.getRegisterController().getRegister();N("",s.toString()),C(!s.linewise),n.assertCursorAt(0,3)},{value:" word1\nword2\nword3 ",indentUnit:2}),Y("<{motion}",function(e,t,n){e.setCursor(1,3);var r=e.lineCount(),i=" word1\nword2\nword3 ";n.doKeys("<","k"),N(i,e.getValue());var s=n.getRegisterController().getRegister();N("",s.toString()),C(!s.linewise),n.assertCursorAt(0,1)},{value:"   word1\n  word2\nword3 ",indentUnit:2}),Y("<<",function(e,t,n){e.setCursor(0,3);var r=e.lineCount(),i=" word1\nword2\nword3 ";n.doKeys("2","<","<"),N(i,e.getValue());var s=n.getRegisterController().getRegister();N("",s.toString()),C(!s.linewise),n.assertCursorAt(0,1)},{value:"   word1\n  word2\nword3 ",indentUnit:2}),st("diw_mid_spc","foo 	bAr	 baz",/A/,"diw","foo 		 baz"),st("daw_mid_spc","foo 	bAr	 baz",/A/,"daw","foo 	baz"),st("diw_mid_punct","foo 	bAr.	 baz",/A/,"diw","foo 	.	 baz"),st("daw_mid_punct","foo 	bAr.	 baz",/A/,"daw","foo.	 baz"),st("diw_mid_punct2","foo 	,bAr.	 baz",/A/,"diw","foo 	,.	 baz"),st("daw_mid_punct2","foo 	,bAr.	 baz",/A/,"daw","foo 	,.	 baz"),st("diw_start_spc","bAr 	baz",/A/,"diw"," 	baz"),st("daw_start_spc","bAr 	baz",/A/,"daw","baz"),st("diw_start_punct","bAr. 	baz",/A/,"diw",". 	baz"),st("daw_start_punct","bAr. 	baz",/A/,"daw",". 	baz"),st("diw_end_spc","foo 	bAr",/A/,"diw","foo 	"),st("daw_end_spc","foo 	bAr",/A/,"daw","foo"),st("diw_end_punct","foo 	bAr.",/A/,"diw","foo 	."),st("daw_end_punct","foo 	bAr.",/A/,"daw","foo."),st("diW_mid_spc","foo 	bAr	 baz",/A/,"diW","foo 		 baz"),st("daW_mid_spc","foo 	bAr	 baz",/A/,"daW","foo 	baz"),st("diW_mid_punct","foo 	bAr.	 baz",/A/,"diW","foo 		 baz"),st("daW_mid_punct","foo 	bAr.	 baz",/A/,"daW","foo 	baz"),st("diW_mid_punct2","foo 	,bAr.	 baz",/A/,"diW","foo 		 baz"),st("daW_mid_punct2","foo 	,bAr.	 baz",/A/,"daW","foo 	baz"),st("diW_start_spc","bAr	 baz",/A/,"diW","	 baz"),st("daW_start_spc","bAr	 baz",/A/,"daW","baz"),st("diW_start_punct","bAr.	 baz",/A/,"diW","	 baz"),st("daW_start_punct","bAr.	 baz",/A/,"daW","baz"),st("diW_end_spc","foo 	bAr",/A/,"diW","foo 	"),st("daW_end_spc","foo 	bAr",/A/,"daW","foo"),st("diW_end_punct","foo 	bAr.",/A/,"diW","foo 	"),st("daW_end_punct","foo 	bAr.",/A/,"daW","foo"),st("di(_open_spc","foo (bAr) baz",/\(/,"di(","foo () baz"),st("di)_open_spc","foo (bAr) baz",/\(/,"di)","foo () baz"),st("dib_open_spc","foo (bAr) baz",/\(/,"dib","foo () baz"),st("da(_open_spc","foo (bAr) baz",/\(/,"da(","foo  baz"),st("da)_open_spc","foo (bAr) baz",/\(/,"da)","foo  baz"),st("di(_middle_spc","foo (bAr) baz",/A/,"di(","foo () baz"),st("di)_middle_spc","foo (bAr) baz",/A/,"di)","foo () baz"),st("da(_middle_spc","foo (bAr) baz",/A/,"da(","foo  baz"),st("da)_middle_spc","foo (bAr) baz",/A/,"da)","foo  baz"),st("di(_close_spc","foo (bAr) baz",/\)/,"di(","foo () baz"),st("di)_close_spc","foo (bAr) baz",/\)/,"di)","foo () baz"),st("da(_close_spc","foo (bAr) baz",/\)/,"da(","foo  baz"),st("da)_close_spc","foo (bAr) baz",/\)/,"da)","foo  baz"),st("dab_on_(_should_delete_around_()block","o( in(abc) )",/\(a/,"dab","o( in )"),st("daB_on_{_should_delete_around_{}block","o{ in{abc} }",/{a/,"daB","o{ in }"),st("diB_on_{_should_delete_inner_{}block","o{ in{abc} }",/{a/,"diB","o{ in{} }"),st("da{_on_{_should_delete_inner_block","o{ in{abc} }",/{a/,"da{","o{ in }"),st("di[_on_(_should_not_delete","foo (bAr) baz",/\(/,"di[","foo (bAr) baz"),st("di[_on_)_should_not_delete","foo (bAr) baz",/\)/,"di[","foo (bAr) baz"),st("da[_on_(_should_not_delete","foo (bAr) baz",/\(/,"da[","foo (bAr) baz"),st("da[_on_)_should_not_delete","foo (bAr) baz",/\)/,"da[","foo (bAr) baz"),tt("di(_outside_should_stay",["d","i","("],{line:0,ch:0},{line:0,ch:0}),st("di{_middle_spc","a{\n	bar\n}b",/r/,"di{","a{}b"),st("di}_middle_spc","a{\n	bar\n}b",/r/,"di}","a{}b"),st("da{_middle_spc","a{\n	bar\n}b",/r/,"da{","ab"),st("da}_middle_spc","a{\n	bar\n}b",/r/,"da}","ab"),st("daB_middle_spc","a{\n	bar\n}b",/r/,"daB","ab"),st("di{_middle_spc","a{\n	bar\n	}b",/r/,"di{","a{}b"),st("di}_middle_spc","a{\n	bar\n	}b",/r/,"di}","a{}b"),st("da{_middle_spc","a{\n	bar\n	}b",/r/,"da{","ab"),st("da}_middle_spc","a{\n	bar\n	}b",/r/,"da}","ab"),st("di[_middle_spc","a	[\n	bar\n]b",/r/,"di[","a	[]b"),st("di]_middle_spc","a	[\n	bar\n]b",/r/,"di]","a	[]b"),st("da[_middle_spc","a	[\n	bar\n]b",/r/,"da[","a	b"),st("da]_middle_spc","a	[\n	bar\n]b",/r/,"da]","a	b"),ot("viw_middle_spc","foo 	bAr	 baz",/A/,"viw","bAr"),ot("vaw_middle_spc","foo 	bAr	 baz",/A/,"vaw","bAr	 "),ot("viw_middle_punct","foo 	bAr,	 baz",/A/,"viw","bAr"),ot("vaW_middle_punct","foo 	bAr,	 baz",/A/,"vaW","bAr,	 "),ot("viw_start_spc","foo 	bAr	 baz",/b/,"viw","bAr"),ot("viw_end_spc","foo 	bAr	 baz",/r/,"viw","bAr"),ot("viw_eol","foo 	bAr",/r/,"viw","bAr"),ot("vi{_middle_spc","a{\n	bar\n	}b",/r/,"vi{","\n	bar\n	"),ot("va{_middle_spc","a{\n	bar\n	}b",/r/,"va{","{\n	bar\n	}"),Y("mouse_select",function(e,t,n){e.setSelection(S(0,2),S(0,4),{origin:"*mouse"}),C(e.state.vim.visualMode),C(!e.state.vim.visualLine),C(!e.state.vim.visualBlock),n.doKeys("<Esc>"),C(!e.somethingSelected()),n.doKeys("g","v"),N("cd",e.getSelection())},{value:"abcdef"}),Y("D",function(e,t,n){e.setCursor(0,3),n.doKeys("D"),N(" wo\nword2\n word3",e.getValue());var r=n.getRegisterController().getRegister();N("rd1",r.toString()),C(!r.linewise),n.assertCursorAt(0,2)},{value:" word1\nword2\n word3"}),Y("C",function(e,t,n){var r=nt(0,3);e.setCursor(r),n.doKeys("C"),N(" wo\nword2\n word3",e.getValue());var i=n.getRegisterController().getRegister();N("rd1",i.toString()),C(!i.linewise),T(r,e.getCursor()),N("vim-insert",e.getOption("keyMap"))},{value:" word1\nword2\n word3"}),Y("Y",function(e,t,n){var r=nt(0,3);e.setCursor(r),n.doKeys("Y"),N(" word1\nword2\n word3",e.getValue());var i=n.getRegisterController().getRegister();N("rd1",i.toString()),C(!i.linewise),n.assertCursorAt(0,3)},{value:" word1\nword2\n word3"}),Y("~",function(e,t,n){n.doKeys("3","~"),N("ABCdefg",e.getValue()),n.assertCursorAt(0,3)},{value:"abcdefg"}),Y("ctrl-a",function(e,t,n){e.setCursor(0,0),n.doKeys("<C-a>"),N("-9",e.getValue()),n.assertCursorAt(0,1),n.doKeys("2","<C-a>"),N("-7",e.getValue())},{value:"-10"}),Y("ctrl-x",function(e,t,n){e.setCursor(0,0),n.doKeys("<C-x>"),N("-1",e.getValue()),n.assertCursorAt(0,1),n.doKeys("2","<C-x>"),N("-3",e.getValue())},{value:"0"}),Y("<C-x>/<C-a> search forward",function(e,t,n){G(["<C-x>","<C-a>"],function(t){e.setCursor(0,0),n.doKeys(t),n.assertCursorAt(0,5),n.doKeys("l"),n.doKeys(t),n.assertCursorAt(0,10),e.setCursor(0,11),n.doKeys(t),n.assertCursorAt(0,11)})},{value:"__jmp1 jmp2 jmp"}),Y("a",function(e,t,n){e.setCursor(0,1),n.doKeys("a"),n.assertCursorAt(0,2),N("vim-insert",e.getOption("keyMap"))}),Y("a_eol",function(e,t,n){e.setCursor(0,L[0].length-1),n.doKeys("a"),n.assertCursorAt(0,L[0].length),N("vim-insert",e.getOption("keyMap"))}),Y("A_endOfSelectedArea",function(e,t,n){e.setCursor(0,0),n.doKeys("v","j","l"),n.doKeys("A"),n.assertCursorAt(1,2),N("vim-insert",e.getOption("keyMap"))},{value:"foo\nbar"}),Y("i",function(e,t,n){e.setCursor(0,1),n.doKeys("i"),n.assertCursorAt(0,1),N("vim-insert",e.getOption("keyMap"))}),Y("i_repeat",function(e,t,n){n.doKeys("3","i"),e.replaceRange("test",e.getCursor()),n.doKeys("<Esc>"),N("testtesttest",e.getValue()),n.assertCursorAt(0,11)},{value:""}),Y("i_repeat_delete",function(e,t,n){e.setCursor(0,4),n.doKeys("2","i"),e.replaceRange("z",e.getCursor()),n.doInsertModeKeys("Backspace","Backspace"),n.doKeys("<Esc>"),N("abe",e.getValue()),n.assertCursorAt(0,1)},{value:"abcde"}),Y("A",function(e,t,n){n.doKeys("A"),n.assertCursorAt(0,L[0].length),N("vim-insert",e.getOption("keyMap"))}),Y("A_visual_block",function(e,t,n){e.setCursor(0,1),n.doKeys("<C-v>","2","j","l","l","A");var r=(new Array(e.listSelections().length+1)).join("hello ").split(" ");r.pop(),e.replaceSelections(r),N("testhello\nmehello\npleahellose",e.getValue()),n.doKeys("<Esc>"),e.setCursor(0,0),n.doKeys(".")},{value:"test\nme\nplease"}),Y("I",function(e,t,n){e.setCursor(0,4),n.doKeys("I"),n.assertCursorAt(0,L[0].textStart),N("vim-insert",e.getOption("keyMap"))}),Y("I_repeat",function(e,t,n){e.setCursor(0,1),n.doKeys("3","I"),e.replaceRange("test",e.getCursor()),n.doKeys("<Esc>"),N("testtesttestblah",e.getValue()),n.assertCursorAt(0,11)},{value:"blah"}),Y("I_visual_block",function(e,t,n){e.setCursor(0,0),n.doKeys("<C-v>","2","j","l","l","I");var r=(new Array(e.listSelections().length+1)).join("hello ").split(" ");r.pop(),e.replaceSelections(r),N("hellotest\nhellome\nhelloplease",e.getValue())},{value:"test\nme\nplease"}),Y("o",function(e,t,n){e.setCursor(0,4),n.doKeys("o"),N("word1\n\nword2",e.getValue()),n.assertCursorAt(1,0),N("vim-insert",e.getOption("keyMap"))},{value:"word1\nword2"}),Y("o_repeat",function(e,t,n){e.setCursor(0,0),n.doKeys("3","o"),e.replaceRange("test",e.getCursor()),n.doKeys("<Esc>"),N("\ntest\ntest\ntest",e.getValue()),n.assertCursorAt(3,3)},{value:""}),Y("O",function(e,t,n){e.setCursor(0,4),n.doKeys("O"),N("\nword1\nword2",e.getValue()),n.assertCursorAt(0,0),N("vim-insert",e.getOption("keyMap"))},{value:"word1\nword2"}),Y("J",function(e,t,n){e.setCursor(0,4),n.doKeys("J");var r="word1  word2\nword3\n word4";N(r,e.getValue()),n.assertCursorAt(0,r.indexOf("word2")-1)},{value:"word1 \n    word2\nword3\n word4"}),Y("J_repeat",function(e,t,n){e.setCursor(0,4),n.doKeys("3","J");var r="word1  word2 word3\n word4";N(r,e.getValue()),n.assertCursorAt(0,r.indexOf("word3")-1)},{value:"word1 \n    word2\nword3\n word4"}),Y("p",function(e,t,n){e.setCursor(0,1),n.getRegisterController().pushText('"',"yank","abc\ndef",!1),n.doKeys("p"),N("__abc\ndef_",e.getValue()),n.assertCursorAt(1,2)},{value:"___"}),Y("p_register",function(e,t,n){e.setCursor(0,1),n.getRegisterController().getRegister("a").setText("abc\ndef",!1),n.doKeys('"',"a","p"),N("__abc\ndef_",e.getValue()),n.assertCursorAt(1,2)},{value:"___"}),Y("p_wrong_register",function(e,t,n){e.setCursor(0,1),n.getRegisterController().getRegister("a").setText("abc\ndef",!1),n.doKeys("p"),N("___",e.getValue()),n.assertCursorAt(0,1)},{value:"___"}),Y("p_line",function(e,t,n){e.setCursor(0,1),n.getRegisterController().pushText('"',"yank","  a\nd\n",!0),n.doKeys("2","p"),N("___\n  a\nd\n  a\nd",e.getValue()),n.assertCursorAt(1,2)},{value:"___"}),Y("p_lastline",function(e,t,n){e.setCursor(0,1),n.getRegisterController().pushText('"',"yank","  a\nd",!0),n.doKeys("2","p"),N("___\n  a\nd\n  a\nd",e.getValue()),n.assertCursorAt(1,2)},{value:"___"}),Y("]p_first_indent_is_smaller",function(e,t,n){n.getRegisterController().pushText('"',"yank","  abc\n    def\n",!0),n.doKeys("]","p"),N("  ___\n  abc\n    def",e.getValue())},{value:"  ___"}),Y("]p_first_indent_is_larger",function(e,t,n){n.getRegisterController().pushText('"',"yank","    abc\n  def\n",!0),n.doKeys("]","p"),N("  ___\n  abc\ndef",e.getValue())},{value:"  ___"}),Y("]p_with_tab_indents",function(e,t,n){n.getRegisterController().pushText('"',"yank","		abc\n			def\n",!0),n.doKeys("]","p"),N("	___\n	abc\n		def",e.getValue())},{value:"	___",indentWithTabs:!0}),Y("]p_with_spaces_translated_to_tabs",function(e,t,n){n.getRegisterController().pushText('"',"yank","  abc\n    def\n",!0),n.doKeys("]","p"),N("	___\n	abc\n		def",e.getValue())},{value:"	___",indentWithTabs:!0,tabSize:2}),Y("[p",function(e,t,n){n.getRegisterController().pushText('"',"yank","  abc\n    def\n",!0),n.doKeys("[","p"),N("  abc\n    def\n  ___",e.getValue())},{value:"  ___"}),Y("P",function(e,t,n){e.setCursor(0,1),n.getRegisterController().pushText('"',"yank","abc\ndef",!1),n.doKeys("P"),N("_abc\ndef__",e.getValue()),n.assertCursorAt(1,3)},{value:"___"}),Y("P_line",function(e,t,n){e.setCursor(0,1),n.getRegisterController().pushText('"',"yank","  a\nd\n",!0),n.doKeys("2","P"),N("  a\nd\n  a\nd\n___",e.getValue()),n.assertCursorAt(0,2)},{value:"___"}),Y("r",function(e,t,n){e.setCursor(0,1),n.doKeys("3","r","u"),N("wuuuet\nanother",e.getValue(),"3r failed"),n.assertCursorAt(0,3),e.setCursor(0,4),n.doKeys("v","j","h","r","<Space>"),N("wuuu  \n    her",e.getValue(),"Replacing selection by space-characters failed")},{value:"wordet\nanother"}),Y("r_visual_block",function(e,t,n){e.setCursor(2,3),n.doKeys("<C-v>","k","k","h","h","r","l"),N("1lll\n5lll\nalllefg",e.getValue()),n.doKeys("<C-v>","l","j","r","<Space>"),N("1  l\n5  l\nalllefg",e.getValue()),e.setCursor(2,0),n.doKeys("o"),n.doKeys("<Esc>"),e.replaceRange("		",e.getCursor()),n.doKeys("<C-v>","h","h","r","r"),N("1  l\n5  l\nalllefg\nrrrrrrrr",e.getValue())},{value:"1234\n5678\nabcdefg"}),Y("R",function(e,t,n){e.setCursor(0,1),n.doKeys("R"),n.assertCursorAt(0,1),N("vim-replace",e.getOption("keyMap")),C(e.state.overwrite,"Setting overwrite state failed")}),Y("mark",function(e,t,n){e.setCursor(2,2),n.doKeys("m","t"),e.setCursor(0,0),n.doKeys("`","t"),n.assertCursorAt(2,2),e.setCursor(2,0),e.replaceRange("   h",e.getCursor()),e.setCursor(0,0),n.doKeys("'","t"),n.assertCursorAt(2,3)}),Y("jumpToMark_next",function(e,t,n){e.setCursor(2,2),n.doKeys("m","t"),e.setCursor(0,0),n.doKeys("]","`"),n.assertCursorAt(2,2),e.setCursor(0,0),n.doKeys("]","'"),n.assertCursorAt(2,0)}),Y("jumpToMark_next_repeat",function(e,t,n){e.setCursor(2,2),n.doKeys("m","a"),e.setCursor(3,2),n.doKeys("m","b"),e.setCursor(4,2),n.doKeys("m","c"),e.setCursor(0,0),n.doKeys("2","]","`"),n.assertCursorAt(3,2),e.setCursor(0,0),n.doKeys("2","]","'"),n.assertCursorAt(3,1)}),Y("jumpToMark_next_sameline",function(e,t,n){e.setCursor(2,0),n.doKeys("m","a"),e.setCursor(2,4),n.doKeys("m","b"),e.setCursor(2,2),n.doKeys("]","`"),n.assertCursorAt(2,4)}),Y("jumpToMark_next_onlyprev",function(e,t,n){e.setCursor(2,0),n.doKeys("m","a"),e.setCursor(4,0),n.doKeys("]","`"),n.assertCursorAt(4,0)}),Y("jumpToMark_next_nomark",function(e,t,n){e.setCursor(2,2),n.doKeys("]","`"),n.assertCursorAt(2,2),n.doKeys("]","'"),n.assertCursorAt(2,0)}),Y("jumpToMark_next_linewise_over",function(e,t,n){e.setCursor(2,2),n.doKeys("m","a"),e.setCursor(3,4),n.doKeys("m","b"),e.setCursor(2,1),n.doKeys("]","'"),n.assertCursorAt(3,1)}),Y("jumpToMark_next_action",function(e,t,n){e.setCursor(2,2),n.doKeys("m","t"),e.setCursor(0,0),n.doKeys("d","]","`"),n.assertCursorAt(0,0);var r=e.getLine(0),i="pop pop 0 1 2 3 4";N(r,i,"Deleting while jumping to the next mark failed.")}),Y("jumpToMark_next_line_action",function(e,t,n){e.setCursor(2,2),n.doKeys("m","t"),e.setCursor(0,0),n.doKeys("d","]","'"),n.assertCursorAt(0,1);var r=e.getLine(0),i=" (a) [b] {c} ";N(r,i,"Deleting while jumping to the next mark line failed.")}),Y("jumpToMark_prev",function(e,t,n){e.setCursor(2,2),n.doKeys("m","t"),e.setCursor(4,0),n.doKeys("[","`"),n.assertCursorAt(2,2),e.setCursor(4,0),n.doKeys("[","'"),n.assertCursorAt(2,0)}),Y("jumpToMark_prev_repeat",function(e,t,n){e.setCursor(2,2),n.doKeys("m","a"),e.setCursor(3,2),n.doKeys("m","b"),e.setCursor(4,2),n.doKeys("m","c"),e.setCursor(5,0),n.doKeys("2","[","`"),n.assertCursorAt(3,2),e.setCursor(5,0),n.doKeys("2","[","'"),n.assertCursorAt(3,1)}),Y("jumpToMark_prev_sameline",function(e,t,n){e.setCursor(2,0),n.doKeys("m","a"),e.setCursor(2,4),n.doKeys("m","b"),e.setCursor(2,2),n.doKeys("[","`"),n.assertCursorAt(2,0)}),Y("jumpToMark_prev_onlynext",function(e,t,n){e.setCursor(4,4),n.doKeys("m","a"),e.setCursor(2,0),n.doKeys("[","`"),n.assertCursorAt(2,0)}),Y("jumpToMark_prev_nomark",function(e,t,n){e.setCursor(2,2),n.doKeys("[","`"),n.assertCursorAt(2,2),n.doKeys("[","'"),n.assertCursorAt(2,0)}),Y("jumpToMark_prev_linewise_over",function(e,t,n){e.setCursor(2,2),n.doKeys("m","a"),e.setCursor(3,4),n.doKeys("m","b"),e.setCursor(3,6),n.doKeys("[","'"),n.assertCursorAt(2,0)}),Y("delmark_single",function(e,t,n){e.setCursor(1,2),n.doKeys("m","t"),n.doEx("delmarks t"),e.setCursor(0,0),n.doKeys("`","t"),n.assertCursorAt(0,0)}),Y("delmark_range",function(e,t,n){e.setCursor(1,2),n.doKeys("m","a"),e.setCursor(2,2),n.doKeys("m","b"),e.setCursor(3,2),n.doKeys("m","c"),e.setCursor(4,2),n.doKeys("m","d"),e.setCursor(5,2),n.doKeys("m","e"),n.doEx("delmarks b-d"),e.setCursor(0,0),n.doKeys("`","a"),n.assertCursorAt(1,2),n.doKeys("`","b"),n.assertCursorAt(1,2),n.doKeys("`","c"),n.assertCursorAt(1,2),n.doKeys("`","d"),n.assertCursorAt(1,2),n.doKeys("`","e"),n.assertCursorAt(5,2)}),Y("delmark_multi",function(e,t,n){e.setCursor(1,2),n.doKeys("m","a"),e.setCursor(2,2),n.doKeys("m","b"),e.setCursor(3,2),n.doKeys("m","c"),e.setCursor(4,2),n.doKeys("m","d"),e.setCursor(5,2),n.doKeys("m","e"),n.doEx("delmarks bcd"),e.setCursor(0,0),n.doKeys("`","a"),n.assertCursorAt(1,2),n.doKeys("`","b"),n.assertCursorAt(1,2),n.doKeys("`","c"),n.assertCursorAt(1,2),n.doKeys("`","d"),n.assertCursorAt(1,2),n.doKeys("`","e"),n.assertCursorAt(5,2)}),Y("delmark_multi_space",function(e,t,n){e.setCursor(1,2),n.doKeys("m","a"),e.setCursor(2,2),n.doKeys("m","b"),e.setCursor(3,2),n.doKeys("m","c"),e.setCursor(4,2),n.doKeys("m","d"),e.setCursor(5,2),n.doKeys("m","e"),n.doEx("delmarks b c d"),e.setCursor(0,0),n.doKeys("`","a"),n.assertCursorAt(1,2),n.doKeys("`","b"),n.assertCursorAt(1,2),n.doKeys("`","c"),n.assertCursorAt(1,2),n.doKeys("`","d"),n.assertCursorAt(1,2),n.doKeys("`","e"),n.assertCursorAt(5,2)}),Y("delmark_all",function(e,t,n){e.setCursor(1,2),n.doKeys("m","a"),e.setCursor(2,2),n.doKeys("m","b"),e.setCursor(3,2),n.doKeys("m","c"),e.setCursor(4,2),n.doKeys("m","d"),e.setCursor(5,2),n.doKeys("m","e"),n.doEx("delmarks a b-de"),e.setCursor(0,0),n.doKeys("`","a"),n.assertCursorAt(0,0),n.doKeys("`","b"),n.assertCursorAt(0,0),n.doKeys("`","c"),n.assertCursorAt(0,0),n.doKeys("`","d"),n.assertCursorAt(0,0),n.doKeys("`","e"),n.assertCursorAt(0,0)}),Y("visual",function(e,t,n){n.doKeys("l","v","l","l"),n.assertCursorAt(0,4),T(nt(0,1),e.getCursor("anchor")),n.doKeys("d"),N("15",e.getValue())},{value:"12345"}),Y("visual_yank",function(e,t,n){n.doKeys("v","3","l","y"),n.assertCursorAt(0,0),n.doKeys("p"),N("aa te test for yank",e.getValue())},{value:"a test for yank"}),Y("visual_w",function(e,t,n){n.doKeys("v","w"),N(e.getSelection(),"motion t")},{value:"motion test"}),Y("visual_initial_selection",function(e,t,n){e.setCursor(0,1),n.doKeys("v"),e.getSelection("n")},{value:"init"}),Y("visual_crossover_left",function(e,t,n){e.setCursor(0,2),n.doKeys("v","l","h","h"),e.getSelection("ro")},{value:"cross"}),Y("visual_crossover_left",function(e,t,n){e.setCursor(0,2),n.doKeys("v","h","l","l"),e.getSelection("os")},{value:"cross"}),Y("visual_crossover_up",function(e,t,n){e.setCursor(3,2),n.doKeys("v","j","k","k"),T(S(2,2),e.getCursor("head")),T(S(3,3),e.getCursor("anchor")),n.doKeys("k"),T(S(1,2),e.getCursor("head")),T(S(3,3),e.getCursor("anchor"))},{value:"cross\ncross\ncross\ncross\ncross\n"}),Y("visual_crossover_down",function(e,t,n){e.setCursor(1,2),n.doKeys("v","k","j","j"),T(S(2,3),e.getCursor("head")),T(S(1,2),e.getCursor("anchor")),n.doKeys("j"),T(S(3,3),e.getCursor("head")),T(S(1,2),e.getCursor("anchor"))},{value:"cross\ncross\ncross\ncross\ncross\n"}),Y("visual_exit",function(e,t,n){n.doKeys("<C-v>","l","j","j","<Esc>"),T(e.getCursor("anchor"),e.getCursor("head")),N(t.visualMode,!1)},{value:"hello\nworld\nfoo"}),Y("visual_line",function(e,t,n){n.doKeys("l","V","l","j","j","d"),N(" 4\n 5",e.getValue())},{value:" 1\n 2\n 3\n 4\n 5"}),Y("visual_block_move_to_eol",function(e,t,n){e.setCursor(0,0),n.doKeys("<C-v>","G","$");var r=e.getSelections().join();N("123,45,6",r)},{value:"123\n45\n6"}),Y("visual_block_different_line_lengths",function(e,t,n){n.doKeys("<C-v>","l","j","j","6","l","d"),n.doKeys("d","d","d","d"),N("",e.getValue())},{value:"1234\n5678\nabcdefg"}),Y("visual_block_truncate_on_short_line",function(e,t,n){e.replaceRange("",e.getCursor()),e.setCursor(3,4),n.doKeys("<C-v>","l","k","k","d"),N("hello world\n{\ntis\nsa!",e.getValue())},{value:"hello world\n{\nthis is\nsparta!"}),Y("visual_block_corners",function(e,t,n){e.setCursor(1,2),n.doKeys("<C-v>","2","l","k");var r=e.getSelections();N("345891",r.join("")),n.doKeys("4","h"),r=e.getSelections(),N("123678",r.join("")),n.doKeys("j","j"),r=e.getSelections(),N("678abc",r.join("")),n.doKeys("4","l"),r=e.getSelections(),N("891cde",r.join(""))},{value:"12345\n67891\nabcde"}),Y("visual_block_mode_switch",function(e,t,n){e.setCursor(1,1),n.doKeys("<C-v>","j","l","v"),selections=e.getSelections(),N("7891\nabc",selections.join("")),n.doKeys("<C-v>"),selections=e.getSelections(),N("78bc",selections.join("")),n.doKeys("V"),selections=e.getSelections(),N("67891\nabcde",selections.join(""))},{value:"12345\n67891\nabcde"}),Y("visual_block_crossing_short_line",function(e,t,n){e.setCursor(0,3),n.doKeys("<C-v>","j","j","j");var r=e.getSelections().join();N("4,,d,b",r),n.doKeys("3","k"),r=e.getSelections().join(),N("4",r),n.doKeys("5","j","k"),r=e.getSelections().join(""),N(10,r.length)},{value:"123456\n78\nabcdefg\nfoobar\n}\n"}),Y("visual_block_curPos_on_exit",function(e,t,n){e.setCursor(0,0),n.doKeys("<C-v>","3","l","<Esc>"),T(nt(0,3),e.getCursor()),n.doKeys("h","<C-v>","2","j","3","l"),N(e.getSelections().join(),"3456,,cdef"),n.doKeys("4","h"),N(e.getSelections().join(),"23,8,bc"),n.doKeys("2","l"),N(e.getSelections().join(),"34,,cd")},{value:"123456\n78\nabcdefg\nfoobar"}),Y("visual_marks",function(e,t,n){n.doKeys("l","v","l","l","j","j","v"),e.setCursor(2,1),n.doKeys("'","<"),n.assertCursorAt(0,1),n.doKeys("'",">"),n.assertCursorAt(2,0)}),Y("visual_join",function(e,t,n){n.doKeys("l","V","l","j","j","J"),N(" 1 2 3\n 4\n 5",e.getValue()),C(!t.visualMode)},{value:" 1\n 2\n 3\n 4\n 5"}),Y("visual_join_2",function(e,t,n){n.doKeys("G","V","g","g","J"),N("1 2 3 4 5 6 ",e.getValue()),C(!t.visualMode)},{value:"1\n2\n3\n4\n5\n6\n"}),Y("visual_blank",function(e,t,n){n.doKeys("v","k"),N(t.visualMode,!0)},{value:"\n"}),Y("reselect_visual",function(e,t,n){n.doKeys("l","v","l","l","l","y","g","v"),n.assertCursorAt(0,5),T(nt(0,1),e.getCursor("anchor")),n.doKeys("v"),e.setCursor(1,0),n.doKeys("v","l","l","p"),N("123456\n2345\nbar",e.getValue()),e.setCursor(0,0),n.doKeys("g","v"),n.assertCursorAt(1,4),T(nt(1,0),e.getCursor("anchor")),n.doKeys("v"),e.setCursor(2,0),n.doKeys("v","l","l","g","v"),n.assertCursorAt(1,4),T(nt(1,0),e.getCursor("anchor")),n.doKeys("g","v"),n.assertCursorAt(2,3),T(nt(2,0),e.getCursor("anchor")),N("123456\n2345\nbar",e.getValue())},{value:"123456\nfoo\nbar"}),Y("reselect_visual_line",function(e,t,n){n.doKeys("l","V","j","j","V","g","v","d"),N("foo\nand\nbar",e.getValue()),e.setCursor(1,0),n.doKeys("V","y","j"),n.doKeys("V","p","g","v","d"),N("foo\nand",e.getValue())},{value:"hello\nthis\nis\nfoo\nand\nbar"}),Y("reselect_visual_block",function(e,t,n){e.setCursor(1,2),n.doKeys("<C-v>","k","h","<C-v>"),e.setCursor(2,1),n.doKeys("v","l","g","v"),T(S(1,2),t.sel.anchor),T(S(0,1),t.sel.head),N(e.getSelections().join(""),"23oo"),n.doKeys("g","v"),T(S(2,1),t.sel.anchor),T(S(2,2),t.sel.head),n.doKeys("<Esc>"),e.setCursor(1,1),n.doKeys("v","<C-v>","j","d","g","v"),N(e.getSelections().join(""),"or")},{value:"123456\nfoo\nbar"}),Y("s_normal",function(e,t,n){e.setCursor(0,1),n.doKeys("s"),n.doKeys("<Esc>"),N("ac",e.getValue())},{value:"abc"}),Y("s_visual",function(e,t,n){e.setCursor(0,1),n.doKeys("v","s"),n.doKeys("<Esc>"),n.assertCursorAt(0,0),N("ac",e.getValue())},{value:"abc"}),Y("o_visual",function(e,t,n){e.setCursor(0,0),n.doKeys("v","l","l","l","o"),n.assertCursorAt(0,0),n.doKeys("v","v","j","j","j","o"),n.assertCursorAt(0,0),n.doKeys("O"),n.doKeys("l","l"),n.assertCursorAt(3,3),n.doKeys("d"),N("p",e.getValue())},{value:"abcd\nefgh\nijkl\nmnop"}),Y("o_visual_block",function(e,t,n){e.setCursor(0,1),n.doKeys("<C-v>","3","j","l","l","o"),T(S(3,3),t.sel.anchor),T(S(0,1),t.sel.head),n.doKeys("O"),T(S(3,1),t.sel.anchor),T(S(0,3),t.sel.head),n.doKeys("o"),T(S(0,3),t.sel.anchor),T(S(3,1),t.sel.head)},{value:"abcd\nefgh\nijkl\nmnop"}),Y("changeCase_visual",function(e,t,n){e.setCursor(0,0),n.doKeys("v","l","l"),n.doKeys("U"),n.assertCursorAt(0,0),n.doKeys("v","l","l"),n.doKeys("u"),n.assertCursorAt(0,0),n.doKeys("l","l","l","."),n.assertCursorAt(0,3),e.setCursor(0,0),n.doKeys("q","a","v","j","U","q"),n.assertCursorAt(0,0),n.doKeys("j","@","a"),n.assertCursorAt(1,0),e.setCursor(3,0),n.doKeys("V","U","j","."),N("ABCDEF\nGHIJKL\nMnopq\nSHORT LINE\nLONG LINE OF TEXT",e.getValue())},{value:"abcdef\nghijkl\nmnopq\nshort line\nlong line of text"}),Y("changeCase_visual_block",function(e,t,n){e.setCursor(2,1),n.doKeys("<C-v>","k","k","h","U"),N("ABcdef\nGHijkl\nMNopq\nfoo",e.getValue()),e.setCursor(0,2),n.doKeys("."),N("ABCDef\nGHIJkl\nMNOPq\nfoo",e.getValue()),e.setCursor(2,2),n.doKeys("."),N("ABCDef\nGHIJkl\nMNOPq\nfoO",e.getValue())},{value:"abcdef\nghijkl\nmnopq\nfoo"}),Y("visual_paste",function(e,t,n){e.setCursor(0,0),n.doKeys("v","l","l","y"),n.assertCursorAt(0,0),n.doKeys("3","l","j","v","l","p"),n.assertCursorAt(1,5),N("this is a\nunithitest for visual paste",e.getValue()),e.setCursor(0,0),n.doKeys("y","y"),e.setCursor(1,6),n.doKeys("v","l","l","l","p"),n.assertCursorAt(2,0),N("this is a\nunithi\nthis is a\n for visual paste",e.getValue())},{value:"this is a\nunit test for visual paste"}),Y("v_paste_from_register",function(e,t,n){e.setCursor(0,0),n.doKeys('"',"a","y","w"),e.setCursor(1,0),n.doKeys("v","p"),e.openDialog=n.fakeOpenDialog("registers"),e.openNotification=n.fakeOpenNotification(function(e){C(/a\s+register/.test(e))})},{value:"register contents\nare not erased"}),Y("S_normal",function(e,t,n){e.setCursor(0,1),n.doKeys("j","S"),n.doKeys("<Esc>"),n.assertCursorAt(1,0),N("aa\n\ncc",e.getValue())},{value:"aa\nbb\ncc"}),Y("blockwise_paste",function(e,t,n){e.setCursor(0,0),n.doKeys("<C-v>","3","j","l","y"),e.setCursor(0,2),n.doKeys("p"),N("helhelo\nworwold\nfoofo\nbarba",e.getValue()),e.setCursor(0,0),n.doKeys("v","4","l","y"),e.setCursor(0,0),n.doKeys("<C-v>","3","j","p"),N("helheelhelo\norwold\noofo\narba",e.getValue())},{value:"hello\nworld\nfoo\nbar"}),Y("blockwise_paste_long/short_line",function(e,t,n){e.setCursor(0,0),n.doKeys("<C-v>","j","j","y"),e.setCursor(0,3),n.doKeys("p"),N("hellho\nfoo f\nbar b",e.getValue())},{value:"hello\nfoo\nbar"}),Y("blockwise_paste_cut_paste",function(e,t,n){e.setCursor(0,0),n.doKeys("<C-v>","2","j","x"),e.setCursor(0,0),n.doKeys("P"),N("cut\nand\npaste\nme",e.getValue())},{value:"cut\nand\npaste\nme"}),Y("blockwise_paste_from_register",function(e,t,n){e.setCursor(0,0),n.doKeys("<C-v>","2","j",'"',"a","y"),e.setCursor(0,3),n.doKeys('"',"a","p"),N("foobfar\nhellho\nworlwd",e.getValue())},{value:"foobar\nhello\nworld"}),Y("blockwise_paste_last_line",function(e,t,n){e.setCursor(0,0),n.doKeys("<C-v>","2","j","l","y"),e.setCursor(3,0),n.doKeys("p"),N("cut\nand\npaste\nmcue\n an\n pa",e.getValue())},{value:"cut\nand\npaste\nme"}),Y("S_visual",function(e,t,n){e.setCursor(0,1),n.doKeys("v","j","S"),n.doKeys("<Esc>"),n.assertCursorAt(0,0),N("\ncc",e.getValue())},{value:"aa\nbb\ncc"}),Y("d_/",function(e,t,n){e.openDialog=n.fakeOpenDialog("match"),n.doKeys("2","d","/"),n.assertCursorAt(0,0),N("match \n next",e.getValue()),e.openDialog=n.fakeOpenDialog("2"),n.doKeys("d",":")},{value:"text match match \n next"}),Y("/ and n/N",function(e,t,n){e.openDialog=n.fakeOpenDialog("match"),n.doKeys("/"),n.assertCursorAt(0,11),n.doKeys("n"),n.assertCursorAt(1,6),n.doKeys("N"),n.assertCursorAt(0,11),e.setCursor(0,0),n.doKeys("2","/"),n.assertCursorAt(1,6)},{value:"match nope match \n nope Match"}),Y("/_case",function(e,t,n){e.openDialog=n.fakeOpenDialog("Match"),n.doKeys("/"),n.assertCursorAt(1,6)},{value:"match nope match \n nope Match"}),Y("/_2_pcre",function(e,t,n){d.Vim.setOption("pcre",!0),e.openDialog=n.fakeOpenDialog("(word){2}"),n.doKeys("/"),n.assertCursorAt(1,9),n.doKeys("n"),n.assertCursorAt(2,1)},{value:"word\n another wordword\n wordwordword\n"}),Y("/_2_nopcre",function(e,t,n){d.Vim.setOption("pcre",!1),e.openDialog=n.fakeOpenDialog("\\(word\\)\\{2}"),n.doKeys("/"),n.assertCursorAt(1,9),n.doKeys("n"),n.assertCursorAt(2,1)},{value:"word\n another wordword\n wordwordword\n"}),Y("/_nongreedy",function(e,t,n){e.openDialog=n.fakeOpenDialog("aa"),n.doKeys("/"),n.assertCursorAt(0,4),n.doKeys("n"),n.assertCursorAt(1,3),n.doKeys("n"),n.assertCursorAt(0,0)},{value:"aaa aa \n a aa"}),Y("?_nongreedy",function(e,t,n){e.openDialog=n.fakeOpenDialog("aa"),n.doKeys("?"),n.assertCursorAt(1,3),n.doKeys("n"),n.assertCursorAt(0,4),n.doKeys("n"),n.assertCursorAt(0,0)},{value:"aaa aa \n a aa"}),Y("/_greedy",function(e,t,n){e.openDialog=n.fakeOpenDialog("a+"),n.doKeys("/"),n.assertCursorAt(0,4),n.doKeys("n"),n.assertCursorAt(1,1),n.doKeys("n"),n.assertCursorAt(1,3),n.doKeys("n"),n.assertCursorAt(0,0)},{value:"aaa aa \n a aa"}),Y("?_greedy",function(e,t,n){e.openDialog=n.fakeOpenDialog("a+"),n.doKeys("?"),n.assertCursorAt(1,3),n.doKeys("n"),n.assertCursorAt(1,1),n.doKeys("n"),n.assertCursorAt(0,4),n.doKeys("n"),n.assertCursorAt(0,0)},{value:"aaa aa \n a aa"}),Y("/_greedy_0_or_more",function(e,t,n){e.openDialog=n.fakeOpenDialog("a*"),n.doKeys("/"),n.assertCursorAt(0,3),n.doKeys("n"),n.assertCursorAt(0,4),n.doKeys("n"),n.assertCursorAt(0,5),n.doKeys("n"),n.assertCursorAt(1,0),n.doKeys("n"),n.assertCursorAt(1,1),n.doKeys("n"),n.assertCursorAt(0,0)},{value:"aaa  aa\n aa"}),Y("?_greedy_0_or_more",function(e,t,n){e.openDialog=n.fakeOpenDialog("a*"),n.doKeys("?"),n.assertCursorAt(1,1),n.doKeys("n"),n.assertCursorAt(1,0),n.doKeys("n"),n.assertCursorAt(0,5),n.doKeys("n"),n.assertCursorAt(0,4),n.doKeys("n"),n.assertCursorAt(0,3),n.doKeys("n"),n.assertCursorAt(0,0)},{value:"aaa  aa\n aa"}),Y("? and n/N",function(e,t,n){e.openDialog=n.fakeOpenDialog("match"),n.doKeys("?"),n.assertCursorAt(1,6),n.doKeys("n"),n.assertCursorAt(0,11),n.doKeys("N"),n.assertCursorAt(1,6),e.setCursor(0,0),n.doKeys("2","?"),n.assertCursorAt(0,11)},{value:"match nope match \n nope Match"}),Y("*",function(e,t,n){e.setCursor(0,9),n.doKeys("*"),n.assertCursorAt(0,22),e.setCursor(0,9),n.doKeys("2","*"),n.assertCursorAt(1,8)},{value:"nomatch match nomatch match \nnomatch Match"}),Y("*_no_word",function(e,t,n){e.setCursor(0,0),n.doKeys("*"),n.assertCursorAt(0,0)},{value:" \n match \n"}),Y("*_symbol",function(e,t,n){e.setCursor(0,0),n.doKeys("*"),n.assertCursorAt(1,0)},{value:" /}\n/} match \n"}),Y("#",function(e,t,n){e.setCursor(0,9),n.doKeys("#"),n.assertCursorAt(1,8),e.setCursor(0,9),n.doKeys("2","#"),n.assertCursorAt(0,22)},{value:"nomatch match nomatch match \nnomatch Match"}),Y("*_seek",function(e,t,n){e.setCursor(0,3),n.doKeys("*"),n.assertCursorAt(0,22)},{value:"    :=  match nomatch match \nnomatch Match"}),Y("#",function(e,t,n){e.setCursor(0,3),n.doKeys("#"),n.assertCursorAt(1,8)},{value:"    :=  match nomatch match \nnomatch Match"}),Y("g*",function(e,t,n){e.setCursor(0,8),n.doKeys("g","*"),n.assertCursorAt(0,18),e.setCursor(0,8),n.doKeys("3","g","*"),n.assertCursorAt(1,8)},{value:"matches match alsoMatch\nmatchme matching"}),Y("g#",function(e,t,n){e.setCursor(0,8),n.doKeys("g","#"),n.assertCursorAt(0,0),e.setCursor(0,8),n.doKeys("3","g","#"),n.assertCursorAt(1,0)},{value:"matches match alsoMatch\nmatchme matching"}),Y("macro_insert",function(e,t,n){e.setCursor(0,0),n.doKeys("q","a","0","i"),e.replaceRange("foo",e.getCursor()),n.doKeys("<Esc>"),n.doKeys("q","@","a"),N("foofoo",e.getValue())},{value:""}),Y("macro_insert_repeat",function(e,t,n){e.setCursor(0,0),n.doKeys("q","a","$","a"),e.replaceRange("larry.",e.getCursor()),n.doKeys("<Esc>"),n.doKeys("a"),e.replaceRange("curly.",e.getCursor()),n.doKeys("<Esc>"),n.doKeys("q"),n.doKeys("a"),e.replaceRange("moe.",e.getCursor()),n.doKeys("<Esc>"),n.doKeys("@","a"),n.doKeys("."),N("larry.curly.moe.larry.curly.curly.",e.getValue())},{value:""}),Y("macro_space",function(e,t,n){e.setCursor(0,0),n.doKeys("<Space>","<Space>"),n.assertCursorAt(0,2),n.doKeys("q","a","<Space>","<Space>","q"),n.assertCursorAt(0,4),n.doKeys("@","a"),n.assertCursorAt(0,6),n.doKeys("@","a"),n.assertCursorAt(0,8)},{value:"one line of text."}),Y("macro_t_search",function(e,t,n){e.setCursor(0,0),n.doKeys("q","a","t","e","q"),n.assertCursorAt(0,1),n.doKeys("l","@","a"),n.assertCursorAt(0,6),n.doKeys("l",";"),n.assertCursorAt(0,12)},{value:"one line of text."}),Y("macro_f_search",function(e,t,n){e.setCursor(0,0),n.doKeys("q","b","f","e","q"),n.assertCursorAt(0,2),n.doKeys("@","b"),n.assertCursorAt(0,7),n.doKeys(";"),n.assertCursorAt(0,13)},{value:"one line of text."}),Y("macro_slash_search",function(e,t,n){e.setCursor(0,0),n.doKeys("q","c"),e.openDialog=n.fakeOpenDialog("e"),n.doKeys("/","q"),n.assertCursorAt(0,2),n.doKeys("@","c"),n.assertCursorAt(0,7),n.doKeys("n"),n.assertCursorAt(0,13)},{value:"one line of text."}),Y("macro_multislash_search",function(e,t,n){e.setCursor(0,0),n.doKeys("q","d"),e.openDialog=n.fakeOpenDialog("e"),n.doKeys("/"),e.openDialog=n.fakeOpenDialog("t"),n.doKeys("/","q"),n.assertCursorAt(0,12),n.doKeys("@","d"),n.assertCursorAt(0,15)},{value:"one line of text to rule them all."}),Y("macro_parens",function(e,t,n){e.setCursor(0,0),n.doKeys("q","z","i"),e.replaceRange("(",e.getCursor()),n.doKeys("<Esc>"),n.doKeys("e","a"),e.replaceRange(")",e.getCursor()),n.doKeys("<Esc>"),n.doKeys("q"),n.doKeys("w","@","z"),n.doKeys("w","@","z"),N("(see) (spot) (run)",e.getValue())},{value:"see spot run"}),Y("macro_overwrite",function(e,t,n){e.setCursor(0,0),n.doKeys("q","z","0","i"),e.replaceRange("I ",e.getCursor()),n.doKeys("<Esc>"),n.doKeys("q"),n.doKeys("e"),n.doKeys("q","z","a"),e.replaceRange(".",e.getCursor()),n.doKeys("<Esc>"),n.doKeys("q"),n.doKeys("e","@","z"),n.doKeys("e","@","z"),N("I see. spot. run.",e.getValue())},{value:"see spot run"}),Y("macro_search_f",function(e,t,n){e.setCursor(0,0),n.doKeys("q","a","f"," "),n.assertCursorAt(0,3),n.doKeys("q","0"),n.assertCursorAt(0,0),n.doKeys("@","a"),n.assertCursorAt(0,3)},{value:"The quick brown fox jumped over the lazy dog."}),Y("macro_search_2f",function(e,t,n){e.setCursor(0,0),n.doKeys("q","a","2","f"," "),n.assertCursorAt(0,9),n.doKeys("q","0"),n.assertCursorAt(0,0),n.doKeys("@","a"),n.assertCursorAt(0,9)},{value:"The quick brown fox jumped over the lazy dog."}),Y("yank_register",function(e,t,n){e.setCursor(0,0),n.doKeys('"',"a","y","y"),n.doKeys("j",'"',"b","y","y"),e.openDialog=n.fakeOpenDialog("registers"),e.openNotification=n.fakeOpenNotification(function(e){C(/a\s+foo/.test(e)),C(/b\s+bar/.test(e))}),n.doKeys(":")},{value:"foo\nbar"}),Y("yank_visual_block",function(e,t,n){e.setCursor(0,1),n.doKeys("<C-v>","l","j",'"',"a","y"),e.openNotification=n.fakeOpenNotification(function(e){C(/a\s+oo\nar/.test(e))}),n.doKeys(":")},{value:"foo\nbar"}),Y("yank_append_line_to_line_register",function(e,t,n){e.setCursor(0,0),n.doKeys('"',"a","y","y"),n.doKeys("j",'"',"A","y","y"),e.openDialog=n.fakeOpenDialog("registers"),e.openNotification=n.fakeOpenNotification(function(e){C(/a\s+foo\nbar/.test(e)),C(/"\s+foo\nbar/.test(e))}),n.doKeys(":")},{value:"foo\nbar"}),Y("yank_append_word_to_word_register",function(e,t,n){e.setCursor(0,0),n.doKeys('"',"a","y","w"),n.doKeys("j",'"',"A","y","w"),e.openDialog=n.fakeOpenDialog("registers"),e.openNotification=n.fakeOpenNotification(function(e){C(/a\s+foobar/.test(e)),C(/"\s+foobar/.test(e))}),n.doKeys(":")},{value:"foo\nbar"}),Y("yank_append_line_to_word_register",function(e,t,n){e.setCursor(0,0),n.doKeys('"',"a","y","w"),n.doKeys("j",'"',"A","y","y"),e.openDialog=n.fakeOpenDialog("registers"),e.openNotification=n.fakeOpenNotification(function(e){C(/a\s+foo\nbar/.test(e)),C(/"\s+foo\nbar/.test(e))}),n.doKeys(":")},{value:"foo\nbar"}),Y("yank_append_word_to_line_register",function(e,t,n){e.setCursor(0,0),n.doKeys('"',"a","y","y"),n.doKeys("j",'"',"A","y","w"),e.openDialog=n.fakeOpenDialog("registers"),e.openNotification=n.fakeOpenNotification(function(e){C(/a\s+foo\nbar/.test(e)),C(/"\s+foo\nbar/.test(e))}),n.doKeys(":")},{value:"foo\nbar"}),Y("macro_register",function(e,t,n){e.setCursor(0,0),n.doKeys("q","a","i"),e.replaceRange("gangnam",e.getCursor()),n.doKeys("<Esc>"),n.doKeys("q"),n.doKeys("q","b","o"),e.replaceRange("style",e.getCursor()),n.doKeys("<Esc>"),n.doKeys("q"),e.openDialog=n.fakeOpenDialog("registers"),e.openNotification=n.fakeOpenNotification(function(e){C(/a\s+i/.test(e)),C(/b\s+o/.test(e))}),n.doKeys(":")},{value:""}),Y("._register",function(e,t,n){e.setCursor(0,0),n.doKeys("i"),e.replaceRange("foo",e.getCursor()),n.doKeys("<Esc>"),e.openDialog=n.fakeOpenDialog("registers"),e.openNotification=n.fakeOpenNotification(function(e){C(/\.\s+foo/.test(e))}),n.doKeys(":")},{value:""}),Y(":_register",function(e,t,n){n.doEx("bar"),e.openDialog=n.fakeOpenDialog("registers"),e.openNotification=n.fakeOpenNotification(function(e){C(/:\s+bar/.test(e))}),n.doKeys(":")},{value:""}),Y("search_register_escape",function(e,t,n){e.openDialog=n.fakeOpenDialog("waldo"),n.doKeys("/");var r,i,s={f:70,o:79,Esc:27};e.openDialog=function(e,t,n){r=n.onKeyDown,i=n.onKeyUp};var o=function(){};n.doKeys("/"),r({keyCode:s.f},"",o),i({keyCode:s.f},"",o),r({keyCode:s.o},"f",o),i({keyCode:s.o},"f",o),r({keyCode:s.o},"fo",o),i({keyCode:s.o},"fo",o),r({keyCode:s.Esc},"foo",o),e.openDialog=n.fakeOpenDialog("registers"),e.openNotification=n.fakeOpenNotification(function(e){C(/waldo/.test(e)),C(!/foo/.test(e))}),n.doKeys(":")},{value:""}),Y("search_register",function(e,t,n){e.openDialog=n.fakeOpenDialog("foo"),n.doKeys("/"),e.openDialog=n.fakeOpenDialog("registers"),e.openNotification=n.fakeOpenNotification(function(e){C(/\/\s+foo/.test(e))}),n.doKeys(":")},{value:""}),Y("search_history",function(e,t,n){e.openDialog=n.fakeOpenDialog("this"),n.doKeys("/"),e.openDialog=n.fakeOpenDialog("checks"),n.doKeys("/"),e.openDialog=n.fakeOpenDialog("search"),n.doKeys("/"),e.openDialog=n.fakeOpenDialog("history"),n.doKeys("/"),e.openDialog=n.fakeOpenDialog("checks"),n.doKeys("/");var r,i,s="",o={Up:38,Down:40};e.openDialog=function(e,t,n){i=n.onKeyUp,r=n.onKeyDown};var u=function(e){typeof e=="string"&&(s=e)};n.doKeys("/"),r({keyCode:o.Up},s,u),i({keyCode:o.Up},s,u),N(s,"checks"),r({keyCode:o.Up},s,u),i({keyCode:o.Up},s,u),N(s,"history"),r({keyCode:o.Up},s,u),i({keyCode:o.Up},s,u),N(s,"search"),r({keyCode:o.Up},s,u),i({keyCode:o.Up},s,u),N(s,"this"),r({keyCode:o.Down},s,u),i({keyCode:o.Down},s,u),N(s,"search")},{value:""}),Y("exCommand_history",function(e,t,n){e.openDialog=n.fakeOpenDialog("registers"),n.doKeys(":"),e.openDialog=n.fakeOpenDialog("sort"),n.doKeys(":"),e.openDialog=n.fakeOpenDialog("map"),n.doKeys(":"),e.openDialog=n.fakeOpenDialog("invalid"),n.doKeys(":");var r,i,s="",o={Up:38,Down:40,s:115};e.openDialog=function(e,t,n){i=n.onKeyUp,r=n.onKeyDown};var u=function(e){typeof e=="string"&&(s=e)};n.doKeys(":"),r({keyCode:o.Up},s,u),N(s,"invalid"),r({keyCode:o.Up},s,u),N(s,"map"),r({keyCode:o.Up},s,u),N(s,"sort"),r({keyCode:o.Up},s,u),N(s,"registers"),r({keyCode:o.s},"",u),s="s",r({keyCode:o.Up},s,u),N(s,"sort")},{value:""}),Y(".",function(e,t,n){e.setCursor(0,0),n.doKeys("2","d","w"),n.doKeys("."),N("5 6",e.getValue())},{value:"1 2 3 4 5 6"}),Y("._repeat",function(e,t,n){e.setCursor(0,0),n.doKeys("2","d","w"),n.doKeys("3","."),N("6",e.getValue())},{value:"1 2 3 4 5 6"}),Y("._insert",function(e,t,n){n.doKeys("i"),e.replaceRange("test",e.getCursor()),n.doKeys("<Esc>"),n.doKeys("."),N("testestt",e.getValue()),n.assertCursorAt(0,6)},{value:""}),Y("._insert_repeat",function(e,t,n){n.doKeys("i"),e.replaceRange("test",e.getCursor()),e.setCursor(0,4),n.doKeys("<Esc>"),n.doKeys("2","."),N("testesttestt",e.getValue()),n.assertCursorAt(0,10)},{value:""}),Y("._repeat_insert",function(e,t,n){n.doKeys("3","i"),e.replaceRange("te",e.getCursor()),e.setCursor(0,2),n.doKeys("<Esc>"),n.doKeys("."),N("tetettetetee",e.getValue()),n.assertCursorAt(0,10)},{value:""}),Y("._insert_o",function(e,t,n){n.doKeys("o"),e.replaceRange("z",e.getCursor()),e.setCursor(1,1),n.doKeys("<Esc>"),n.doKeys("."),N("\nz\nz",e.getValue()),n.assertCursorAt(2,0)},{value:""}),Y("._insert_o_repeat",function(e,t,n){n.doKeys("o"),e.replaceRange("z",e.getCursor()),n.doKeys("<Esc>"),e.setCursor(1,0),n.doKeys("2","."),N("\nz\nz\nz",e.getValue()),n.assertCursorAt(3,0)},{value:""}),Y("._insert_o_indent",function(e,t,n){n.doKeys("o"),e.replaceRange("z",e.getCursor()),n.doKeys("<Esc>"),e.setCursor(1,2),n.doKeys("."),N("{\n  z\n  z",e.getValue()),n.assertCursorAt(2,2)},{value:"{"}),Y("._insert_cw",function(e,t,n){n.doKeys("c","w"),e.replaceRange("test",e.getCursor()),n.doKeys("<Esc>"),e.setCursor(0,3),n.doKeys("2","l"),n.doKeys("."),N("test test word3",e.getValue()),n.assertCursorAt(0,8)},{value:"word1 word2 word3"}),Y("._insert_cw_repeat",function(e,t,n){n.doKeys("c","w"),e.replaceRange("test",e.getCursor()),n.doKeys("<Esc>"),e.setCursor(0,4),n.doKeys("l"),n.doKeys("2","."),N("test test",e.getValue()),n.assertCursorAt(0,8)},{value:"word1 word2 word3"}),Y("._delete",function(e,t,n){e.setCursor(0,5),n.doKeys("i"),n.doInsertModeKeys("Backspace"),n.doKeys("<Esc>"),n.doKeys("."),N("zace",e.getValue()),n.assertCursorAt(0,1)},{value:"zabcde"}),Y("._delete_repeat",function(e,t,n){e.setCursor(0,6),n.doKeys("i"),n.doInsertModeKeys("Backspace"),n.doKeys("<Esc>"),n.doKeys("2","."),N("zzce",e.getValue()),n.assertCursorAt(0,1)},{value:"zzabcde"}),Y("._visual_>",function(e,t,n){e.setCursor(0,0),n.doKeys("V","j",">"),e.setCursor(2,0),n.doKeys("."),N("  1\n  2\n  3\n  4",e.getValue()),n.assertCursorAt(2,2)},{value:"1\n2\n3\n4"}),Y("f;",function(e,t,n){e.setCursor(0,0),n.doKeys("f","x"),n.doKeys(";"),n.doKeys("2",";"),N(9,e.getCursor().ch)},{value:"01x3xx678x"}),Y("F;",function(e,t,n){e.setCursor(0,8),n.doKeys("F","x"),n.doKeys(";"),n.doKeys("2",";"),N(2,e.getCursor().ch)},{value:"01x3xx6x8x"}),Y("t;",function(e,t,n){e.setCursor(0,0),n.doKeys("t","x"),n.doKeys(";"),n.doKeys("2",";"),N(8,e.getCursor().ch)},{value:"01x3xx678x"}),Y("T;",function(e,t,n){e.setCursor(0,9),n.doKeys("T","x"),n.doKeys(";"),n.doKeys("2",";"),N(2,e.getCursor().ch)},{value:"0xx3xx678x"}),Y("f,",function(e,t,n){e.setCursor(0,6),n.doKeys("f","x"),n.doKeys(","),n.doKeys("2",","),N(2,e.getCursor().ch)},{value:"01x3xx678x"}),Y("F,",function(e,t,n){e.setCursor(0,3),n.doKeys("F","x"),n.doKeys(","),n.doKeys("2",","),N(9,e.getCursor().ch)},{value:"01x3xx678x"}),Y("t,",function(e,t,n){e.setCursor(0,6),n.doKeys("t","x"),n.doKeys(","),n.doKeys("2",","),N(3,e.getCursor().ch)},{value:"01x3xx678x"}),Y("T,",function(e,t,n){e.setCursor(0,4),n.doKeys("T","x"),n.doKeys(","),n.doKeys("2",","),N(8,e.getCursor().ch)},{value:"01x3xx67xx"}),Y("fd,;",function(e,t,n){e.setCursor(0,0),n.doKeys("f","4"),e.setCursor(0,0),n.doKeys("d",";"),N("56789",e.getValue()),n.doKeys("u"),e.setCursor(0,9),n.doKeys("d",","),N("01239",e.getValue())},{value:"0123456789"}),Y("Fd,;",function(e,t,n){e.setCursor(0,9),n.doKeys("F","4"),e.setCursor(0,9),n.doKeys("d",";"),N("01239",e.getValue()),n.doKeys("u"),e.setCursor(0,0),n.doKeys("d",","),N("56789",e.getValue())},{value:"0123456789"}),Y("td,;",function(e,t,n){e.setCursor(0,0),n.doKeys("t","4"),e.setCursor(0,0),n.doKeys("d",";"),N("456789",e.getValue()),n.doKeys("u"),e.setCursor(0,9),n.doKeys("d",","),N("012349",e.getValue())},{value:"0123456789"}),Y("Td,;",function(e,t,n){e.setCursor(0,9),n.doKeys("T","4"),e.setCursor(0,9),n.doKeys("d",";"),N("012349",e.getValue()),n.doKeys("u"),e.setCursor(0,0),n.doKeys("d",","),N("456789",e.getValue())},{value:"0123456789"}),Y("fc,;",function(e,t,n){e.setCursor(0,0),n.doKeys("f","4"),e.setCursor(0,0),n.doKeys("c",";","<Esc>"),N("56789",e.getValue()),n.doKeys("u"),e.setCursor(0,9),n.doKeys("c",","),N("01239",e.getValue())},{value:"0123456789"}),Y("Fc,;",function(e,t,n){e.setCursor(0,9),n.doKeys("F","4"),e.setCursor(0,9),n.doKeys("c",";","<Esc>"),N("01239",e.getValue()),n.doKeys("u"),e.setCursor(0,0),n.doKeys("c",","),N("56789",e.getValue())},{value:"0123456789"}),Y("tc,;",function(e,t,n){e.setCursor(0,0),n.doKeys("t","4"),e.setCursor(0,0),n.doKeys("c",";","<Esc>"),N("456789",e.getValue()),n.doKeys("u"),e.setCursor(0,9),n.doKeys("c",","),N("012349",e.getValue())},{value:"0123456789"}),Y("Tc,;",function(e,t,n){e.setCursor(0,9),n.doKeys("T","4"),e.setCursor(0,9),n.doKeys("c",";","<Esc>"),N("012349",e.getValue()),n.doKeys("u"),e.setCursor(0,0),n.doKeys("c",","),N("456789",e.getValue())},{value:"0123456789"}),Y("fy,;",function(e,t,n){e.setCursor(0,0),n.doKeys("f","4"),e.setCursor(0,0),n.doKeys("y",";","P"),N("012340123456789",e.getValue()),n.doKeys("u"),e.setCursor(0,9),n.doKeys("y",",","P"),N("012345678456789",e.getValue())},{value:"0123456789"}),Y("Fy,;",function(e,t,n){e.setCursor(0,9),n.doKeys("F","4"),e.setCursor(0,9),n.doKeys("y",";","p"),N("012345678945678",e.getValue()),n.doKeys("u"),e.setCursor(0,0),n.doKeys("y",",","P"),N("012340123456789",e.getValue())},{value:"0123456789"}),Y("ty,;",function(e,t,n){e.setCursor(0,0),n.doKeys("t","4"),e.setCursor(0,0),n.doKeys("y",";","P"),N("01230123456789",e.getValue()),n.doKeys("u"),e.setCursor(0,9),n.doKeys("y",",","p"),N("01234567895678",e.getValue())},{value:"0123456789"}),Y("Ty,;",function(e,t,n){e.setCursor(0,9),n.doKeys("T","4"),e.setCursor(0,9),n.doKeys("y",";","p"),N("01234567895678",e.getValue()),n.doKeys("u"),e.setCursor(0,0),n.doKeys("y",",","P"),N("01230123456789",e.getValue())},{value:"0123456789"}),Y("HML",function(e,t,n){var r=35,i=e.defaultTextHeight();e.setSize(600,r*i),e.setCursor(120,0),e.refresh(),n.doKeys("H"),n.assertCursorAt(86,2),n.doKeys("L"),n.assertCursorAt(120,4),n.doKeys("M"),n.assertCursorAt(103,4)},{value:function(){var e=new Array(100),t="  xx\n",n="    xx\n";return t=e.join(t),n=e.join(n),t+n}()});var ut=[];G(["zb","zz","zt","z-","z.","z<CR>"],function(e,t){var n=250,r=35;Y(e,function(i,s,o){var u=e[0],a=e.substring(1),f=i.defaultTextHeight();i.setSize(600,r*f),i.setCursor(n,0),o.doKeys(u,a),ut[t]=i.getScrollInfo().top},{value:function(){return(new Array(500)).join("\n")}()})}),Y("zb<zz",function(e,t,n){N(ut[0]<ut[1],!0)}),Y("zz<zt",function(e,t,n){N(ut[1]<ut[2],!0)}),Y("zb==z-",function(e,t,n){N(ut[0],ut[3])}),Y("zz==z.",function(e,t,n){N(ut[1],ut[4])}),Y("zt==z<CR>",function(e,t,n){N(ut[2],ut[5])});var at="The quick brown fox \n";"jumped over the lazy dog.",Y("moveTillCharacter",function(e,t,n){e.setCursor(0,0),e.openDialog=n.fakeOpenDialog("q"),n.doKeys("/"),N(4,e.getCursor().ch),n.doKeys("t"),n.doKeys("o"),N("The quick brown fox \n",e.getValue()),n.doKeys("d"),n.doKeys("t"),n.doKeys("o"),N("The quick bown fox \n",e.getValue()),n.doKeys("."),N("The quick box \n",e.getValue()),n.doKeys("d"),n.doKeys("t"),n.doKeys("q"),N("The quick box \n",e.getValue()),n.doKeys("d"),n.doKeys("t"),n.doKeys("z"),N("The quick box \n",e.getValue()),n.doKeys("d"),n.doKeys("N"),N("The ox \n",e.getValue()),N(4,e.getCursor().ch)},{value:at}),Y("searchForPipe",function(e,t,n){d.Vim.setOption("pcre",!1),e.setCursor(0,0),e.openDialog=n.fakeOpenDialog("|"),n.doKeys("/"),N(4,e.getCursor().ch)},{value:"this|that"});var ft="\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n";"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",Y("scrollMotion",function(e,t,n){var r,i;e.setCursor(0,0),n.doKeys("<C-y>"),N(0,e.getCursor().line),i=e.getScrollInfo(),n.doKeys("<C-e>"),N(1,e.getCursor().line),C(i.top<e.getScrollInfo().top),e.setCursor(1e3,0),e.refresh(),r=e.getCursor(),n.doKeys("<C-e>"),N(r.line,e.getCursor().line),e.refresh(),i=e.getScrollInfo(),n.doKeys("<C-y>"),N(r.line-1,e.getCursor().line,"Y"),C(i.top>e.getScrollInfo().top)},{value:ft});var lt="({\n  ({\n  /*comment {\n            */(\n#else                \n  /*       )\n#if        }\n  )}*/\n)}\n{}\n#else {{\n{}\n}\n{\n#endif\n}\n}\n#else";Y("[[, ]]",function(e,t,n){e.setCursor(0,0),n.doKeys("]","]"),n.assertCursorAt(9,0),n.doKeys("2","]","]"),n.assertCursorAt(13,0),n.doKeys("]","]"),n.assertCursorAt(17,0),n.doKeys("[","["),n.assertCursorAt(13,0),n.doKeys("2","[","["),n.assertCursorAt(9,0),n.doKeys("[","["),n.assertCursorAt(0,0)},{value:lt}),Y("[], ][",function(e,t,n){e.setCursor(0,0),n.doKeys("]","["),n.assertCursorAt(12,0),n.doKeys("2","]","["),n.assertCursorAt(16,0),n.doKeys("]","["),n.assertCursorAt(17,0),n.doKeys("[","]"),n.assertCursorAt(16,0),n.doKeys("2","[","]"),n.assertCursorAt(12,0),n.doKeys("[","]"),n.assertCursorAt(0,0)},{value:lt}),Y("[{, ]}",function(e,t,n){e.setCursor(4,10),n.doKeys("[","{"),n.assertCursorAt(2,12),n.doKeys("2","[","{"),n.assertCursorAt(0,1),e.setCursor(4,10),n.doKeys("]","}"),n.assertCursorAt(6,11),n.doKeys("2","]","}"),n.assertCursorAt(8,1),e.setCursor(0,1),n.doKeys("]","}"),n.assertCursorAt(8,1),n.doKeys("[","{"),n.assertCursorAt(0,1)},{value:lt}),Y("[(, ])",function(e,t,n){e.setCursor(4,10),n.doKeys("[","("),n.assertCursorAt(3,14),n.doKeys("2","[","("),n.assertCursorAt(0,0),e.setCursor(4,10),n.doKeys("]",")"),n.assertCursorAt(5,11),n.doKeys("2","]",")"),n.assertCursorAt(8,0),n.doKeys("[","("),n.assertCursorAt(0,0),n.doKeys("]",")"),n.assertCursorAt(8,0)},{value:lt}),Y("[*, ]*, [/, ]/",function(e,t,n){G(["*","/"],function(t){e.setCursor(7,0),n.doKeys("2","[",t),n.assertCursorAt(2,2),n.doKeys("2","]",t),n.assertCursorAt(7,5)})},{value:lt}),Y("[#, ]#",function(e,t,n){e.setCursor(10,3),n.doKeys("2","[","#"),n.assertCursorAt(4,0),n.doKeys("5","]","#"),n.assertCursorAt(17,0),e.setCursor(10,3),n.doKeys("]","#"),n.assertCursorAt(14,0)},{value:lt}),Y("[m, ]m, [M, ]M",function(e,t,n){e.setCursor(11,0),n.doKeys("[","m"),n.assertCursorAt(10,7),n.doKeys("4","[","m"),n.assertCursorAt(1,3),n.doKeys("5","]","m"),n.assertCursorAt(11,0),n.doKeys("[","M"),n.assertCursorAt(9,1),n.doKeys("3","]","M"),n.assertCursorAt(15,0),n.doKeys("5","[","M"),n.assertCursorAt(7,3)},{value:lt}),Y("ex_go_to_line",function(e,t,n){e.setCursor(0,0),n.doEx("4"),n.assertCursorAt(3,0)},{value:"a\nb\nc\nd\ne\n"}),Y("ex_write",function(e,t,n){var r=d.commands.save,i,s;d.commands.save=function(e){i=!0,s=e};var o="write";for(var u=1;u<o.length;u++)i=!1,s=null,n.doEx(o.substring(0,u)),N(i,!0),N(s,e);d.commands.save=r}),Y("ex_sort",function(e,t,n){n.doEx("sort"),N("Z\na\nb\nc\nd",e.getValue())},{value:"b\nZ\nd\nc\na"}),Y("ex_sort_reverse",function(e,t,n){n.doEx("sort!"),N("d\nc\nb\na",e.getValue())},{value:"b\nd\nc\na"}),Y("ex_sort_range",function(e,t,n){n.doEx("2,3sort"),N("b\nc\nd\na",e.getValue())},{value:"b\nd\nc\na"}),Y("ex_sort_oneline",function(e,t,n){n.doEx("2sort"),N("b\nd\nc\na",e.getValue())},{value:"b\nd\nc\na"}),Y("ex_sort_ignoreCase",function(e,t,n){n.doEx("sort i"),N("a\nb\nc\nd\nZ",e.getValue())},{value:"b\nZ\nd\nc\na"}),Y("ex_sort_unique",function(e,t,n){n.doEx("sort u"),N("Z\na\nb\nc\nd",e.getValue())},{value:"b\nZ\na\na\nd\na\nc\na"}),Y("ex_sort_decimal",function(e,t,n){n.doEx("sort d"),N("d3\n s5\n6\n.9",e.getValue())},{value:"6\nd3\n s5\n.9"}),Y("ex_sort_decimal_negative",function(e,t,n){n.doEx("sort d"),N("z-9\nd3\n s5\n6\n.9",e.getValue())},{value:"6\nd3\n s5\n.9\nz-9"}),Y("ex_sort_decimal_reverse",function(e,t,n){n.doEx("sort! d"),N(".9\n6\n s5\nd3",e.getValue())},{value:"6\nd3\n s5\n.9"}),Y("ex_sort_hex",function(e,t,n){n.doEx("sort x"),N(" s5\n6\n.9\n&0xB\nd3",e.getValue())},{value:"6\nd3\n s5\n&0xB\n.9"}),Y("ex_sort_octal",function(e,t,n){n.doEx("sort o"),N(".8\n.9\nd3\n s5\n6",e.getValue())},{value:"6\nd3\n s5\n.9\n.8"}),Y("ex_sort_decimal_mixed",function(e,t,n){n.doEx("sort d"),N("y\nz\nc1\nb2\na3",e.getValue())},{value:"a3\nz\nc1\ny\nb2"}),Y("ex_sort_decimal_mixed_reverse",function(e,t,n){n.doEx("sort! d"),N("a3\nb2\nc1\nz\ny",e.getValue())},{value:"a3\nz\nc1\ny\nb2"}),Y("ex_global",function(e,t,n){e.setCursor(0,0),n.doEx("g/one/s//two"),N("two two\n two two\n two two",e.getValue()),n.doEx("1,2g/two/s//one"),N("one one\n one one\n two two",e.getValue())},{value:"one one\n one one\n one one"}),Y("ex_global_confirm",function(e,t,n){e.setCursor(0,0);var r,i=e.openDialog,s={a:65,n:78,q:81,y:89};e.openDialog=function(t,n,i){e.openDialog=function(e,t,n){r=n.onKeyDown},n("g/one/s//two/gc")},n.doKeys(":");var o=function(){};r({keyCode:s.n},"",o),r({keyCode:s.y},"",o),r({keyCode:s.a},"",o),r({keyCode:s.q},"",o),r({keyCode:s.y},"",o),N("one two\n two two\n one one\n two one\n one one",e.getValue())},{value:"one one\n one one\n one one\n one one\n one one"}),Y("ex_substitute_same_line",function(e,t,n){e.setCursor(1,0),n.doEx("s/one/two/g"),N("one one\n two two",e.getValue())},{value:"one one\n one one"}),Y("ex_substitute_full_file",function(e,t,n){e.setCursor(1,0),n.doEx("%s/one/two/g"),N("two two\n two two",e.getValue())},{value:"one one\n one one"}),Y("ex_substitute_input_range",function(e,t,n){e.setCursor(1,0),n.doEx("1,3s/\\d/0/g"),N("0\n0\n0\n4",e.getValue())},{value:"1\n2\n3\n4"}),Y("ex_substitute_visual_range",function(e,t,n){e.setCursor(1,0),n.doKeys("V","2","j","v"),n.doEx("'<,'>s/\\d/0/g"),N("1\n0\n0\n0\n5",e.getValue())},{value:"1\n2\n3\n4\n5"}),Y("ex_substitute_empty_query",function(e,t,n){e.setCursor(1,0),e.openDialog=n.fakeOpenDialog("1"),n.doKeys("/"),n.doEx("s//b/g"),N("abb ab2 ab3",e.getValue())},{value:"a11 a12 a13"}),Y("ex_substitute_javascript",function(e,t,n){d.Vim.setOption("pcre",!1),e.setCursor(1,0),n.doEx("s/\\(\\d+\\)/$$ $' $` $& \\1/g"),N("a $$ $' $` $& 0 b",e.getValue())},{value:"a 0 b"}),Y("ex_substitute_empty_arguments",function(e,t,n){e.setCursor(0,0),n.doEx("s/a/b/g"),e.setCursor(1,0),n.doEx("s"),N("b b\nb a",e.getValue())},{value:"a a\na a"}),ct("ex_substitute_capture",{value:"a11 a12 a13",expectedValue:"a1111 a1212 a1313",expr:"s/(\\d+)/$1$1/g",noPcreExpr:"s/\\(\\d+\\)/\\1\\1/g"}),ct("ex_substitute_capture2",{value:"a 0 b",expectedValue:"a $00 b",expr:"s/(\\d+)/$$$1$1/g",noPcreExpr:"s/\\(\\d+\\)/$\\1\\1/g"}),ct("ex_substitute_nocapture",{value:"a11 a12 a13",expectedValue:"a$1$1 a$1$1 a$1$1",expr:"s/(\\d+)/$$1$$1/g",noPcreExpr:"s/\\(\\d+\\)/$1$1/g"}),ct("ex_substitute_nocapture2",{value:"a 0 b",expectedValue:"a $10 b",expr:"s/(\\d+)/$$1$1/g",noPcreExpr:"s/\\(\\d+\\)/\\$1\\1/g"}),ct("ex_substitute_nocapture",{value:"a b c",expectedValue:"a $ c",expr:"s/b/$$/",noPcreExpr:"s/b/$/"}),ct("ex_substitute_slash_regex",{value:"one/two \n three/four",expectedValue:"one|two \n three|four",expr:"%s/\\//|"}),ct("ex_substitute_pipe_regex",{value:"one|two \n three|four",expectedValue:"one,two \n three,four",expr:"%s/\\|/,/",noPcreExpr:"%s/|/,/"}),ct("ex_substitute_or_regex",{value:"one|two \n three|four",expectedValue:"ana|twa \n thraa|faar",expr:"%s/o|e|u/a/g",noPcreExpr:"%s/o\\|e\\|u/a/g"}),ct("ex_substitute_or_word_regex",{value:"one|two \n three|four",expectedValue:"five|five \n three|four",expr:"%s/(one|two)/five/g",noPcreExpr:"%s/\\(one\\|two\\)/five/g"}),ct("ex_substitute_backslashslash_regex",{value:"one\\two \n three\\four",expectedValue:"one,two \n three,four",expr:"%s/\\\\/,"}),ct("ex_substitute_slash_replacement",{value:"one,two \n three,four",expectedValue:"one/two \n three/four",expr:"%s/,/\\/"}),ct("ex_substitute_backslash_replacement",{value:"one,two \n three,four",expectedValue:"one\\two \n three\\four",expr:"%s/,/\\\\/g"}),ct("ex_substitute_multibackslash_replacement",{value:"one,two \n three,four",expectedValue:"one\\\\\\\\two \n three\\\\\\\\four",expr:"%s/,/\\\\\\\\\\\\\\\\/g"}),ct("ex_substitute_braces_word",{value:"ababab abb ab{2}",expectedValue:"ab abb ab{2}",expr:"%s/(ab){2}//g",noPcreExpr:"%s/\\(ab\\)\\{2\\}//g"}),ct("ex_substitute_braces_range",{value:"a aa aaa aaaa",expectedValue:"a   a",expr:"%s/a{2,3}//g",noPcreExpr:"%s/a\\{2,3\\}//g"}),ct("ex_substitute_braces_literal",{value:"ababab abb ab{2}",expectedValue:"ababab abb ",expr:"%s/ab\\{2\\}//g",noPcreExpr:"%s/ab{2}//g"}),ct("ex_substitute_braces_char",{value:"ababab abb ab{2}",expectedValue:"ababab  ab{2}",expr:"%s/ab{2}//g",noPcreExpr:"%s/ab\\{2\\}//g"}),ct("ex_substitute_braces_no_escape",{value:"ababab abb ab{2}",expectedValue:"ababab  ab{2}",expr:"%s/ab{2}//g",noPcreExpr:"%s/ab\\{2}//g"}),ct("ex_substitute_count",{value:"1\n2\n3\n4",expectedValue:"1\n0\n0\n4",expr:"s/\\d/0/i 2"}),ct("ex_substitute_count_with_range",{value:"1\n2\n3\n4",expectedValue:"1\n2\n0\n0",expr:"1,3s/\\d/0/ 3"}),ct("ex_substitute_not_global",{value:"aaa\nbaa\ncaa",expectedValue:"xaa\nbxa\ncxa",expr:"%s/a/x/"}),ht("ex_substitute_confirm_emptydoc","%s/x/b/c","","","",nt(0,0)),ht("ex_substitute_confirm_nomatch","%s/x/b/c","ba a\nbab","ba a\nbab","",nt(0,0)),ht("ex_substitute_confirm_accept","%s/a/b/cg","ba a\nbab","bb b\nbbb","yyy",nt(1,1)),ht("ex_substitute_confirm_random_keys","%s/a/b/cg","ba a\nbab","bb b\nbbb","ysdkywerty",nt(1,1)),ht("ex_substitute_confirm_some","%s/a/b/cg","ba a\nbab","bb a\nbbb","yny",nt(1,1)),ht("ex_substitute_confirm_all","%s/a/b/cg","ba a\nbab","bb b\nbbb","a",nt(1,1)),ht("ex_substitute_confirm_accept_then_all","%s/a/b/cg","ba a\nbab","bb b\nbbb","ya",nt(1,1)),ht("ex_substitute_confirm_quit","%s/a/b/cg","ba a\nbab","bb a\nbab","yq",nt(0,3)),ht("ex_substitute_confirm_last","%s/a/b/cg","ba a\nbab","bb b\nbab","yl",nt(0,3)),ht("ex_substitute_confirm_oneline","1s/a/b/cg","ba a\nbab","bb b\nbab","yl",nt(0,3)),ht("ex_substitute_confirm_range_accept","1,2s/a/b/cg","aa\na \na\na","bb\nb \na\na","yyy",nt(1,0)),ht("ex_substitute_confirm_range_some","1,3s/a/b/cg","aa\na \na\na","ba\nb \nb\na","ynyy",nt(2,0)),ht("ex_substitute_confirm_range_all","1,3s/a/b/cg","aa\na \na\na","bb\nb \nb\na","a",nt(2,0)),ht("ex_substitute_confirm_range_last","1,3s/a/b/cg","aa\na \na\na","bb\nb \na\na","yyl",nt(1,0)),Y("ex_noh_clearSearchHighlight",function(e,t,n){e.openDialog=n.fakeOpenDialog("match"),n.doKeys("?"),n.doEx("noh"),N(t.searchState_.getOverlay(),null,"match-highlighting wasn't cleared"),n.doKeys("n"),n.assertCursorAt(0,11,"can't resume search after clearing highlighting")},{value:"match nope match \n nope Match"}),Y("set_boolean",function(e,t,n){d.Vim.defineOption("testoption",!0,"boolean"),C(d.Vim.getOption("testoption"));try{d.Vim.setOption("testoption","5"),fail()}catch(r){}d.Vim.setOption("testoption",!1),C(!d.Vim.getOption("testoption"))}),Y("ex_set_boolean",function(e,t,n){d.Vim.defineOption("testoption",!0,"boolean"),C(d.Vim.getOption("testoption"));try{n.doEx("set testoption=22"),fail()}catch(r){}n.doEx("set notestoption"),C(!d.Vim.getOption("testoption"))}),Y("set_string",function(e,t,n){d.Vim.defineOption("testoption","a","string"),N("a",d.Vim.getOption("testoption"));try{d.Vim.setOption("testoption",!0),fail()}catch(r){}try{d.Vim.setOption("notestoption","b"),fail()}catch(r){}d.Vim.setOption("testoption","c"),N("c",d.Vim.getOption("testoption"))}),Y("ex_set_string",function(e,t,n){d.Vim.defineOption("testoption","a","string"),N("a",d.Vim.getOption("testoption"));try{n.doEx("set notestoption=b"),fail()}catch(r){}n.doEx("set testoption=c"),N("c",d.Vim.getOption("testoption"))}),Y("ex_map_key2key",function(e,t,n){n.doEx("map a x"),n.doKeys("a"),n.assertCursorAt(0,0),N("bc",e.getValue())},{value:"abc"}),Y("ex_unmap_key2key",function(e,t,n){n.doEx("unmap a"),n.doKeys("a"),N("vim-insert",e.getOption("keyMap"))},{value:"abc"}),Y("ex_unmap_key2key_does_not_remove_default",function(e,t,n){try{n.doEx("unmap a"),fail()}catch(r){}n.doKeys("a"),N("vim-insert",e.getOption("keyMap"))},{value:"abc"}),Y("ex_map_key2key_to_colon",function(e,t,n){n.doEx("map ; :");var r=!1;e.openDialog=function(){r=!0},n.doKeys(";"),N(r,!0)}),Y("ex_map_ex2key:",function(e,t,n){n.doEx("map :del x"),n.doEx("del"),n.assertCursorAt(0,0),N("bc",e.getValue())},{value:"abc"}),Y("ex_map_ex2ex",function(e,t,n){n.doEx("map :del :w");var r=d.commands.save,i=!1,s;d.commands.save=function(e){i=!0,s=e},n.doEx("del"),d.commands.save=r,N(i,!0),N(s,e)}),Y("ex_map_key2ex",function(e,t,n){n.doEx("map a :w");var r=d.commands.save,i=!1,s;d.commands.save=function(e){i=!0,s=e},n.doKeys("a"),d.commands.save=r,N(i,!0),N(s,e)}),Y("ex_map_key2key_visual_api",function(e,t,n){d.Vim.map("b",":w","visual");var r=d.commands.save,i=!1,s;d.commands.save=function(e){i=!0,s=e},n.doKeys("b"),N(i,!1),n.doKeys("v","b"),N(i,!0),N(s,e),d.commands.save=r}),Y("ex_imap",function(e,t,n){d.Vim.map("jk","<Esc>","insert"),n.doKeys("i"),C(t.insertMode),n.doKeys("j","k"),C(!t.insertMode)}),Y("ex_api_test",function(e,t,n){var r=!1,i="from";d.Vim.defineEx("extest","ext",function(e,t){t.args?i=t.args[0]:r=!0}),n.doEx(":ext to"),N(i,"to","Defining ex-command failed"),d.Vim.map("<C-CR><Space>",":ext"),n.doKeys("<C-CR>","<Space>"),C(r,"Mapping to key failed")}),Y("ex_map_key2key_from_colon",function(e,t,n){n.doEx("map : x"),n.doKeys(":"),n.assertCursorAt(0,0),N("bc",e.getValue())},{value:"abc"}),Y("beforeSelectionChange",function(e,t,n){e.setCursor(0,100),T(e.getCursor("head"),e.getCursor("anchor"))},{value:"abc"})}),typeof module!="undefined"&&module===require.main&&require("asyncjs").test.testcase(module.exports).exec();