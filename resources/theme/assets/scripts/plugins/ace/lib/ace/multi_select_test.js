typeof process!="undefined"&&require("amd-loader"),define(["require","exports","module","./multi_select","./test/assertions","./range","./editor","./edit_session","./test/mockrenderer"],function(e,t,n){function c(e){var t=e.multiSelect.toJSON();return t.length||(t=[t]),t=t.map(function(e){var t,n;return e.isBackwards?(t=e.end,n=e.start):(n=e.end,t=e.start),i.comparePoints(t,n)?[t.row,t.column,n.row,n.column]:[t.row,t.column]}),t.length>1?t:t[0]}function h(e,t){r.equal(c(e)+"",t+"")}function p(e,t){typeof t[0]=="number"&&(t=[t]),e.selection.fromJSON(t.map(function(e){var t={row:e[0],column:e[1]},n=e.length==2?t:{row:e[2],column:e[3]},r=i.comparePoints(t,n)>0;return r?{start:n,end:t,isBackwards:!0}:{start:t,end:n,isBackwards:!0}}))}e("./multi_select");var r=e("./test/assertions"),i=e("./range").Range,s=e("./editor").Editor,o=e("./edit_session").EditSession,u=e("./test/mockrenderer").MockRenderer,a,f=function(e,t,n){do a.commands.exec(e,a,n);while(t-->1)},l=function(e){r.equal(a.selection.getAllRanges()+"",e+"")};n.exports={name:"ACE multi_select.js","test: multiselect editing":function(){var e=new o(["w1.w2","    wtt.w","    wtt.w"]);a=new s(new u,e),a.navigateFileEnd(),f("selectMoreBefore",3),r.ok(a.inMultiSelectMode),r.equal(a.selection.getAllRanges().length,4);var t=a.session.getDocument().getNewLineCharacter(),n="wwww".split("").join(t);r.equal(a.getCopyText(),n),f("insertstring",1,"a"),f("backspace",2),r.equal(a.session.getValue(),"w1.w2\ntt\ntt"),r.equal(a.selection.getAllRanges().length,4),f("selectall"),r.ok(!a.inMultiSelectMode)},"test: multiselect navigation":function(){var e=new o(["w1.w2","    wtt.w","    wtt.we"]);a=new s(new u,e),a.selectMoreLines(1),l("Range: [0/0] -> [0/0],Range: [1/0] -> [1/0]"),r.ok(a.inMultiSelectMode),f("golinedown"),f("gotolineend"),l("Range: [1/9] -> [1/9],Range: [2/10] -> [2/10]"),f("selectwordleft"),l("Range: [1/8] -> [1/9],Range: [2/8] -> [2/10]"),f("golinedown",2),r.ok(!a.inMultiSelectMode)},"test: multiselect session change":function(){var e=new o(["w1.w2","    wtt.w","    wtt.w"]);a=new s(new u,e),a.selectMoreLines(1),l("Range: [0/0] -> [0/0],Range: [1/0] -> [1/0]"),r.ok(a.inMultiSelectMode);var t=new o(["w1"]);a.setSession(t),r.ok(!a.inMultiSelectMode),a.setSession(e),r.ok(a.inMultiSelectMode)},"test: multiselect addRange":function(){var e=new o(["w1.w2","    wtt.w","    wtt.w"]);a=new s(new u,e);var t=a.selection,n=new i(0,2,0,4);a.selection.fromOrientedRange(n);var f=new i(0,3,0,4);t.addRange(f),r.ok(!a.inMultiSelectMode),r.ok(f.isEqual(a.selection.getRange()));var c=new i(0,1,0,1);t.addRange(c),r.ok(a.inMultiSelectMode),l([c,f]);var h=new i(0,0,4,0);t.addRange(h),r.ok(!a.inMultiSelectMode)},"test: onPaste in command with multiselect":function(){var e=new o(["l1","l2"]);a=new s(new u,e),a.commands.addCommand({name:"insertfoo",exec:function(e){e.onPaste("foo")},multiSelectAction:"forEach"});var t=a.selection,n=new i(0,2,0,2),f=new i(1,2,1,2);t.fromOrientedRange(n),t.addRange(f),a.execCommand("insertfoo"),r.equal("l1foo\nl2foo",a.getValue())},"test multiselect move lines":function(){a=new s(new u),a.setValue("l1\nl2\nl3\nl4",-1),p(a,[[0,2],[1,2],[2,2],[3,2]]),f("copylinesdown"),r.equal(a.getValue(),"l1\nl1\nl2\nl2\nl3\nl3\nl4\nl4"),h(a,[[1,2],[3,2],[5,2],[7,2]]),f("copylinesup"),r.equal(a.getValue(),"l1\nl1\nl1\nl2\nl2\nl2\nl3\nl3\nl3\nl4\nl4\nl4"),h(a,[[1,2],[4,2],[7,2],[10,2]]),f("removeline"),r.equal(a.getValue(),"l1\nl1\nl2\nl2\nl3\nl3\nl4\nl4"),h(a,[[1,0],[3,0],[5,0],[7,0]]),p(a,[[1,2],[1,0,1,1],[3,0,3,1],[5,0,5,1],[7,0,7,1]]),f("copylinesdown"),f("copylinesup"),r.equal(a.getValue(),"l1\nl1\nl1\nl1\nl2\nl2\nl2\nl2\nl3\nl3\nl3\nl3\nl4\nl4\nl4\nl4"),h(a,[[2,2],[2,0,2,1],[6,0,6,1],[10,0,10,1],[14,0,14,1]]),f("movelinesdown",12),r.equal(a.getValue(),"l1\nl1\nl1\nl2\nl2\nl2\nl3\nl3\nl3\nl4\nl4\nl4\nl1\nl2\nl3\nl4"),h(a,[[12,2],[12,0,12,1],[13,0,13,1],[14,0,14,1],[15,0,15,1]]),f("movelinesup",12),r.equal(a.getValue(),"l1\nl2\nl3\nl4\nl1\nl1\nl1\nl2\nl2\nl2\nl3\nl3\nl3\nl4\nl4\nl4"),h(a,[[0,2],[0,0,0,1],[1,0,1,1],[2,0,2,1],[3,0,3,1]])},"test multiselect fromJSON/toJSON":function(){var e=new o(["l1","l2"]);a=new s(new u,e);var t=a.selection,n=t.toJSON(),f=new i(0,2,0,2),l=new i(1,2,1,2);t.fromOrientedRange(f),t.addRange(l);var c=t.toJSON();t.fromJSON(n),r.ok(!t.isEqual(c)),r.ok(t.isEqual(n)),t.fromJSON(c),r.ok(!t.isEqual(n)),r.ok(t.isEqual(c))}}}),typeof module!="undefined"&&module===require.main&&require("asyncjs").test.testcase(module.exports).exec();