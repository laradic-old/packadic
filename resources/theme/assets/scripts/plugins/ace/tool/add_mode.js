function main(e,t){var n=lib.snakeCase(e).replace(/[^\w]/g,""),r=t.split("|")[0]||n,i=r[0]=="^"?r.substr(1):n+"."+r,s=lib.AceRoot+"demo/kitchen-sink/docs/"+i;fs.writeFileSync(s,"TODO add a nice demo!\nTry to keep it short!","utf8"),console.log("Created demo file at: "+path.normalize(s));var o=fs.readFileSync(__dirname+"/templates/mode.js","utf8"),u=lib.AceLib+"ace/mode/"+n+".js",a=lib.fillTemplate(o,{languageHighlightFilename:n,languagename:n,lineCommentStart:"TODO",blockCommentStart:"TODO",blockCommentEnd:"TODO"});fs.writeFileSync(u,a),console.log("Created mode file at: "+path.normalize(u)),o=fs.readFileSync(__dirname+"/templates/highlight_rules.js","utf8");var f=lib.AceLib+"ace/mode/"+n+"_highlight_rules.js";o=o.replace(/\/\* THIS[\s\S]*?\*{3}\/\s*/,""),a=lib.fillTemplate(o,{language:n,languageTokens:'{\n            start: [{\n                token: "string.start",\n                regex: \'"\',\n                next: "qstring"\n            }],\n            qstring: [{\n                token: "escape",\n                regex: /\\\\./,\n            }, {\n                token: "string.end",\n                regex: \'"\',\n                next: "start"\n            }],\n        }'}),fs.writeFileSync(f,a),console.log("Created mode file at: "+path.normalize(f)),o=fs.readFileSync(__dirname+"/templates/snippets.js","utf8");var l=lib.AceLib+"ace/snippets/"+n+".js";a=lib.fillTemplate(o,{languagename:n,snippets:""}),fs.writeFileSync(l,a),console.log("Created snippets file at: "+path.normalize(l));var c=lib.AceLib+"ace/ext/modelist.js",h=fs.readFileSync(c,"utf8").replace(/\r\n?/g,"\n");h=h.replace(/(supportedModes = {\n)([\s\S]*?)(\n^};)/m,function(n,r,i,s){var o=i.split(/,\n/),u=o[0].trim().indexOf("["),a=Array(Math.max(u-e.length-1,0)+1).join(" "),f="    "+e+":"+a+'["'+t+'"]';return o=o.concat(f).map(function(e){return{value:e,id:e.match(/[^"':\s]+/)[0].toLowerCase()}}),o[o.length-1].isNew=!0,o=o.filter(function(t){return console.log(t.id,e),t.id!=e.toLowerCase()||t.isNew}),o=o.sort(function(e,t){return e.id.localeCompare(t.id)}).map(function(e){return e.value}),r+o.join(",\n")+s}),fs.writeFileSync(c,h,"utf8"),console.log("Updated modelist at: "+path.normalize(c))}var fs=require("fs"),lib=require("./lib"),path=require("path");if(!module.parent){var args=process.argv.slice(2),displayName=args[0],extRe=args[1];if(!displayName||!extRe)console.log("Usage: ModeName ext1|ext2"),process.exit(1)}else module.exports=main;