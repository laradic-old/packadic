var plist=require("plist"),util=require("util"),url=require("url"),https=require("https"),http=require("http");exports.parsePlist=function(e,t){var n;return e[0]=="<"?plist.parseString(e,function(e,t){n=t[0]}):(e=e.replace(/^\s*\/\/.*/gm,""),n=JSON.parse(e)),t&&t(n),n},exports.formatJSON=function(e,t){return util.inspect(e,!1,40).replace(/^/gm,t||"")},exports.fillTemplate=function(e,t){return e.replace(/%(.+?)%/g,function(e,n){return t[n]||""})},exports.hyphenate=function(e){return e.replace(/([A-Z])/g,"-$1").replace(/[_\s\-]+/g,"-").toLowerCase()},exports.camelCase=function(e){return e.replace(/[\-_\s]+(.?)/g,function(e,t){return t.toUpperCase()})},exports.snakeCase=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s\-]+/g,"_").toLowerCase()},exports.quoteString=function(e){return'"'+e.replace(/\\/,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\\n")+'"'},exports.restoreJSONComments=function(e){return e.replace(/^(\s*)comment: '(.*)'/gm,function(e,t,n){return t+"//"+n.replace(/\\n(\\t)*/g,"\n"+t+"//")+"\n"+t}).replace(/ \/\/ ERROR/g,'", // ERROR')},exports.download=function(e,t){var n=url.parse(e),r=n.protocol==="https:"?https:http;console.log("connecting to "+n.host+" "+n.path);var i=r.get(n,function(e){var n="";e.setEncoding("utf-8"),e.on("data",function(e){n+=e}),e.on("end",function(){t(n)})})},exports.AceRoot=__dirname+"/../",exports.AceLib=__dirname+"/../lib/";