define(["require","exports","module","ace/lib/dom","ace/range","ace/lib/oop","ace/lib/dom","ace/range","ace/editor","ace/test/asyncjs/assert","ace/test/asyncjs/async","ace/undomanager","ace/edit_session","ace/test/mockrenderer","ace/lib/event_emitter"],function(e,t,n){function s(){var e=(new Error).stack||"";e=e.split("\n"),e[1]=="Error"&&e.shift(),e.shift(),e.shift(),e=e.join("\n"),/at Object.InjectedScript.|@debugger eval|snippets:\/{3}/.test(e)||console.error("trying to access to global variable")}function o(e,t,n){try{Object.defineProperty(e,t,{configurable:!0,get:n,set:function(n){delete e[t],e[t]=n}})}catch(r){console.error(r)}}function u(e){var t=e.multiSelect.toJSON();return t.length||(t=[t]),t=t.map(function(e){var t,n;return e.isBackwards?(t=e.end,n=e.start):(n=e.end,t=e.start),i.comparePoints(t,n)?[t.row,t.column,n.row,n.column]:[t.row,t.column]}),t.length>1?t:t[0]}function a(e,t){typeof t[0]=="number"&&(t=[t]),e.selection.fromJSON(t.map(function(e){var t={row:e[0],column:e[1]},n=e.length==2?t:{row:e[2],column:e[3]},r=i.comparePoints(t,n)>0;return r?{start:n,end:t,isBackwards:!0}:{start:t,end:n,isBackwards:!0}}))}function f(e,t){assert.equal(u(e)+"",t+"")}var r=e("ace/lib/dom"),i=e("ace/range").Range;o(window,"ace",function(){return s(),window.env.editor}),o(window,"editor",function(){return s(),window.env.editor}),o(window,"session",function(){return s(),window.env.editor.session}),o(window,"split",function(){return s(),window.env.split}),o(window,"devUtil",function(){return s(),t}),t.showTextArea=function(e){r.importCssString("      .ace_text-input {        position: absolute;        z-index: 10!important;        width: 6em!important;        height: 1em;        opacity: 1!important;        background: rgba(0, 92, 255, 0.11);        border: none;        font: inherit;        padding: 0 1px;        margin: 0 -1px;        text-indent: 0em;    }    ")},t.addGlobals=function(){window.oop=e("ace/lib/oop"),window.dom=e("ace/lib/dom"),window.Range=e("ace/range").Range,window.Editor=e("ace/editor").Editor,window.assert=e("ace/test/asyncjs/assert"),window.asyncjs=e("ace/test/asyncjs/async"),window.UndoManager=e("ace/undomanager").UndoManager,window.EditSession=e("ace/edit_session").EditSession,window.MockRenderer=e("ace/test/mockrenderer").MockRenderer,window.EventEmitter=e("ace/lib/event_emitter").EventEmitter,window.getSelection=u,window.setSelection=a,window.testSelection=f},t.recordTestCase=function(){t.addGlobals();var e=window.editor,n=window.testcase=[],r;n.push({type:"setValue",data:e.getValue()},{type:"setSelection",data:u(e)}),e.commands.on("afterExec",function(t){n.push({type:"exec",data:t}),n.push({type:"value",data:e.getValue()}),n.push({type:"selection",data:u(e)})}),e.on("mouseup",function(){n.push({type:"setSelection",data:u(e)})}),n.toString=function(){var e="",t=this.map(function(t){var n=t.data;switch(t.type){case"exec":return'editor.execCommand("'+n.command.name+(n.args?'", '+JSON.stringify(n.args):'"')+")";case"setSelection":return"setSelection(editor, "+JSON.stringify(n)+")";case"setValue":if(e!=n)return e=n,"editor.setValue("+JSON.stringify(n)+", -1)";return;case"selection":return"testSelection(editor, "+JSON.stringify(n)+")";case"value":if(e!=n)return e=n,"assert.equal(editor.getValue(),"+JSON.stringify(n)+")";return}}).filter(Boolean).join("\n");return u+"\n"+f+"\n"+a+"\n"+"\n"+t+"\n"}}});