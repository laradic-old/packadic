var browserify=require("browserify"),watchify=require("watchify"),bundleLogger=require("../util/bundleLogger"),gulp=require("gulp"),handleErrors=require("../util/handleErrors"),source=require("vinyl-source-stream"),config=require("../config").browserify;gulp.task("browserify",function(e){var t=config.bundleConfigs.length,n=function(n){var r=browserify({cache:{},packageCache:{},fullPaths:!1,entries:n.entries,extensions:config.extensions,debug:config.debug}),i=function(){return bundleLogger.start(n.outputName),r.bundle().on("error",handleErrors).pipe(source(n.outputName)).pipe(gulp.dest(n.dest)).on("end",s)};global.isWatching&&(r=watchify(r),r.on("update",i));var s=function(){bundleLogger.end(n.outputName),t&&(t--,t===0&&e())};return i()};config.bundleConfigs.forEach(n)});