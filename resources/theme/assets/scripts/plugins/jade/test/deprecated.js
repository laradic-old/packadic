function deprecate(e,t,n){it(e,function(){var r=console.error,i=console.warn,s="";console.warn=function(e){s+=e},console.error=function(e){s+=e};try{t(),n=n||new RegExp(e+" is deprecated and will be removed in v2.0.0"),assert(n.test(s),"Expected "+JSON.stringify(s)+" to match "+util.inspect(n))}catch(o){throw console.error=r,console.warn=i,o}console.error=r,console.warn=i})}var assert=require("assert"),util=require("util"),jade=require("../");describe("deprecated functions",function(){deprecate("tag.clone",function(){var e=new jade.nodes.Tag;e.clone()}),deprecate("node.clone",function(){var e=new jade.nodes.Code("var x = 10");e.clone()}),deprecate("block.clone",function(){var e=new jade.nodes.Block(new jade.nodes.Code("var x = 10"));e.clone()}),deprecate("block.replace",function(){var e=new jade.nodes.Block(new jade.nodes.Code("var x = 10"));e.replace({})}),deprecate("attrs.removeAttribute",function(){var e=new jade.nodes.Tag("a");e.setAttribute("foo","value"),e.removeAttribute("href"),assert(!e.getAttribute("href")),e.setAttribute("href","value"),e.removeAttribute("href"),assert(!e.getAttribute("href"))}),deprecate("attrs.getAttribute",function(){var e=new jade.nodes.Tag("a");e.setAttribute("href","value"),assert(e.getAttribute("href")==="value")})}),describe("deprecated options or local names",function(){deprecate("jade.compile(str, {client: true})",function(){var e=jade.compile("div",{client:!0}),e=Function("jade",e.toString()+"\nreturn template;")(jade.runtime);assert(e()==="<div></div>")},/The `client` option is deprecated/),deprecate("jade.render(str, {lexer: 'this is a local'})",function(){var e=jade.render("div",{lexer:"this is a local"});assert(e==="<div></div>")},/Using `lexer` as a local in render\(\) is deprecated/)}),describe("warnings that will become errors",function(){deprecate("block that is never actually used",function(){jade.renderFile(__dirname+"/fixtures/invalid-block-in-extends.jade")},/Warning\: Unexpected block .* on line.*of.*This warning will be an error in v2\.0\.0/)});