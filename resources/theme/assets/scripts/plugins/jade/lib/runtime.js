function nulls(e){return e!=null&&e!==""}function joinClasses(e){return(Array.isArray(e)?e.map(joinClasses):e&&typeof e=="object"?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(nulls).join(" ")}exports.merge=function e(t,n){if(arguments.length===1){var r=t[0];for(var i=1;i<t.length;i++)r=e(r,t[i]);return r}var s=t["class"],o=n["class"];if(s||o)s=s||[],o=o||[],Array.isArray(s)||(s=[s]),Array.isArray(o)||(o=[o]),t["class"]=s.concat(o).filter(nulls);for(var u in n)u!="class"&&(t[u]=n[u]);return t},exports.joinClasses=joinClasses,exports.cls=function(t,n){var r=[];for(var i=0;i<t.length;i++)n&&n[i]?r.push(exports.escape(joinClasses([t[i]]))):r.push(joinClasses(t[i]));var s=joinClasses(r);return s.length?' class="'+s+'"':""},exports.style=function(e){return e&&typeof e=="object"?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},exports.attr=function(t,n,r,i){return t==="style"&&(n=exports.style(n)),"boolean"==typeof n||null==n?n?" "+(i?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof n?(JSON.stringify(n).indexOf("&")!==-1&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),n&&typeof n.toISOString=="function"&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+t+"='"+JSON.stringify(n).replace(/'/g,"&apos;")+"'"):r?(n&&typeof n.toISOString=="function"&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+exports.escape(n)+'"'):(n&&typeof n.toISOString=="function"&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+n+'"')},exports.attrs=function(t,n){var r=[],i=Object.keys(t);if(i.length)for(var s=0;s<i.length;++s){var o=i[s],u=t[o];"class"==o?(u=joinClasses(u))&&r.push(" "+o+'="'+u+'"'):r.push(exports.attr(o,u,!1,n))}return r.join("")},exports.escape=function(t){var n=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return n===""+t?t:n},exports.rethrow=function t(e,n,r,i){if(e instanceof Error){if((typeof window!="undefined"||!n)&&!i)throw e.message+=" on line "+r,e;try{i=i||require("fs").readFileSync(n,"utf8")}catch(s){t(e,null,r)}var o=3,u=i.split("\n"),a=Math.max(r-o,0),f=Math.min(u.length,r+o),o=u.slice(a,f).map(function(e,t){var n=t+a+1;return(n==r?"  > ":"    ")+n+"| "+e}).join("\n");throw e.path=n,e.message=(n||"Jade")+":"+r+"\n"+o+"\n\n"+e.message,e}throw e};