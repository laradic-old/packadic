var makeString=require("./helper/makeString"),rtrim=require("./rtrim");module.exports=function(t,n,r){t=makeString(t),n=~~n,r=r!=null?String(r):"...";if(t.length<=n)return t;var i=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},s=t.slice(0,n+1).replace(/.(?=\W*\w*$)/g,i);return s.slice(s.length-2).match(/\w\w/)?s=s.replace(/\s*\S+$/,""):s=rtrim(s.slice(0,s.length-1)),(s+r).length>t.length?t:t.slice(0,s.length)+r};