var _clientConstructor=function(e){var t=this;t.id=""+_clientIdCounter++,_clientMeta[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),ZeroClipboard.on("*",function(e){return t.emit(e)}),ZeroClipboard.on("destroy",function(){t.destroy()}),ZeroClipboard.create()},_clientOn=function(e,t){var n,r,i,s={},o=_clientMeta[this.id]&&_clientMeta[this.id].handlers;if(typeof e=="string"&&e)i=e.toLowerCase().split(/\s+/);else if(typeof e=="object"&&e&&typeof t=="undefined")for(n in e)_hasOwn.call(e,n)&&typeof n=="string"&&n&&typeof e[n]=="function"&&this.on(n,e[n]);if(i&&i.length){for(n=0,r=i.length;n<r;n++)e=i[n].replace(/^on/,""),s[e]=!0,o[e]||(o[e]=[]),o[e].push(t);s.ready&&_flashState.ready&&this.emit({type:"ready",client:this});if(s.error){var u=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,r=u.length;n<r;n++)if(_flashState[u[n]]){this.emit({type:"error",name:"flash-"+u[n],client:this});break}}}return this},_clientOff=function(e,t){var n,r,i,s,o,u=_clientMeta[this.id]&&_clientMeta[this.id].handlers;if(arguments.length===0)s=_keys(u);else if(typeof e=="string"&&e)s=e.split(/\s+/);else if(typeof e=="object"&&e&&typeof t=="undefined")for(n in e)_hasOwn.call(e,n)&&typeof n=="string"&&n&&typeof e[n]=="function"&&this.off(n,e[n]);if(s&&s.length)for(n=0,r=s.length;n<r;n++){e=s[n].toLowerCase().replace(/^on/,""),o=u[e];if(o&&o.length)if(t){i=o.indexOf(t);while(i!==-1)o.splice(i,1),i=o.indexOf(t,i)}else o.length=0}return this},_clientListeners=function(e){var t=null,n=_clientMeta[this.id]&&_clientMeta[this.id].handlers;return n&&(typeof e=="string"&&e?t=n[e]?n[e].slice(0):[]:t=_deepCopy(n)),t},_clientEmit=function(e){if(_clientShouldEmit.call(this,e)){typeof e=="object"&&e&&typeof e.type=="string"&&e.type&&(e=_extend({},e));var t=_extend({},_createEvent(e),{client:this});_clientDispatchCallbacks.call(this,t)}return this},_clientClip=function(e){e=_prepClip(e);for(var t=0;t<e.length;t++)if(_hasOwn.call(e,t)&&e[t]&&e[t].nodeType===1){e[t].zcClippingId?_elementMeta[e[t].zcClippingId].indexOf(this.id)===-1&&_elementMeta[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+_elementIdCounter++,_elementMeta[e[t].zcClippingId]=[this.id],_globalConfig.autoActivate===!0&&_addMouseHandlers(e[t]));var n=_clientMeta[this.id]&&_clientMeta[this.id].elements;n.indexOf(e[t])===-1&&n.push(e[t])}return this},_clientUnclip=function(e){var t=_clientMeta[this.id];if(!t)return this;var n=t.elements,r;typeof e=="undefined"?e=n.slice(0):e=_prepClip(e);for(var i=e.length;i--;)if(_hasOwn.call(e,i)&&e[i]&&e[i].nodeType===1){r=0;while((r=n.indexOf(e[i],r))!==-1)n.splice(r,1);var s=_elementMeta[e[i].zcClippingId];if(s){r=0;while((r=s.indexOf(this.id,r))!==-1)s.splice(r,1);s.length===0&&(_globalConfig.autoActivate===!0&&_removeMouseHandlers(e[i]),delete e[i].zcClippingId)}}return this},_clientElements=function(){var e=_clientMeta[this.id];return e&&e.elements?e.elements.slice(0):[]},_clientDestroy=function(){this.unclip(),this.off(),delete _clientMeta[this.id]},_clientShouldEmit=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=_clientMeta[this.id]&&_clientMeta[this.id].elements,n=!!t&&t.length>0,r=!e.target||n&&t.indexOf(e.target)!==-1,i=e.relatedTarget&&n&&t.indexOf(e.relatedTarget)!==-1,s=e.client&&e.client===this;return r||i||s?!0:!1},_clientDispatchCallbacks=function(e){if(typeof e!="object"||!e||!e.type)return;var t=_shouldPerformAsync(e),n=_clientMeta[this.id]&&_clientMeta[this.id].handlers["*"]||[],r=_clientMeta[this.id]&&_clientMeta[this.id].handlers[e.type]||[],i=n.concat(r);if(i&&i.length){var s,o,u,a,f,l=this;for(s=0,o=i.length;s<o;s++)u=i[s],a=l,typeof u=="string"&&typeof _window[u]=="function"&&(u=_window[u]),typeof u=="object"&&u&&typeof u.handleEvent=="function"&&(a=u,u=u.handleEvent),typeof u=="function"&&(f=_extend({},e),_dispatchCallback(u,a,[f],t))}return this},_prepClip=function(e){return typeof e=="string"&&(e=[]),typeof e.length!="number"?[e]:e},_addMouseHandlers=function(e){if(!e||e.nodeType!==1)return;var t=function(e){if(!e&&!(e=_window.event))return;e._source!=="js"&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source},n=function(n){if(!n&&!(n=_window.event))return;t(n),ZeroClipboard.focus(e)};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),_mouseHandlers[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}},_removeMouseHandlers=function(e){if(!e||e.nodeType!==1)return;var t=_mouseHandlers[e.zcClippingId];if(typeof t!="object"||!t)return;var n,r,i=["move","leave","enter","out","over"];for(var s=0,o=i.length;s<o;s++)n="mouse"+i[s],r=t[n],typeof r=="function"&&e.removeEventListener(n,r,!1);delete _mouseHandlers[e.zcClippingId]};