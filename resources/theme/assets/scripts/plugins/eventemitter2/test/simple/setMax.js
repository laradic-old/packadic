var simpleEvents=require("nodeunit").testCase,file="../../lib/eventemitter2",EventEmitter2;typeof require!="undefined"?EventEmitter2=require(file).EventEmitter2:EventEmitter2=window.EventEmitter2,module.exports=simpleEvents({"setMaxListener1. default behavior of 10 listeners.":function(e){var t=new EventEmitter2;for(var n=0;n<10;n++)t.on("foobar",function(){e.ok(!0,"event was raised")});var r=t.listeners("foobar");e.equal(r.length,10,"should only have 10"),e.expect(1),e.done()},"setMaxListener2. If we added more than 10, should not see them":function(e){var t=new EventEmitter2;for(var n=0;n<10;n++)t.on("foobar2",function(){e.ok(!0,"event was raised")});console.log("should see EE2 complaining:"),t.on("foobar2",function(){e.ok(!0,"event was raised")});var r=t.listeners("foobar2");e.equal(r.length,11,"should have 11"),e.ok(t._events.foobar2.warned,"should have been warned"),e.expect(2),e.done()},"setMaxListener3. if we set maxListener to be greater before adding":function(e){var t=new EventEmitter2,n="foobar3";t.setMaxListeners(20);for(var r=0;r<15;r++)t.on(n,function(){e.ok(!0,"event was raised")});var i=t.listeners(n);e.equal(i.length,15,"should have 15"),e.ok(!t._events[n].warned,"should not have been set"),e.expect(2),e.done()},"setMaxListener4. should be able to change it right at 10":function(e){var t=new EventEmitter2,n="foobar4";for(var r=0;r<10;r++)t.on(n,function(){e.ok(!0,"event was raised")});t.setMaxListeners(9001),t.on(n,function(){e.ok(!0,"event was raised")});var i=t.listeners(n);e.equal(i.length,11,"should have 11"),e.ok(!t._events[n].warned,"should not have been set"),e.expect(2),e.done()},"setMaxListener5. if we set maxListener to be 0 should add endlessly":function(e){var t=new EventEmitter2,n="foobar";t.setMaxListeners(0);for(var r=0;r<25;r++)t.on(n,function(){e.ok(!0,"event was raised")});var i=t.listeners(n);e.equal(i.length,25,"should have 25"),e.ok(!t._events[n].warned,"should not have been set"),e.expect(2),e.done()},"maxListeners parameter. Passing maxListeners as a parameter should override default.":function(e){var t=new EventEmitter2({maxListeners:2});console.log(t,e.equal,e.ok),t.on("a",function(){}),t.on("a",function(){}),t.on("a",function(){}),e.ok(t._events.a.warned,".on() should warn when maxListeners is exceeded."),e.done()}});