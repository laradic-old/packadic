var simpleEvents=require("nodeunit").testCase,file="../../lib/eventemitter2",EventEmitter2;typeof require!="undefined"?EventEmitter2=require(file).EventEmitter2:EventEmitter2=window.EventEmitter2,module.exports=simpleEvents({"1. A listener added with `once` should only listen once and then be removed.":function(e){var t=new EventEmitter2({wildcard:!0,verbose:!0}),n="test1.foo.bar";t.once(n,function(){e.ok(!0,"The event was raised once")}),t.emit(n),t.emit(n),e.expect(1),e.done()},"2. A listener with a TTL of 4 should only listen 4 times.":function(e){var t=new EventEmitter2({wildcard:!0,verbose:!0}),n="test1.foo.bar";t.many(n,4,function(t){e.ok(!0,"The event was raised 4 times.")}),t.emit(n,1),t.emit(n,2),t.emit(n,3),t.emit(n,4),t.emit(n,5),e.expect(4),e.done()},"3. A listener with a TTL of 4 should only listen 4 times and pass parameters.":function(e){var t=new EventEmitter2({wildcard:!0,verbose:!0}),n="test1.foo.bar";t.many(n,4,function(t,n,r){e.ok(typeof t!="undefined","got value 1"),e.ok(typeof n!="undefined","got value 2"),e.ok(typeof r!="undefined","got value 3")}),t.emit(n,1,"A",!1),t.emit(n,2,"A",!1),t.emit(n,3,"A",!1),t.emit(n,4,"A",!1),t.emit(n,5,"A",!1),e.done()},"4. Remove an event listener by signature.":function(e){function i(t){"event A";e.ok(!0,"The event was raised less than 3 times.")}function s(t){"event B";e.ok(!0,"The event was raised less than 3 times.")}function o(t){"event C";e.ok(!0,"The event was raised less than 3 times.")}var t=new EventEmitter2({wildcard:!0,verbose:!0}),n="test1.foo.bar",r=0;t.on(n,i),t.on(n,s),t.on(n,o),t.removeListener(n,s),t.emit(n),e.expect(2),e.done()},"5. `removeListener` and `once`":function(e){var t=new EventEmitter2({wildcard:!0,verbose:!0}),n="test1.foo.bar",r=function(){e.ok(!0,"Event was fired")};t.once(n,r),t.removeListener(n,r),t.emit(n),e.expect(0),e.done()},"6. Listening with a wildcard on once":function(e){var t=new EventEmitter2({wildcard:!0,verbose:!0}),n="test1.foo.*",r=function(){e.ok(!0,"Event was fired")};t.once(n,r),t.on(n,r),t.emit(n),t.emit(n),e.expect(3),e.done()},"7. Emitting with a wildcard targeted at once":function(e){var t=new EventEmitter2({wildcard:!0,verbose:!0}),n="test1.foo.bar",r="test1.foo.*",i=function(){e.ok(!0,"Event was fired")};t.once(n,i),t.emit(r),t.emit(r),e.expect(1),e.done()},"8. Emitting with a multi-level wildcard on once":function(e){var t=new EventEmitter2({wildcard:!0,verbose:!0}),n=0,r="test1.**",i=function(t){return function(){console.log(t,this.event),e.ok(!0,"Event was fired")}};t.once(r,i(n++)),t.on(r,i(n++)),t.emit(r),t.emit(r),e.expect(3),e.done()},"9. Emitting with a multi-level wildcard targeted at once":function(e){var t=new EventEmitter2({wildcard:!0,verbose:!0}),n="test1.foo.bar",r="test1.**",i=function(){e.ok(!0,"Event was fired")};t.once(n,i),t.emit(r),t.emit(r),e.expect(1),e.done()}});