(function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){e.defineMode("jinja2",function(){function s(s,o){var u=s.peek();if(o.incomment)return s.skipTo("#}")?(s.eatWhile(/\#|}/),o.incomment=!1):s.skipToEnd(),"comment";if(o.intag){if(o.operator){o.operator=!1;if(s.match(r))return"atom";if(s.match(i))return"number"}if(o.sign){o.sign=!1;if(s.match(r))return"atom";if(s.match(i))return"number"}if(o.instring)return u==o.instring&&(o.instring=!1),s.next(),"string";if(u=="'"||u=='"')return o.instring=u,s.next(),"string";if(s.match(o.intag+"}")||s.eat("-")&&s.match(o.intag+"}"))return o.intag=!1,"tag";if(s.match(t))return o.operator=!0,"operator";if(s.match(n))o.sign=!0;else if(s.eat(" ")||s.sol()){if(s.match(e))return"keyword";if(s.match(r))return"atom";if(s.match(i))return"number";s.sol()&&s.next()}else s.next();return"variable"}if(s.eat("{")){if(u=s.eat("#"))return o.incomment=!0,s.skipTo("#}")?(s.eatWhile(/\#|}/),o.incomment=!1):s.skipToEnd(),"comment";if(u=s.eat(/\{|%/))return o.intag=u,u=="{"&&(o.intag="}"),s.eat("-"),"tag"}s.next()}var e=["and","as","block","endblock","by","cycle","debug","else","elif","extends","filter","endfilter","firstof","for","endfor","if","endif","ifchanged","endifchanged","ifequal","endifequal","ifnotequal","endifnotequal","in","include","load","not","now","or","parsed","regroup","reversed","spaceless","endspaceless","ssi","templatetag","openblock","closeblock","openvariable","closevariable","openbrace","closebrace","opencomment","closecomment","widthratio","url","with","endwith","get_current_language","trans","endtrans","noop","blocktrans","endblocktrans","get_available_languages","get_current_language_bidi","plural"],t=/^[+\-*&%=<>!?|~^]/,n=/^[:\[\(\{]/,r=["true","false"],i=/^(\d[+\-\*\/])?\d+(\.\d+)?/;return e=new RegExp("(("+e.join(")|(")+"))\\b"),r=new RegExp("(("+r.join(")|(")+"))\\b"),{startState:function(){return{tokenize:s}},token:function(e,t){return t.tokenize(e,t)}}})});