(function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){e.defineMode("commonlisp",function(e){function o(e){var t;while(t=e.next())if(t=="\\")e.next();else if(!i.test(t)){e.backUp(1);break}return e.current()}function u(e,i){if(e.eatSpace())return s="ws",null;if(e.match(r))return"number";var u=e.next();u=="\\"&&(u=e.next());if(u=='"')return(i.tokenize=a)(e,i);if(u=="(")return s="open","bracket";if(u==")"||u=="]")return s="close","bracket";if(u==";")return e.skipToEnd(),s="ws","comment";if(/['`,@]/.test(u))return null;if(u=="|")return e.skipTo("|")?(e.next(),"symbol"):(e.skipToEnd(),"error");if(u=="#"){var u=e.next();return u=="["?(s="open","bracket"):/[+\-=\.']/.test(u)?null:/\d/.test(u)&&e.match(/^\d*#/)?null:u=="|"?(i.tokenize=f)(e,i):u==":"?(o(e),"meta"):"error"}var l=o(e);return l=="."?null:(s="symbol",l=="nil"||l=="t"||l.charAt(0)==":"?"atom":i.lastType=="open"&&(t.test(l)||n.test(l))?"keyword":l.charAt(0)=="&"?"variable-2":"variable")}function a(e,t){var n=!1,r;while(r=e.next()){if(r=='"'&&!n){t.tokenize=u;break}n=!n&&r=="\\"}return"string"}function f(e,t){var n,r;while(n=e.next()){if(n=="#"&&r=="|"){t.tokenize=u;break}r=n}return s="ws","comment"}var t=/^(block|let*|return-from|catch|load-time-value|setq|eval-when|locally|symbol-macrolet|flet|macrolet|tagbody|function|multiple-value-call|the|go|multiple-value-prog1|throw|if|progn|unwind-protect|labels|progv|let|quote)$/,n=/^with|^def|^do|^prog|case$|^cond$|bind$|when$|unless$/,r=/^(?:[+\-]?(?:\d+|\d*\.\d+)(?:[efd][+\-]?\d+)?|[+\-]?\d+(?:\/[+\-]?\d+)?|#b[+\-]?[01]+|#o[+\-]?[0-7]+|#x[+\-]?[\da-f]+)/,i=/[^\s'`,@()\[\]";]/,s;return{startState:function(){return{ctx:{prev:null,start:0,indentTo:0},lastType:null,tokenize:u}},token:function(t,r){t.sol()&&typeof r.ctx.indentTo!="number"&&(r.ctx.indentTo=r.ctx.start+1),s=null;var i=r.tokenize(t,r);return s!="ws"&&(r.ctx.indentTo==null?s=="symbol"&&n.test(t.current())?r.ctx.indentTo=r.ctx.start+e.indentUnit:r.ctx.indentTo="next":r.ctx.indentTo=="next"&&(r.ctx.indentTo=t.column()),r.lastType=s),s=="open"?r.ctx={prev:r.ctx,start:t.column(),indentTo:null}:s=="close"&&(r.ctx=r.ctx.prev||r.ctx),i},indent:function(e,t){var n=e.ctx.indentTo;return typeof n=="number"?n:e.ctx.start+1},lineComment:";;",blockCommentStart:"#|",blockCommentEnd:"|#"}}),e.defineMIME("text/x-common-lisp","commonlisp")});