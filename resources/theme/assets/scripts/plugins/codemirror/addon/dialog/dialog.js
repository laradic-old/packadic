(function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){function t(e,t,n){var r=e.getWrapperElement(),i;return i=r.appendChild(document.createElement("div")),n?i.className="CodeMirror-dialog CodeMirror-dialog-bottom":i.className="CodeMirror-dialog CodeMirror-dialog-top",typeof t=="string"?i.innerHTML=t:i.appendChild(t),i}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(r,i,s){function f(e){if(typeof e=="string")l.value=e;else{if(u)return;u=!0,o.parentNode.removeChild(o),a.focus(),s.onClose&&s.onClose(o)}}s||(s={}),n(this,null);var o=t(this,r,s.bottom),u=!1,a=this,l=o.getElementsByTagName("input")[0],c;if(l)s.value&&(l.value=s.value,l.select()),s.onInput&&e.on(l,"input",function(e){s.onInput(e,l.value,f)}),s.onKeyUp&&e.on(l,"keyup",function(e){s.onKeyUp(e,l.value,f)}),e.on(l,"keydown",function(t){if(s&&s.onKeyDown&&s.onKeyDown(t,l.value,f))return;if(t.keyCode==27||s.closeOnEnter!==!1&&t.keyCode==13)l.blur(),e.e_stop(t),f();t.keyCode==13&&i(l.value,t)}),s.closeOnBlur!==!1&&e.on(l,"blur",f),l.focus();else if(c=o.getElementsByTagName("button")[0])e.on(c,"click",function(){f(),a.focus()}),s.closeOnBlur!==!1&&e.on(c,"blur",f),c.focus();return f}),e.defineExtension("openConfirm",function(r,i,s){function c(){if(a)return;a=!0,o.parentNode.removeChild(o),f.focus()}n(this,null);var o=t(this,r,s&&s.bottom),u=o.getElementsByTagName("button"),a=!1,f=this,l=1;u[0].focus();for(var h=0;h<u.length;++h){var p=u[h];(function(t){e.on(p,"click",function(n){e.e_preventDefault(n),c(),t&&t(f)})})(i[h]),e.on(p,"blur",function(){--l,setTimeout(function(){l<=0&&c()},200)}),e.on(p,"focus",function(){++l})}}),e.defineExtension("openNotification",function(r,i){function f(){if(o)return;o=!0,clearTimeout(u),s.parentNode.removeChild(s)}n(this,f);var s=t(this,r,i&&i.bottom),o=!1,u,a=i&&typeof i.duration!="undefined"?i.duration:5e3;return e.on(s,"click",function(t){e.e_preventDefault(t),f()}),a&&(u=setTimeout(f,a)),f})});