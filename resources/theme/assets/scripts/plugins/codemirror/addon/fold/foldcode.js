(function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){function t(t,r,s,o){function f(e){var n=u(t,r);if(!n||n.to.line-n.from.line<a)return null;var i=t.findMarksAt(n.from);for(var s=0;s<i.length;++s)if(i[s].__isFold&&o!=="fold"){if(!e)return null;n.cleared=!0,i[s].clear()}return n}if(s&&s.call){var u=s;s=null}else var u=i(t,s,"rangeFinder");typeof r=="number"&&(r=e.Pos(r,0));var a=i(t,s,"minFoldSize"),l=f(!0);if(i(t,s,"scanUp"))while(!l&&r.line>t.firstLine())r=e.Pos(r.line-1,0),l=f(!1);if(!l||l.cleared||o==="unfold")return;var c=n(t,s);e.on(c,"mousedown",function(t){h.clear(),e.e_preventDefault(t)});var h=t.markText(l.from,l.to,{replacedWith:c,clearOnEnter:!0,__isFold:!0});h.on("clear",function(n,r){e.signal(t,"unfold",t,n,r)}),e.signal(t,"fold",t,l.from,l.to)}function n(e,t){var n=i(e,t,"widget");if(typeof n=="string"){var r=document.createTextNode(n);n=document.createElement("span"),n.appendChild(r),n.className="CodeMirror-foldmarker"}return n}function i(e,t,n){if(t&&t[n]!==undefined)return t[n];var i=e.options.foldOptions;return i&&i[n]!==undefined?i[n]:r[n]}e.newFoldFunction=function(e,n){return function(r,i){t(r,i,{rangeFinder:e,widget:n})}},e.defineExtension("foldCode",function(e,n,r){t(this,e,n,r)}),e.defineExtension("isFolded",function(e){var t=this.findMarksAt(e);for(var n=0;n<t.length;++n)if(t[n].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var n=t.firstLine(),r=t.lastLine();n<=r;n++)t.foldCode(e.Pos(n,0),null,"fold")})},e.commands.unfoldAll=function(t){t.operation(function(){for(var n=t.firstLine(),r=t.lastLine();n<=r;n++)t.foldCode(e.Pos(n,0),null,"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,n){for(var r=0;r<e.length;++r){var i=e[r](t,n);if(i)return i}}}),e.registerHelper("fold","auto",function(e,t){var n=e.getHelpers(t,"fold");for(var r=0;r<n.length;r++){var i=n[r](e,t);if(i)return i}});var r={rangeFinder:e.fold.auto,widget:"â†”",minFoldSize:0,scanUp:!1};e.defineOption("foldOptions",null),e.defineExtension("foldOption",function(e,t){return i(this,e,t)})});