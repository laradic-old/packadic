window.CanvasRenderingContext2D||function(){function n(e){var t=e.srcElement;switch(e.propertyName){case"width":t.style.width=t.attributes.width.nodeValue+"px",t.getContext().clearRect();break;case"height":t.style.height=t.attributes.height.nodeValue+"px",t.getContext().clearRect()}}function r(){document.write('<script type=text/xaml><Canvas x:Name="root" xmlns="http://schemas.microsoft.com/client/2007" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Width="300" Height="150" Background="Transparent"> </Canvas></script>');var t=document.scripts,n=t[t.length-1];e=n.uniqueID,n.id=e}function i(t){return'<div><object type="application/x-silverlight" ><param name="windowless" value="true"><param name="background" value="transparent"><param name="source" value="#'+e+'">'+"</object><div></div></div>"}function o(){try{return new ActiveXObject("AgControl.AgControl"),!0}catch(e){return!1}}function c(){return[[1,0,0],[0,1,0],[0,0,1]]}function p(e,t){var n=c();for(var r=0;r<3;r++)for(var i=0;i<3;i++){var s=0;for(var o=0;o<3;o++)s+=e[r][o]*t[o][i];n[r][i]=s}return n}function d(e){v(e,C(e),e.m_)}function v(e,t,n){var r=t.renderTransform,i;r?i=r.matrix:(r=k(e,"<MatrixTransform/>"),i=k(e,"<Matrix/>"),r.matrix=i,t.renderTransform=r),i.m11=n[0][0],i.m12=n[0][1],i.m21=n[1][0],i.m22=n[1][1],i.offsetX=n[2][0],i.offsetY=n[2][1]}function m(e,t){t.fillStyle=e.fillStyle,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.strokeStyle=e.strokeStyle,t.globalAlpha=e.globalAlpha,t.arcScaleX_=e.arcScaleX_,t.arcScaleY_=e.arcScaleY_}function b(e){var t=e.indexOf("(",3),n=e.indexOf(")",t+1),r=e.substring(t+1,n).split(",");return r.length==4&&e.substr(3,1)=="a"?alpha=+r[3]:r[3]=1,r}function w(e){return parseFloat(e)/100}function E(e,t,n){return Math.min(n,Math.max(t,e))}function S(e){var t,n,r;h=parseFloat(e[0])/360%360,h<0&&h++,_s=E(w(e[1]),0,1),l=E(w(e[2]),0,1);if(s==0)t=n=r=l;else{var i=l<.5?l*(1+s):l+s-l*s,o=2*l-i;t=x(o,i,h+1/3),n=x(o,i,h),r=x(o,i,h-1/3)}return g[Math.floor(t*255)]+g[Math.floor(n*255)]+g[Math.floor(r*255)]}function x(e,t,n){return n<0&&n++,n>1&&n--,6*n<1?e+(t-e)*6*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function T(e){var t,n=1;e=String(e);if(e.charAt(0)=="#")return e;if(/^rgb/.test(e)){var r=b(e),t="",i;for(var s=0;s<3;s++)r[s].indexOf("%")!=-1?i=Math.floor(w(r[s])*255):i=+r[s],t+=g[E(i,0,255)];n=r[3]}else{if(!/^hsl/.test(e))return e in y?y[e]:e;var r=b(e);t=S(r),n=r[3]}return"#"+u[Math.floor(n*255)]+t}function N(e){switch(e){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function C(e){return e.canvas.firstChild.firstChild.content.findName("root")}function k(e,t,n){n&&(t=t.replace(/\%(\d+)/g,function(e,t){return n[+t-1]}));try{return e.canvas.firstChild.firstChild.content.createFromXaml(t)}catch(r){throw Error("Could not create XAML from: "+t)}}function L(e,t,n){var r=e.lastCanvas_||k(e,"<Canvas/>"),i=k(e,t,n);return r.children.add(i),v(e,r,e.m_),e.lastCanvas_||(C(e).children.add(r),e.lastCanvas_=r),i}function A(e,t){if(t instanceof D)return t.createBrush_(e);if(t instanceof j)throw Error("Not implemented");return k(e,'<SolidColorBrush Color="%1"/>',[T(t)])}function O(e){this.m_=c(),this.lastCanvas_=null,this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=10,this.globalAlpha=1,this.canvas=e}function _(e,t){e.m_=t,e.lastCanvas_=null}function D(){this.colors_=[]}function P(e,t,n,r){D.call(this),this.x0_=e,this.y0_=t,this.x1_=n,this.y1_=r}function H(e){return isNaN(e)||!isFinite(e)}function B(e,t,n,r,i,s){if(n<0||s<0||H(e)||H(t)||H(r)||H(i)){var o=Error("DOMException.INDEX_SIZE_ERR");throw o.code=1,o}D.call(this),this.x0_=e,this.y0_=t,this.r0_=n,this.x1_=r,this.y1_=i,this.r1_=s}function j(){}var e,t={init:function(e){var t=e||document;t.createElement("canvas");if(/MSIE/.test(navigator.userAgent)&&!window.opera){var n=this;r(),t.attachEvent("onreadystatechange",function(){n.init_(t)})}},init_:function(e){var t=e.createStyleSheet();t.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}canvas *{width:100%;height:100%;border:0;background:transparen;margin:0}canvas div {position:relative}canvas div div{position:absolute;top:0;filter:alpha(opacity=0);background:red}";var n=e.getElementsByTagName("canvas");for(var r=0;r<n.length;r++)n[r].getContext||this.initElement(n[r])},initElement:function(e){e.getContext=function(){return this.context_?this.context_:this.context_=new O(this)};var t=e.attributes;return t.width&&t.width.specified?e.style.width=t.width.nodeValue+"px":e.width=e.clientWidth,t.height&&t.height.specified?e.style.height=t.height.nodeValue+"px":e.height=e.clientHeight,e.innerHTML=i(),e.attachEvent("onpropertychange",n),e}};t.init();var u=[];for(var a=0;a<16;a++)for(var f=0;f<16;f++)u[a*16+f]=a.toString(16)+f.toString(16);var g=[];for(var a=0;a<16;a++)for(var f=0;f<16;f++)g[a*16+f]=a.toString(16)+f.toString(16);var y={darkgrey:"#A9A9A9",darkslategrey:"#2F4F4F",dimgrey:"#696969",grey:"#808080",lightgrey:"#D3D3D3",lightslategrey:"#778899",slategrey:"#708090"},M=O.prototype;M.clearRect=function(){var e=C(this);e.children.clear(),this.currentPath_=[],this.lastCanvas_=null},M.beginPath=function(){this.currentPath_=[]},M.moveTo=function(e,t){this.currentPath_.push("M"+e+","+t)},M.lineTo=function(e,t){if(this.currentPath_.length==0)return;this.currentPath_.push("L"+e+","+t)},M.bezierCurveTo=function(e,t,n,r,i,s){if(this.currentPath_.length==0)return;this.currentPath_.push("C"+e+","+t+" "+n+","+r+" "+i+" "+s)},M.quadraticCurveTo=function(e,t,n,r){if(this.currentPath_.length==0)return;this.currentPath_.push("Q"+e+","+t+" "+n+","+r)},M.arcTo=function(e,t,n,r,i){if(this.currentPath_.length==0)return},M.arc=function(e,t,n,r,i,s){var o=Math.abs(r-i);if(r==i)return;var u=e+n*Math.cos(i),a=t+n*Math.sin(i);if(o>=2*Math.PI){this.arc(e,t,n,r,r+Math.PI,s),this.arc(e,t,n,r+Math.PI,r+2*Math.PI,s),this.moveTo(u,a);return}var f=e+n*Math.cos(r),l=t+n*Math.sin(r),c=o*180/Math.PI,h=s?0:1,p=c>=180==Boolean(s)?0:1;this.currentPath_.length!=0?this.lineTo(f,l):this.moveTo(f,l),this.currentPath_.push("A"+n+","+n+" "+c+" "+p+" "+h+" "+u+","+a)},M.rect=function(e,t,n,r){this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.closePath()},M.strokeRect=function(e,t,n,r){this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.closePath(),this.stroke(),this.currentPath_=[]},M.fillRect=function(e,t,n,r){this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.closePath(),this.fill(),this.currentPath_=[]},M.createLinearGradient=function(e,t,n,r){return new P(e,t,n,r)},M.createRadialGradient=function(e,t,n,r,i,s){return new B(e,t,n,r,i,s)},M.drawImage=function(e,t){var n,r,i,s,o,u,a,f;if(arguments.length==3)n=arguments[1],r=arguments[2];else if(arguments.length==5)n=arguments[1],r=arguments[2],i=arguments[3],s=arguments[4];else{if(arguments.length!=9)throw Error("Invalid number of arguments");o=arguments[1],u=arguments[2],a=arguments[3],f=arguments[4],n=arguments[5],r=arguments[6],i=arguments[7],s=arguments[8]}var l;if(arguments.length==9){l=L(this,'<Image Source="%1"/>',[e.src]);var h=k(this,'<RectangleGeometry Rect="%1,%2,%3,%4"/>',[o,u,a,f]);l.clip=h;var d=c();d[2][0]=-o,d[2][1]=-u;var m=c();m[0][0]=i/a,m[1][1]=s/f,d=p(d,m),d[2][0]+=n,d[2][1]+=r,v(this,l,d)}else{l=L(this,'<Image Source="%1" Canvas.Left="%2" Canvas.Top="%3"/>',[e.src,n,r]);if(i!=undefined||s!=undefined)l.width=i,l.height=s,l.stretch="fill"}},M.stroke=function(){if(this.currentPath_.length==0)return;var e=L(this,'<Path Data="%1"/>',[this.currentPath_.join(" ")]);e.stroke=A(this,this.strokeStyle),e.opacity=this.globalAlpha,e.strokeThickness=this.lineWidth,e.strokeMiterLimit=this.miterLimit,e.strokeLineJoin=this.lineJoin,e.strokeEndLineCap=e.strokeStartLineCap=N(this.lineCap)},M.fill=function(){if(this.currentPath_.length==0)return;var e=L(this,'<Path Data="%1"/>',[this.currentPath_.join(" ")]);e.data.fillRule="NonZero",e.fill=A(this,this.fillStyle),e.fill.opacity=this.globalAlpha},M.closePath=function(){this.currentPath_.push("z")},M.save=function(){var e={};m(this,e),this.aStack_.push(e),this.mStack_.push(this.m_),_(this,p(c(),this.m_))},M.restore=function(){m(this.aStack_.pop(),this),_(this,this.mStack_.pop())},M.translate=function(e,t){var n=[[1,0,0],[0,1,0],[e,t,1]];_(this,p(n,this.m_))},M.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=[[t,n,0],[-n,t,0],[0,0,1]];_(this,p(r,this.m_))},M.scale=function(e,t){var n=[[e,0,0],[0,t,0],[0,0,1]];_(this,p(n,this.m_))},M.transform=function(e,t,n,r,i,s){var o=[[e,t,0],[n,r,0],[i,s,1]];_(this,p(o,this.m_))},M.setTransform=function(e,t,n,r,i,s){_(this,[[e,t,0],[n,r,0],[i,s,1]])},M.clip=function(){if(this.currentPath_.length){var e=this.currentPath_.join(" "),t=k(this,'<Canvas Width="%1" Height="%2" Clip="%3"/>',[C(this).width,C(this).height,e]),n=this.lastCanvas_||C(this);n.children.add(t),this.lastCanvas_=t}},M.createPattern=function(){return new j},D.prototype.addColorStop=function(e,t){t=T(t),this.colors_.push({offset:e,color:t})},D.prototype.createStops_=function(e,t,n){var r=t.gradientStops;for(var i=0,s;s=n[i];i++){var o=T(s.color);r.add(k(e,'<GradientStop Color="%1" Offset="%2"/>',[o,s.offset]))}},P.prototype=new D,P.prototype.createBrush_=function(e){var t=k(e,'<LinearGradientBrush MappingMode="Absolute" StartPoint="%1,%2" EndPoint="%3,%4"/>',[this.x0_,this.y0_,this.x1_,this.y1_]);return this.createStops_(e,t,this.colors_),t},B.prototype=new D,D.prototype.createBrush_=function(e){if(this.x0_==this.x1_&&this.y0_==this.y1_&&this.r0_==this.r1_)return null;var t=Math.max(this.r0_,this.r1_),n=Math.min(this.r0_,this.r1_),r=k(e,'<RadialGradientBrush MappingMode="Absolute" GradientOrigin="%1,%2" Center="%3,%4" RadiusX="%5" RadiusY="%5"/>',[this.x0_,this.y0_,this.x1_,this.y1_,t]),i=this.colors_.concat();if(this.r1_<this.r0_){i.reverse();for(var s=0,o;o=i[s];s++)o.offset=1-o.offset}i.sort(function(e,t){return e.offset-t.offset});if(n>0)for(var s=0,o;o=i[s];s++)o.offset=n/t+(t-n)/t*o.offset;return this.createStops_(e,r,i),r},G_vmlCanvasManager=t,CanvasRenderingContext2D=O,CanvasGradient=D,CanvasPattern=j}();