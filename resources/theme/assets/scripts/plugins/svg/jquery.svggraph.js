(function(e){function t(){this.regional=[],this.regional[""]={percentageText:"Percentage"},this.region=this.regional[""]}function n(t){this._wrapper=t,this._drawNow=!1;for(var n in e.svg.graphing._chartTypes){this._chartType=e.svg.graphing._chartTypes[n];break}this._chartOptions={},this._title={value:"",offset:25,settings:{textAnchor:"middle"}},this._area=[.1,.1,.8,.9],this._chartFormat={fill:"none",stroke:"black"},this._gridlines=[],this._series=[],this._onstatus=null,this._chartCont=this._wrapper.svg(0,0,0,0,{class_:"svg-graph"}),this.xAxis=new i(this),this.xAxis.title("",40),this.yAxis=new i(this),this.yAxis.title("",40),this.x2Axis=null,this.y2Axis=null,this.legend=new s(this),this._drawNow=!0}function r(e,t,n,r,i,s,o){typeof t!="string"&&(o=s,s=i,i=r,r=n,n=t,t=null),typeof i!="string"&&(o=s,s=i,i=null),typeof s!="number"&&(o=s,s=null),this._graph=e,this._name=t||"",this._values=n||[],this._axis=1,this._fill=r||"green",this._stroke=i||"black",this._strokeWidth=s||1,this._settings=o||{}}function i(e,t,n,r,i,s){this._graph=e,this._title=t||"",this._titleFormat={},this._titleOffset=0,this._labels=null,this._labelFormat={},this._lineFormat={stroke:"black",strokeWidth:1},this._ticks={major:i||10,minor:s||0,size:10,position:"out"},this._scale={min:n||0,max:r||100},this._crossAt=0}function s(e,t,n){this._graph=e,this._show=!0,this._area=[.9,.1,1,.9],this._sampleSize=15,this._bgSettings=t||{stroke:"gray"},this._textSettings=n||{}}function o(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function a(){}function f(){}function l(){}function c(){}function h(){}function p(){}e.svg.addExtension("graph",n),e.svg.graphing=new t,e.extend(t.prototype,{_chartTypes:[],addChartType:function(e,t){this._chartTypes[e]=t},chartTypes:function(){return this._chartTypes}}),e.extend(n.prototype,{X:0,Y:1,W:2,H:3,L:0,T:1,R:2,B:3,_percentageAxis:new i(this,e.svg.graphing.region.percentageText,0,100,10,0),container:function(e){return arguments.length===0?this._chartCont:(this._chartCont=e,this)},chartType:function(e,t){return arguments.length===0?this.type():this.type(e,t)},type:function(t,n){if(arguments.length===0)return this._chartType;var r=e.svg.graphing._chartTypes[t];return r&&(this._chartType=r,this._chartOptions=e.extend({},n||{})),this._drawGraph(),this},chartOptions:function(e){return arguments.length===0?this.options():this.options(e)},options:function(t){return arguments.length===0?this._chartOptions:(this._chartOptions=e.extend({},t),this._drawGraph(),this)},chartFormat:function(e,t,n){return arguments.length===0?this.format():this.format(e,t,n)},format:function(t,n,r){return arguments.length===0?this._chartFormat:(typeof n=="object"&&(r=n,n=null),this._chartFormat=e.extend({fill:t},n?{stroke:n}:{},r||{}),this._drawGraph(),this)},chartArea:function(e,t,n,r){return arguments.length===0?this.area():this.area(e,t,n,r)},area:function(t,n,r,i){return arguments.length===0?this._area:(this._area=e.isArray(t)?t:[t,n,r,i],this._drawGraph(),this)},gridlines:function(e,t){return arguments.length===0?this._gridlines:(this._gridlines=[typeof e=="string"?{stroke:e}:e,typeof t=="string"?{stroke:t}:t],this._gridlines[0]==null&&this._gridlines[1]==null&&(this._gridlines=[]),this._drawGraph(),this)},title:function(t,n,r,i){return arguments.length===0?this._title:(typeof n!="number"&&(i=r,r=n,n=null),typeof r!="string"&&(i=r,r=null),this._title={value:t,offset:n||this._title.offset,settings:e.extend({textAnchor:"middle"},r?{fill:r}:{},i||{})},this._drawGraph(),this)},addSeries:function(e,t,n,i,s,o){return this._series.push(new r(this,e,t,n,i,s,o)),this._drawGraph(),this},series:function(e){return(arguments.length>0?this._series[e]:null)||this._series},noDraw:function(){return this._drawNow=!1,this},redraw:function(){return this._drawNow=!0,this._drawGraph(),this},status:function(e){return this._onstatus=e,this},_drawGraph:function(){if(!this._drawNow)return;while(this._chartCont.firstChild)this._chartCont.removeChild(this._chartCont.firstChild);this._chartCont.parent||this._wrapper._svg.appendChild(this._chartCont),this._chartCont.width?this._chartCont.width.baseVal?this._chartCont.width.baseVal.value=this._chartCont.width.baseVal.value||this._wrapper.width():this._chartCont.width=this._chartCont.width||this._wrapper.width():this._chartCont.setAttribute("width",parseInt(this._chartCont.getAttribute("width"),10)||this._wrapper.width()),this._chartCont.height?this._chartCont.height.baseVal?this._chartCont.height.baseVal.value=this._chartCont.height.baseVal.value||this._wrapper.height():this._chartCont.height=this._chartCont.height||this._wrapper.height():this._chartCont.setAttribute("height",parseInt(this._chartCont.getAttribute("height"),10)||this._wrapper.height()),this._chartType.drawGraph(this)},_getValue:function(e,t){return e[t]?e[t].baseVal?e[t].baseVal.value:e[t]:parseInt(e.getAttribute(t),10)},_drawTitle:function(){this._wrapper.text(this._chartCont,this._getValue(this._chartCont,"width")/2,this._title.offset,this._title.value,this._title.settings)},_getDims:function(e){e=e||this._area;var t=this._getValue(this._chartCont,"width"),n=this._getValue(this._chartCont,"height"),r=e[this.L]>1?e[this.L]:t*e[this.L],i=e[this.T]>1?e[this.T]:n*e[this.T],s=(e[this.R]>1?e[this.R]:t*e[this.R])-r,o=(e[this.B]>1?e[this.B]:n*e[this.B])-i;return[r,i,s,o]},_drawChartBackground:function(e,t){var n=this._wrapper.group(this._chartCont,{class_:"background"}),r=this._getDims();return this._wrapper.rect(n,r[this.X],r[this.Y],r[this.W],r[this.H],this._chartFormat),this._gridlines[0]&&this.yAxis._ticks.major&&!t&&this._drawGridlines(n,this.yAxis,!0,r,this._gridlines[0]),this._gridlines[1]&&this.xAxis._ticks.major&&!e&&this._drawGridlines(n,this.xAxis,!1,r,this._gridlines[1]),n},_drawGridlines:function(e,t,n,r,i){var s=this._wrapper.group(e,i),o=(n?r[this.H]:r[this.W])/(t._scale.max-t._scale.min),u=Math.floor(t._scale.min/t._ticks.major)*t._ticks.major;u=u<t._scale.min?u+t._ticks.major:u;while(u<=t._scale.max){var a=(n?t._scale.max-u:u-t._scale.min)*o+(n?r[this.Y]:r[this.X]);this._wrapper.line(s,n?r[this.X]:a,n?a:r[this.Y],n?r[this.X]+r[this.W]:a,n?a:r[this.Y]+r[this.H]),u+=t._ticks.major}},_drawAxes:function(t){var n=this._getDims();this.xAxis&&!t&&(this.xAxis._title&&this._wrapper.text(this._chartCont,n[this.X]+n[this.W]/2,n[this.Y]+n[this.H]+this.xAxis._titleOffset,this.xAxis._title,this.xAxis._titleFormat),this._drawAxis(this.xAxis,"xAxis",n[this.X],n[this.Y]+n[this.H],n[this.X]+n[this.W],n[this.Y]+n[this.H])),this.yAxis&&(this.yAxis._title&&this._wrapper.text(this._chartCont,0,0,this.yAxis._title,e.extend({textAnchor:"middle",transform:"translate("+(n[this.X]-this.yAxis._titleOffset)+","+(n[this.Y]+n[this.H]/2)+") rotate(-90)"},this.yAxis._titleFormat||{})),this._drawAxis(this.yAxis,"yAxis",n[this.X],n[this.Y],n[this.X],n[this.Y]+n[this.H])),this.x2Axis&&!t&&(this.x2Axis._title&&this._wrapper.text(this._chartCont,n[this.X]+n[this.W]/2,n[this.X]-this.x2Axis._titleOffset,this.x2Axis._title,this.x2Axis._titleFormat),this._drawAxis(this.x2Axis,"x2Axis",n[this.X],n[this.Y],n[this.X]+n[this.W],n[this.Y])),this.y2Axis&&(this.y2Axis._title&&this._wrapper.text(this._chartCont,0,0,this.y2Axis._title,e.extend({textAnchor:"middle",transform:"translate("+(n[this.X]+n[this.W]+this.y2Axis._titleOffset)+","+(n[this.Y]+n[this.H]/2)+") rotate(-90)"},this.y2Axis._titleFormat||{})),this._drawAxis(this.y2Axis,"y2Axis",n[this.X]+n[this.W],n[this.Y],n[this.X]+n[this.W],n[this.Y]+n[this.H]))},_drawAxis:function(t,n,r,i,s,o){var u=i===o,a=this._wrapper.group(this._chartCont,e.extend({class_:n},t._lineFormat)),f=this._wrapper.group(this._chartCont,e.extend({class_:n+"Labels",textAnchor:u?"middle":"end"},t._labelFormat));this._wrapper.line(a,r,i,s,o);if(t._ticks.major){var l=s>this._getValue(this._chartCont,"width")/2&&o>this._getValue(this._chartCont,"height")/2,c=(u?s-r:o-i)/(t._scale.max-t._scale.min),h=t._ticks.size,p=Math.floor(t._scale.min/t._ticks.major)*t._ticks.major;p=p<t._scale.min?p+t._ticks.major:p;var d=t._ticks.minor?Math.floor(t._scale.min/t._ticks.minor)*t._ticks.minor:t._scale.max+1;d=d<t._scale.min?d+t._ticks.minor:d;var v=this._getTickOffsets(t,l),m=0;while(p<=t._scale.max||d<=t._scale.max){var g=Math.min(p,d),y=g===p?h:h/2,b=(u?r:i)+(u?g-t._scale.min:t._scale.max-g)*c;this._wrapper.line(a,u?b:r+y*v[0],u?i+y*v[0]:b,u?b:r+y*v[1],u?i+y*v[1]:b),g===p&&this._wrapper.text(f,u?b:r-h,u?i+2*h:b,t._labels?t._labels[m++]:""+g),p+=g===p?t._ticks.major:0,d+=g===d?t._ticks.minor:0}}},_getTickOffsets:function(e,t){return[e._ticks.position===(t?"in":"out")||e._ticks.position==="both"?-1:0,e._ticks.position===(t?"out":"in")||e._ticks.position==="both"?1:0]},_getPercentageAxis:function(){return this._percentageAxis._title=e.svg.graphing.region.percentageText,this._percentageAxis},_getTotals:function(){var e=[],t=this._series.length?this._series[0]._values.length:0;for(var n=0;n<t;n++){e[n]=0;for(var r=0;r<this._series.length;r++)e[n]+=this._series[r]._values[n]}return e},_drawLegend:function(){if(!this.legend._show)return;var e=this._wrapper.group(this._chartCont,{class_:"legend"}),t=this._getDims(this.legend._area);this._wrapper.rect(e,t[this.X],t[this.Y],t[this.W],t[this.H],this.legend._bgSettings);var n=t[this.W]>t[this.H],r=this._series.length,i=(n?t[this.W]:t[this.H])/r,s=t[this.X]+5,o=t[this.Y]+((n?t[this.H]:i)+this.legend._sampleSize)/2;for(var u=0;u<r;u++){var a=this._series[u];this._wrapper.rect(e,s+(n?u*i:0),o+(n?0:u*i)-this.legend._sampleSize,this.legend._sampleSize,this.legend._sampleSize,{fill:a._fill,stroke:a._stroke,strokeWidth:1}),this._wrapper.text(e,s+(n?u*i:0)+this.legend._sampleSize+5,o+(n?0:u*i),a._name,this.legend._textSettings)}},_showStatus:function(t,n,r){var i=this._onstatus;this._onstatus&&e(t).hover(function(){i.apply(this,[n,r])},function(){i.apply(this,["",0])})}}),e.extend(r.prototype,{name:function(e){return arguments.length===0?this._name:(this._name=e,this._graph._drawGraph(),this)},values:function(t,n){return arguments.length===0?this._values:(e.isArray(t)&&(n=t,t=null),this._name=t||this._name,this._values=n,this._graph._drawGraph(),this)},format:function(t,n,r,i){return arguments.length===0?e.extend({fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth},this._settings):(typeof n!="string"&&(i=r,r=n,n=null),typeof r!="number"&&(i=r,r=null),this._fill=t||this._fill,this._stroke=n||this._stroke,this._strokeWidth=r||this._strokeWidth,e.extend(this._settings,i||{}),this._graph._drawGraph(),this)},end:function(){return this._graph}}),e.extend(i.prototype,{scale:function(e,t){return arguments.length===0?this._scale:(this._scale.min=e,this._scale.max=t,this._graph._drawGraph(),this)},ticks:function(e,t,n,r){return arguments.length===0?this._ticks:(typeof n=="string"&&(r=n,n=null),this._ticks.major=e,this._ticks.minor=t,this._ticks.size=n||this._ticks.size,this._ticks.position=r||this._ticks.position,this._graph._drawGraph(),this)},title:function(t,n,r,i){if(arguments.length===0)return{title:this._title,offset:this._titleOffset,format:this._titleFormat};typeof n!="number"&&(i=r,r=n,n=null),typeof r!="string"&&(i=r,r=null),this._title=t,this._titleOffset=n!=null?n:this._titleOffset;if(r||i)this._titleFormat=e.extend(i||{},r?{fill:r}:{});return this._graph._drawGraph(),this},labels:function(t,n,r){if(arguments.length===0)return{labels:this._labels,format:this._labelFormat};typeof n!="string"&&(r=n,n=null),this._labels=t;if(n||r)this._labelFormat=e.extend(r||{},n?{fill:n}:{});return this._graph._drawGraph(),this},line:function(t,n,r){return arguments.length===0?this._lineFormat:(typeof n=="object"&&(r=n,n=null),e.extend(this._lineFormat,{stroke:t},n?{strokeWidth:n}:{},r||{}),this._graph._drawGraph(),this)},end:function(){return this._graph}}),e.extend(s.prototype,{show:function(e){return arguments.length===0?this._show:(this._show=e,this._graph._drawGraph(),this)},area:function(t,n,r,i){return arguments.length===0?this._area:(this._area=e.isArray(t)?t:[t,n,r,i],this._graph._drawGraph(),this)},settings:function(e,t,n){return arguments.length===0?{sampleSize:this._sampleSize,bgSettings:this._bgSettings,textSettings:this._textSettings}:(typeof e!="number"&&(n=t,t=e,e=null),this._sampleSize=e||this._sampleSize,this._bgSettings=t,this._textSettings=n||this._textSettings,this._graph._drawGraph(),this)},end:function(){return this._graph}});var u=["barWidth (number) - the width of each bar","barGap (number) - the gap between sets of bars"];e.extend(a.prototype,{title:function(){return"Basic column chart"},description:function(){return"Compare sets of values as vertical bars with grouped categories."},options:function(){return u},drawGraph:function(e){e._drawChartBackground(!0);var t=e._chartOptions.barWidth||10,n=e._chartOptions.barGap||10,r=e._series.length,i=r?e._series[0]._values.length:0,s=e._getDims(),o=s[e.W]/((r*t+n)*i+n),u=s[e.H]/(e.yAxis._scale.max-e.yAxis._scale.min);this._chart=e._wrapper.group(e._chartCont,{class_:"chart"});for(var a=0;a<r;a++)this._drawSeries(e,a,r,t,n,s,o,u);e._drawTitle(),e._drawAxes(!0),this._drawXAxis(e,r,i,t,n,s,o),e._drawLegend()},_drawSeries:function(t,n,r,i,s,o,u,a){var f=t._series[n],l=t._wrapper.group(this._chart,e.extend({class_:"series"+n,fill:f._fill,stroke:f._stroke,strokeWidth:f._strokeWidth},f._settings||{}));for(var c=0;c<f._values.length;c++){var h=t._wrapper.rect(l,o[t.X]+u*(s+c*(r*i+s)+n*i),o[t.Y]+a*(t.yAxis._scale.max-f._values[c]),u*i,a*f._values[c]);t._showStatus(h,f._name,f._values[c])}},_drawXAxis:function(t,n,r,i,s,o,u){var a=t.xAxis;a._title&&t._wrapper.text(t._chartCont,o[t.X]+o[t.W]/2,o[t.Y]+o[t.H]+a._titleOffset,a._title,e.extend({textAnchor:"middle"},a._titleFormat||{}));var f=t._wrapper.group(t._chartCont,e.extend({class_:"xAxis"},a._lineFormat)),l=t._wrapper.group(t._chartCont,e.extend({class_:"xAxisLabels",textAnchor:"middle"},a._labelFormat));t._wrapper.line(f,o[t.X],o[t.Y]+o[t.H],o[t.X]+o[t.W],o[t.Y]+o[t.H]);if(a._ticks.major){var c=t._getTickOffsets(a,!0);for(var h=1;h<r;h++){var p=o[t.X]+u*(s/2+h*(n*i+s));t._wrapper.line(f,p,o[t.Y]+o[t.H]+c[0]*a._ticks.size,p,o[t.Y]+o[t.H]+c[1]*a._ticks.size)}for(var h=0;h<r;h++){var p=o[t.X]+u*(s/2+(h+.5)*(n*i+s));t._wrapper.text(l,p,o[t.Y]+o[t.H]+2*a._ticks.size,a._labels?a._labels[h]:""+h)}}}}),e.extend(f.prototype,{title:function(){return"Stacked column chart"},description:function(){return"Compare sets of values as vertical bars showing relative contributions to the whole for each category."},options:function(){return u},drawGraph:function(t){var n=t._drawChartBackground(!0,!0),r=t._getDims();t._gridlines[0]&&t.xAxis._ticks.major&&t._drawGridlines(n,t._getPercentageAxis(),!0,r,t._gridlines[0]);var i=t._chartOptions.barWidth||10,s=t._chartOptions.barGap||10,o=t._series.length,u=o?t._series[0]._values.length:0,a=r[t.W]/((i+s)*u+s),f=r[t.H];this._chart=t._wrapper.group(t._chartCont,{class_:"chart"}),this._drawColumns(t,o,u,i,s,r,a,f),t._drawTitle(),t._wrapper.text(t._chartCont,0,0,e.svg.graphing.region.percentageText,e.extend({textAnchor:"middle",transform:"translate("+(r[t.X]-t.yAxis._titleOffset)+","+(r[t.Y]+r[t.H]/2)+") rotate(-90)"},t.yAxis._titleFormat||{}));var l=e.extend({},t._getPercentageAxis());e.extend(l._labelFormat,t.yAxis._labelFormat||{}),t._drawAxis(l,"yAxis",r[t.X],r[t.Y],r[t.X],r[t.Y]+r[t.H]),this._drawXAxis(t,u,i,s,r,a),t._drawLegend()},_drawColumns:function(t,n,r,i,s,u,a,f){var l=t._getTotals(),c=[];for(var h=0;h<r;h++)c[h]=0;for(var p=0;p<n;p++){var d=t._series[p],v=t._wrapper.group(this._chart,e.extend({class_:"series"+p,fill:d._fill,stroke:d._stroke,strokeWidth:d._strokeWidth},d._settings||{}));for(var h=0;h<d._values.length;h++){c[h]+=d._values[h];var m=t._wrapper.rect(v,u[t.X]+a*(s+h*(i+s)),u[t.Y]+f*(l[h]-c[h])/l[h],a*i,f*d._values[h]/l[h]);t._showStatus(m,d._name,o(d._values[h]/l[h]*100,2))}}},_drawXAxis:function(t,n,r,i,s,o){var u=t.xAxis;u._title&&t._wrapper.text(t._chartCont,s[t.X]+s[t.W]/2,s[t.Y]+s[t.H]+u._titleOffset,u._title,e.extend({textAnchor:"middle"},u._titleFormat||{}));var a=t._wrapper.group(t._chartCont,e.extend({class_:"xAxis"},u._lineFormat)),f=t._wrapper.group(t._chartCont,e.extend({class_:"xAxisLabels",textAnchor:"middle"},u._labelFormat));t._wrapper.line(a,s[t.X],s[t.Y]+s[t.H],s[t.X]+s[t.W],s[t.Y]+s[t.H]);if(u._ticks.major){var l=t._getTickOffsets(u,!0);for(var c=1;c<n;c++){var h=s[t.X]+o*(i/2+c*(r+i));t._wrapper.line(a,h,s[t.Y]+s[t.H]+l[0]*u._ticks.size,h,s[t.Y]+s[t.H]+l[1]*u._ticks.size)}for(var c=0;c<n;c++){var h=s[t.X]+o*(i/2+(c+.5)*(r+i));t._wrapper.text(f,h,s[t.Y]+s[t.H]+2*u._ticks.size,u._labels?u._labels[c]:""+c)}}}}),e.extend(l.prototype,{title:function(){return"Basic row chart"},description:function(){return"Compare sets of values as horizontal rows with grouped categories."},options:function(){return u},drawGraph:function(e){var t=e._drawChartBackground(!0,!0),n=e._getDims();e._drawGridlines(t,e.yAxis,!1,n,e._gridlines[0]);var r=e._chartOptions.barWidth||10,i=e._chartOptions.barGap||10,s=e._series.length,o=s?e._series[0]._values.length:0,u=n[e.W]/(e.yAxis._scale.max-e.yAxis._scale.min),a=n[e.H]/((s*r+i)*o+i);this._chart=e._wrapper.group(e._chartCont,{class_:"chart"});for(var f=0;f<s;f++)this._drawSeries(e,f,s,r,i,n,u,a);e._drawTitle(),this._drawAxes(e,s,o,r,i,n,a),e._drawLegend()},_drawSeries:function(t,n,r,i,s,o,u,a){var f=t._series[n],l=t._wrapper.group(this._chart,e.extend({class_:"series"+n,fill:f._fill,stroke:f._stroke,strokeWidth:f._strokeWidth},f._settings||{}));for(var c=0;c<f._values.length;c++){var h=t._wrapper.rect(l,o[t.X]+u*(0-t.yAxis._scale.min),o[t.Y]+a*(s+c*(r*i+s)+n*i),u*f._values[c],a*i);t._showStatus(h,f._name,f._values[c])}},_drawAxes:function(t,n,r,i,s,o,u){var a=t.yAxis;a&&(a._title&&t._wrapper.text(t._chartCont,o[t.X]+o[t.W]/2,o[t.Y]+o[t.H]+a._titleOffset,a._title,a._titleFormat),t._drawAxis(a,"xAxis",o[t.X],o[t.Y]+o[t.H],o[t.X]+o[t.W],o[t.Y]+o[t.H]));var a=t.xAxis;a._title&&t._wrapper.text(t._chartCont,0,0,a._title,e.extend({textAnchor:"middle",transform:"translate("+(o[t.X]-a._titleOffset)+","+(o[t.Y]+o[t.H]/2)+") rotate(-90)"},a._titleFormat||{}));var f=t._wrapper.group(t._chartCont,e.extend({class_:"yAxis"},a._lineFormat)),l=t._wrapper.group(t._chartCont,e.extend({class_:"yAxisLabels",textAnchor:"end"},a._labelFormat));t._wrapper.line(f,o[t.X],o[t.Y],o[t.X],o[t.Y]+o[t.H]);if(a._ticks.major){var c=t._getTickOffsets(a,!1);for(var h=1;h<r;h++){var p=o[t.Y]+u*(s/2+h*(n*i+s));t._wrapper.line(f,o[t.X]+c[0]*a._ticks.size,p,o[t.X]+c[1]*a._ticks.size,p)}for(var h=0;h<r;h++){var p=o[t.Y]+u*(s/2+(h+.5)*(n*i+s));t._wrapper.text(l,o[t.X]-a._ticks.size,p,a._labels?a._labels[h]:""+h)}}}}),e.extend(c.prototype,{title:function(){return"Stacked row chart"},description:function(){return"Compare sets of values as horizontal bars showing relative contributions to the whole for each category."},options:function(){return u},drawGraph:function(t){var n=t._drawChartBackground(!0,!0),r=t._getDims();t._gridlines[0]&&t.xAxis._ticks.major&&t._drawGridlines(n,t._getPercentageAxis(),!1,r,t._gridlines[0]);var i=t._chartOptions.barWidth||10,s=t._chartOptions.barGap||10,o=t._series.length,u=o?t._series[0]._values.length:0,a=r[t.W],f=r[t.H]/((i+s)*u+s);this._chart=t._wrapper.group(t._chartCont,{class_:"chart"}),this._drawRows(t,o,u,i,s,r,a,f),t._drawTitle(),t._wrapper.text(t._chartCont,r[t.X]+r[t.W]/2,r[t.Y]+r[t.H]+t.xAxis._titleOffset,e.svg.graphing.region.percentageText,e.extend({textAnchor:"middle"},t.yAxis._titleFormat||{}));var l=e.extend({},t._getPercentageAxis());e.extend(l._labelFormat,t.yAxis._labelFormat||{}),t._drawAxis(l,"xAxis",r[t.X],r[t.Y]+r[t.H],r[t.X]+r[t.W],r[t.Y]+r[t.H]),this._drawYAxis(t,u,i,s,r,f),t._drawLegend()},_drawRows:function(t,n,r,i,s,u,a,f){var l=t._getTotals(),c=[];for(var h=0;h<r;h++)c[h]=0;for(var p=0;p<n;p++){var d=t._series[p],v=t._wrapper.group(this._chart,e.extend({class_:"series"+p,fill:d._fill,stroke:d._stroke,strokeWidth:d._strokeWidth},d._settings||{}));for(var h=0;h<d._values.length;h++){var m=t._wrapper.rect(v,u[t.X]+a*c[h]/l[h],u[t.Y]+f*(s+h*(i+s)),a*d._values[h]/l[h],f*i);t._showStatus(m,d._name,o(d._values[h]/l[h]*100,2)),c[h]+=d._values[h]}}},_drawYAxis:function(t,n,r,i,s,o){var u=t.xAxis;u._title&&t._wrapper.text(t._chartCont,0,0,u._title,e.extend({textAnchor:"middle",transform:"translate("+(s[t.X]-u._titleOffset)+","+(s[t.Y]+s[t.H]/2)+") rotate(-90)"},u._titleFormat||{}));var a=t._wrapper.group(t._chartCont,e.extend({class_:"yAxis"},u._lineFormat)),f=t._wrapper.group(t._chartCont,e.extend({class_:"yAxisLabels",textAnchor:"end"},u._labelFormat));t._wrapper.line(a,s[t.X],s[t.Y],s[t.X],s[t.Y]+s[t.H]);if(u._ticks.major){var l=t._getTickOffsets(u,!1);for(var c=1;c<n;c++){var h=s[t.Y]+o*(i/2+c*(r+i));t._wrapper.line(a,s[t.X]+l[0]*u._ticks.size,h,s[t.X]+l[1]*u._ticks.size,h)}for(var c=0;c<n;c++){var h=s[t.Y]+o*(i/2+(c+.5)*(r+i));t._wrapper.text(f,s[t.X]-u._ticks.size,h,u._labels?u._labels[c]:""+c)}}}}),e.extend(h.prototype,{title:function(){return"Basic line chart"},description:function(){return"Compare sets of values as continuous lines."},options:function(){return[]},drawGraph:function(e){e._drawChartBackground();var t=e._getDims(),n=t[e.W]/(e.xAxis._scale.max-e.xAxis._scale.min),r=t[e.H]/(e.yAxis._scale.max-e.yAxis._scale.min);this._chart=e._wrapper.group(e._chartCont,{class_:"chart"});for(var i=0;i<e._series.length;i++)this._drawSeries(e,i,t,n,r);e._drawTitle(),e._drawAxes(),e._drawLegend()},_drawSeries:function(t,n,r,i,s){var o=t._series[n],u=t._wrapper.createPath();for(var a=0;a<o._values.length;a++){var f=r[t.X]+a*i,l=r[t.Y]+(t.yAxis._scale.max-o._values[a])*s;a===0?u.move(f,l):u.line(f,l)}var c=t._wrapper.path(this._chart,u,e.extend({id:"series"+n,fill:"none",stroke:o._stroke,strokeWidth:o._strokeWidth},o._settings||{}));t._showStatus(c,o._name,0)}}),e.extend(p.prototype,{_options:["explode (number or number[]) - indexes of sections to explode out of the pie","explodeDist (number) - the distance to move an exploded section","pieGap (number) - the distance between pies for multiple values"],title:function(){return"Pie chart"},description:function(){return"Compare relative sizes of values as contributions to the whole."},options:function(){return this._options},drawGraph:function(e){e._drawChartBackground(!0,!0),this._chart=e._wrapper.group(e._chartCont,{class_:"chart"});var t=e._getDims();this._drawSeries(e,t),e._drawTitle(),e._drawLegend()},_drawSeries:function(t,n){var r=t._getTotals(),i=t._series.length,s=i?t._series[0]._values.length:0,u=t._wrapper.createPath(),a=t._chartOptions.explode||[];a=e.isArray(a)?a:[a];var f=t._chartOptions.explodeDist||10,l=s<=1?0:t._chartOptions.pieGap||10,c=(n[t.W]-s*l-l)/s/2,h=n[t.H]/2,p=Math.min(c,h)-(a.length>0?f:0),d=t._wrapper.group(t._chartCont,e.extend({class_:"xAxisLabels",textAnchor:"middle"},t.xAxis._labelFormat)),v=[];for(var m=0;m<s;m++){var g=n[t.X]+c+m*(2*Math.min(c,h)+l)+l,y=n[t.Y]+h,b=0;for(var w=0;w<i;w++){var E=t._series[w];m===0&&(v[w]=t._wrapper.group(this._chart,e.extend({class_:"series"+w,fill:E._fill,stroke:E._stroke,strokeWidth:E._strokeWidth},E._settings||{})));if(E._values[m]===0)continue;var S=b/r[m]*2*Math.PI;b+=E._values[m];var x=b/r[m]*2*Math.PI,T=!1;for(var N=0;N<a.length;N++)if(a[N]===w){T=!0;break}var C=g+(T?f*Math.cos((S+x)/2):0),k=y+(T?f*Math.sin((S+x)/2):0),L=t._wrapper.path(v[w],u.reset().move(C,k).line(C+p*Math.cos(S),k+p*Math.sin(S)).arc(p,p,0,x-S<Math.PI?0:1,1,C+p*Math.cos(x),k+p*Math.sin(x)).close());t._showStatus(L,E._name,o((x-S)/2/Math.PI*100,2))}t.xAxis&&t._wrapper.text(d,g,n[t.Y]+n[t.H]+t.xAxis._titleOffset,t.xAxis._labels[m])}}}),e.svg.graphing.addChartType("column",new a),e.svg.graphing.addChartType("stackedColumn",new f),e.svg.graphing.addChartType("row",new l),e.svg.graphing.addChartType("stackedRow",new c),e.svg.graphing.addChartType("line",new h),e.svg.graphing.addChartType("pie",new p)})(jQuery);